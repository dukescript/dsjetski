/**
 * Copyright (c) 2014, 2015, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojmodel","ojs/ojdatacollection-common"],function(a,f){a.Ce=function(a,b){this.Pga=a;this.ec=b};o_("EmptyNodeSet",a.Ce,a);a.Ce.prototype.getParent=function(){return this.Pga};a.b.i("EmptyNodeSet.prototype.getParent",{getParent:a.Ce.prototype.getParent});a.Ce.prototype.ua=function(){return this.ec};a.b.i("EmptyNodeSet.prototype.getStart",{ua:a.Ce.prototype.ua});a.Ce.prototype.R=function(){return 0};a.b.i("EmptyNodeSet.prototype.getCount",{R:a.Ce.prototype.R});
a.Ce.prototype.getData=function(){return null};a.b.i("EmptyNodeSet.prototype.getData",{getData:a.Ce.prototype.getData});a.Ce.prototype.getMetadata=function(){return null};a.b.i("EmptyNodeSet.prototype.getMetadata",{getMetadata:a.Ce.prototype.getMetadata});a.De=function(a,b){this.Ab=a;this.ec=b};o_("FlattenedNodeSet",a.De,a);a.De.prototype.getParent=function(){return this.Ab.getParent()};a.b.i("FlattenedNodeSet.prototype.getParent",{getParent:a.De.prototype.getParent});a.De.prototype.ua=function(){return void 0!=
this.ec?this.ec:this.Ab.ua()};a.b.i("FlattenedNodeSet.prototype.getStart",{ua:a.De.prototype.ua});a.De.prototype.R=function(){void 0===this.HB&&(this.HB=this.jR(this.Ab,0),void 0!=this.ec&&(this.HB-=this.ec));return this.HB};a.b.i("FlattenedNodeSet.prototype.getCount",{R:a.De.prototype.R});a.De.prototype.jR=function(a,b){var c,e,g,f;c=a.ua();e=a.R();b+=e;if(a.pf)for(g=0;g<e;g++)f=a.pf(g+c),null!=f&&(b=this.jR(f,b));return b};a.De.prototype.getData=function(a){return this.JF(this.Ab,a,{index:this.Ab.ua()},
this.lb)};a.b.i("FlattenedNodeSet.prototype.getData",{getData:a.De.prototype.getData});a.De.prototype.getMetadata=function(a){return this.JF(this.Ab,a,{index:this.Ab.ua()},this.XF)};a.b.i("FlattenedNodeSet.prototype.getMetadata",{getMetadata:a.De.prototype.getMetadata});a.De.prototype.XF=function(a,b){return a.getMetadata(b)};a.De.prototype.lb=function(a,b){return a.getData(b)};a.De.prototype.JF=function(a,b,c,e){var g,f,k,l;g=a.ua();f=a.R();for(k=0;k<f;k++){l=c.index;if(l===b)return e.call(this,
a,k+g);c.index=l+1;if(a.pf&&(l=a.pf(k+g),null!=l&&(l=this.JF(l,b,c,e),null!=l)))return l}return null};a.kg=function(a,b,c){this.qn=a;this.HK=b;this.GK=this.k7(c)};o_("MergedNodeSet",a.kg,a);a.kg.prototype.k7=function(a){var b,c,e;b=this.qn.ua();for(c=b+this.qn.R();b<c;b++)if(e=this.qn.getMetadata(b).key,a===e)return b;return c-1};a.kg.prototype.getParent=function(){return this.qn.getParent()};a.b.i("MergedNodeSet.prototype.getParent",{getParent:a.kg.prototype.getParent});a.kg.prototype.ua=function(){return this.qn.ua()};
a.b.i("MergedNodeSet.prototype.getStart",{ua:a.kg.prototype.ua});a.kg.prototype.R=function(){return this.qn.R()+this.HK.R()};a.b.i("MergedNodeSet.prototype.getCount",{R:a.kg.prototype.R});a.kg.prototype.getData=function(a){a=this.WR(a);return a.set.getData(a.index)};a.b.i("MergedNodeSet.prototype.getData",{getData:a.kg.prototype.getData});a.kg.prototype.getMetadata=function(a){a=this.WR(a);return a.set.getMetadata(a.index)};a.b.i("MergedNodeSet.prototype.getMetadata",{getMetadata:a.kg.prototype.getMetadata});
a.kg.prototype.WR=function(a){if(a<=this.GK)return{set:this.qn,index:a};var b=this.HK.R();return a>this.GK+b?{set:this.qn,index:a-b}:{set:this.HK,index:a-(this.GK+1)}};a.Ge=function(a,b,c,e){this.Ab=a;this.aj=b;this.Bs=c;this.bi=e};o_("NodeSetWrapper",a.Ge,a);a.Ge.prototype.getParent=function(){return this.Ab.getParent()};a.b.i("NodeSetWrapper.prototype.getParent",{getParent:a.Ge.prototype.getParent});a.Ge.prototype.ua=function(){return null!=this.Bs?this.Bs.start:this.Ab.ua()};a.b.i("NodeSetWrapper.prototype.getStart",
{ua:a.Ge.prototype.ua});a.Ge.prototype.R=function(){var a,b;a=this.Ab.ua();b=this.Ab.R();null!=this.Bs&&(this.Bs.start>a?b=Math.min(0,b-(this.Bs.start-a)):this.Bs.start<a&&(b=0));return b};a.b.i("NodeSetWrapper.prototype.getCount",{R:a.Ge.prototype.R});a.Ge.prototype.getData=function(a){return this.Ab.getData(a)};a.b.i("NodeSetWrapper.prototype.getData",{getData:a.Ge.prototype.getData});a.Ge.prototype.getMetadata=function(a){var b;b=this.Ab.getMetadata(a);b.index=a;b.parentKey=this.getParent();this.aj.call(null,
b.key,b);return b};a.b.i("NodeSetWrapper.prototype.getMetadata",{getMetadata:a.Ge.prototype.getMetadata});a.Ge.prototype.pf=function(d){return null!=this.bi&&-1!=this.bi.indexOf(this.Ab.getMetadata(d).key)||!this.Ab.pf||(d=this.Ab.pf(d),null==d)?null:new a.Ge(d,this.aj,null,this.bi)};a.b.i("NodeSetWrapper.prototype.getChildNodeSet",{pf:a.Ge.prototype.pf});a.ma=function(d,b){this.uf=d;this.Hw=b||{};a.ma.q.constructor.call(this)};o_("FlattenedTreeDataSource",a.ma,a);a.b.ga(a.ma,a.Og,"oj.FlattenedTreeDataSource");
a.ma.prototype.Init=function(){var d;a.ma.q.Init.call(this);this.uf.on("change",this.P9.bind(this));this.CK=parseInt(this.Hw.fetchSize,10);isNaN(this.CK)&&(this.CK=25);this.zp=parseInt(this.Hw.maxCount,10);isNaN(this.zp)&&(this.zp=500);d=this.Hw.expanded;Array.isArray(d)?this.xl=d:("all"===d&&(this.bi=[]),this.xl=[]);this.wl=[]};a.b.i("FlattenedTreeDataSource.prototype.Init",{Init:a.ma.prototype.Init});a.ma.prototype.handleEvent=function(d,b){return a.ma.q.handleEvent.call(this,d,b)};a.b.i("FlattenedTreeDataSource.prototype.handleEvent",
{handleEvent:a.ma.prototype.handleEvent});a.ma.prototype.Ae=function(){delete this.wl;delete this.xl;delete this.bi;this.uf.off("change");this.uf.Ae&&this.uf.Ae()};a.b.i("FlattenedTreeDataSource.prototype.Destroy",{Ae:a.ma.prototype.Ae});a.ma.prototype.PJ=function(){return this.CK};a.ma.prototype.vY=function(){return this.xl};a.b.i("FlattenedTreeDataSource.prototype.getExpandedKeys",{vY:a.ma.prototype.vY});a.ma.prototype.jw=function(a){return null!=this.Hw?this.Hw[a]:null};a.b.i("FlattenedTreeDataSource.prototype.getOption",
{jw:a.ma.prototype.jw});a.ma.prototype.getWrappedDataSource=function(){return this.uf};a.b.i("FlattenedTreeDataSource.prototype.getWrappedDataSource",{getWrappedDataSource:a.ma.prototype.getWrappedDataSource});a.ma.prototype.NF=function(a){var b,c;b=this.PJ();c=this.zp;return-1===b?-1===a?c:a:-1===a?Math.min(b,a):b};a.ma.prototype.op=function(a,b){this.nr()?this.f7(a,b):this.e7(a,b)};a.ma.prototype.e7=function(d,b){var c,e,g,f,k,l;if(d.start>this.fe()){c=this.WF();if(0>this.fe()){d.count=Math.min(c,
d.count);this.uf.Rd(null,d,{success:function(a){this.zm(a,null,0,d,0,b)}.bind(this),error:function(a){this.Rk(a,b)}.bind(this)});return}if(0<c){e=this.FR();g=e.parent;f=this.uf.nf(g);k=e.index;l=e.depth;-1===f||k<f-1?(e=this.NF(f),d.start=k+1,d.count=-1===f?e:Math.min(c,Math.min(e,f-d.start)),this.uf.Rd(g,d,{success:function(a){this.zm(a,g,l,d,f,b)}.bind(this),error:function(a){this.Rk(a,b)}.bind(this)})):k===f-1?(c=new a.Ce(null,d.start),null!=b&&null!=b.success&&b.success.call(null,c)):(c=this.JQ(g,
l,b,c),c||(c=new a.Ce(null,d.start),null!=b&&null!=b.success&&b.success.call(null,c)));return}}this.bK(d,b)};a.ma.prototype.WF=function(){return this.zp-(this.fe()+1)};a.ma.prototype.Rk=function(a,b){null!=b&&null!=b.error&&b.error.call(null,a)};a.ma.prototype.zm=function(d,b,c,e,g,f){var k;k=[];d=new a.Ge(d,this.rw.bind(this),e);this.Pba(d,b,c,k);-1===g&&0===d.R()&&null!=b&&0<c?(k=this.JQ(b,c,f))||null!=f&&null!=f.success&&f.success.call(null,d):0===k.length?null!=f&&null!=f.success&&f.success.call(null,
d):(b=[],b.push(k),k={},k.callbacks=f,k.nodeSet=d,k.keys=[],this.IW(b,k))};a.ma.prototype.JQ=function(a,b,c,e){var g,f,k,l,m,n,q,p,r;void 0===e&&(e=this.WF());this.daa()&&(g={queueOnly:!0});f=r=this.NF(-1);for(k=this.fe()-1;0<=k;k--)if(l=this.wg(k),m=l.depth,m<b&&(a=l.parent,n=this.uf.nf(a),l=l.index,(q=-1===n)||l<n-1)){p={};p.start=l+1;q?(p.count=Math.min(e,Math.max(0,f)),g=void 0):p.count=Math.min(e,Math.min(f,n-p.start));if(0==p.count)break;this.uf.Rd(a,p,{success:function(b){this.zm(b,a,m,p,n,
c)}.bind(this),error:function(a){this.Rk(a,c)}.bind(this)},g);b=m;f=Math.max(0,f-p.count);if(q||0===m||0===f)break}void 0!=g&&this.uf.Rd(a,{start:p.count,count:0},{success:function(b){this.zm(b,a,m,p,n,c)}.bind(this),error:function(a){this.Rk(a,c)}.bind(this)});return f!=r};a.ma.prototype.Pba=function(a,b,c,e){var g,f,k,l;g=a.ua();f=a.R();for(k=0;k<f;k++)l=a.getMetadata(g+k),l=l.key,this.Yx(l,c,g+k,b),this.Qu(l)&&e.push(l)};a.ma.prototype.rw=function(a,b){this.Qu(a)&&!b.leaf?b.state="expanded":b.state=
b.leaf?"leaf":"collapsed"};a.ma.prototype.f7=function(a,b){var c={maxCount:this.zp};0<=this.fe()&&(c.start=this.wg(this.fe()).key);this.uf.ll(null,{success:function(c){this.y9(c,a,b)}.bind(this),error:function(a){this.Rk(a,b)}.bind(this)},c)};a.ma.prototype.y9=function(d,b,c){var e,g,f;b.start>this.fe()?(e=this.WF(),g=Math.min(e,b.count),d=new a.Ge(d,this.rw.bind(this),null,this.bi),0<=this.fe()?(f=this.FR(),e={index:0,found:!1,count:0},this.KH(d,null,0,f,g,e),g=e.index+1):(e={count:0},this.KH(d,
null,0,null,g,e),g=0),null!=c&&null!=c.success&&(d=null!=e?0===e.count?new a.Ce(null,b.start):new a.De(d,g):new a.De(d),c.success.call(null,d))):this.bK(b,c)};a.ma.prototype.KH=function(a,b,c,e,g,f){var k,l,m,n,q;k=a.ua();l=a.R();for(m=0;m<l&&f.count!=g;m++){n=a.getMetadata(k+m);q=n.key;f.checkDepth&&e.depth===c&&(f.found=!0,f.checkDepth=!1);if(null==e||f.found)this.Yx(q,c,k+m,b),f.count+=1,n.state=n.leaf?"leaf":"expanded";null==e||f.found||(q===e.key?n.leaf||this.Qu(q)?f.found=!0:f.checkDepth=!0:
f.index+=1);a.pf&&this.Qu(q)&&(n=a.pf(m),null!=n&&this.KH(n,q,c+1,e,g,f))}};a.ma.prototype.expand=function(a){this.ce(a)};a.b.i("FlattenedTreeDataSource.prototype.expand",{expand:a.ma.prototype.expand});a.ma.prototype.ce=function(d,b){var c,e,f,h;c=this.uf.nf(d);e=this.NF(c);f=this.zp;if(this.fe()+1===f&&(h=this.Yh(d),h==f-1)){this.aK(d,new a.Ce(d,0),0,b);return}0==e?this.aK(d,new a.Ce(d,0),0,b):this.uf.Rd(d,{start:0,count:e},{success:function(a){this.aK(d,a,c,b)}.bind(this),error:function(){this.kga(d)}.bind(this)})};
a.ma.prototype.collapse=function(a){var b,c,e,f,h;b=this.Yh(a)+1;c=this.wg(b-1);e=0;c=c.depth;f=this.fe();for(h=b;h<f+1;h++){var k=this.wg(h).depth;if(k>c)e+=1;else if(k==c)break}if(0!=e){this.nr()?this.bi.push(a):this.wca(a);f=[];for(c=0;c<e;c++)f.push({key:this.wg(b+c).key,index:b+c});this.dV(b,e);this.VB(f)}this.handleEvent("collapse",{rowKey:a})};a.b.i("FlattenedTreeDataSource.prototype.collapse",{collapse:a.ma.prototype.collapse});a.ma.prototype.Qu=function(a){return this.nr()?this.bi&&0<this.bi.length?
-1===this.$Q(a):!0:this.xl&&0<this.xl.length?-1<this.pR(a):!1};a.ma.prototype.$Q=function(a){return this.DR(this.bi,a)};a.ma.prototype.pR=function(a){return this.DR(this.xl,a)};a.ma.prototype.DR=function(a,b){var c,e;e=-1;for(c=0;c<a.length;c++)a[c]===b&&(e=c);return e};a.ma.prototype.wca=function(a){a=this.pR(a);-1<a&&this.xl.splice(a,1)};a.ma.prototype.rca=function(a){a=this.$Q(a);-1<a&&this.bi.splice(a,1)};a.ma.prototype.kga=function(a){this.handleEvent("expand",{rowKey:a})};a.ma.prototype.aK=
function(d,b,c,e){var f,h,k,l,m,n,q,p,r,s,t;b=new a.Ge(b,this.rw.bind(this));h=f=this.Yh(d)+1;k=b.ua();l=b.R();m=this.wg(f-1);n=m.depth+1;p=[];for(r=k;r<l;r++)k=b.getMetadata(r),q=k.key,this.Qu(q)&&p.push(q),this.mT(f,k,m.key,r,n),f++;this.nr()?this.rca(d):-1===this.xl.indexOf(d)&&this.xl.push(d);void 0!=e&&(s=e.queue,t=e.prevNodeSetInfo);void 0!=t&&(b=new a.kg(t.nodeSet,b,d));if(0!=p.length||void 0!==s&&0!=s.length)void 0===s&&(s=[]),0<p.length&&s.push(p),void 0===t&&(t={},t.firstIndex=h,t.firstKey=
d,t.keys=[]),t.nodeSet=b,t.keys.push(d),this.IW(s,t);else{if(void 0!=t){e=t.callbacks;if(null!=e){e.success.call(null,b);return}this.CB(t.firstIndex,t.firstKey,b)}else this.CB(h,d,b);b=this.zp;-1===c&&l===this.PJ()||c>l||f==b?this.YE(f):this.fe()>=b&&this.YE(b);if(void 0!=t)for(c=0;c<t.keys.length;c++)this.handleEvent("expand",{rowKey:t.keys[c]});this.handleEvent("expand",{rowKey:d})}};a.ma.prototype.IW=function(a,b){var c,e;c=a[a.length-1];e=c.shift();0===c.length&&a.pop();this.ce(e,{prevNodeSetInfo:b,
queue:a})};a.ma.prototype.mT=function(a,b,c,e,f){b=b.key;a<=this.fe()?this.Yx(b,f,e,c,a):this.Yx(b,f,e,c)};a.ma.prototype.YE=function(a,b){var c;void 0==b&&(b=this.fe()+1-a);c=[];for(var e=0;e<b;e++)c.push({row:this.wg(a+e).key,index:a+e});this.dV(a,b);this.VB(c)};a.ma.prototype.P9=function(a){var b,c,e;b=a.operation;c=a.parent;c=Array.isArray(c)?c[c.length-1]:c;e=a.index;"insert"===b?this.C9(c,e,a.data):"delete"===b?this.m9(c,e):"refresh"===b&&this.Y9(c)};a.ma.prototype.C9=function(a,b,c){var e,
f;e=this.Yh(a);f=this.wg(e).depth+1;e=e+b+1;c=c.getMetadata(c.ua());this.mT(e,c,a,b,f)};a.ma.prototype.m9=function(d,b){var c,e,f,h,k;c=this.Yh(d);e=this.wg(c);c+=b;f=this.wg(c);a.j.assert(f.parent===e&&f.depth===e.depth+1);e=c+1;for(h=this.fe();e<=h;){k=this.wg(e);if(k.depth!=f.depth)break;e++}this.YE(c,1)};a.ma.prototype.Y9=function(a){null==a&&this.refresh()};a.ma.prototype.nr=function(){var a=this.uf.getCapability("fetchDescendants");return void 0!=this.bi&&null!=a&&"disable"!=a};a.ma.prototype.daa=
function(){return"enable"===this.uf.getCapability("batchFetch")};a.ma.prototype.refresh=function(){this.a5()};a.ma.prototype.Yh=function(a){var b,c,e;b=this.fe();for(c=0;c<=b;c++)if(e=this.wg(c),e.key==a)return c;return-1};a.ma.prototype.getKey=function(a){return 0>a||a>this.fe()?null:this.wg(a).key};a.ma.prototype.Yfa=function(){return{start:0,end:this.fe()+1}};a.ma.prototype.Rfa=function(a){var b;b=[];a=this.Yh(a);for(a=this.Hi(a);null!=a;)b.push(a),a=this.Yh(a),a=this.Hi(a);return b.reverse()};
a.ma.prototype.bK=function(a,b){null!=b&&null!=b.error&&b.error.call(null)};a.ma.prototype.CB=function(){a.j.Ya()};a.ma.prototype.VB=function(){a.j.Ya()};a.ma.prototype.fe=function(){return this.wl.length-1};a.ma.prototype.FR=function(){return this.wl[this.fe()]};a.ma.prototype.wg=function(a){return this.wl[a]};a.ma.prototype.Hi=function(a){a=this.wl[a];return null!=a?a.parent:null};a.ma.prototype.Yx=function(a,b,c,e,f){var h={};h.key=a;h.depth=b;h.index=c;h.parent=e;void 0===f?this.wl.push(h):this.wl.splice(f,
0,h)};a.ma.prototype.dV=function(a,b){this.wl.splice(a,b)};a.ma.prototype.a5=function(){this.wl.length=0};a.Da("oj.ojRowExpander",f.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{context:null,expand:null,collapse:null},Tj:{root:"oj-rowexpander",icon:"oj-component-icon",clickable:"oj-clickable-icon-nocontext",expand:"oj-rowexpander-expand-icon",collapse:"oj-rowexpander-collapse-icon",leaf:"oj-rowexpander-leaf-icon",lazyload:"oj-rowexpander-lazyload-icon",toucharea:"oj-rowexpander-touch-area",
indent:"oj-rowexpander-indent",iconspacer:"oj-rowexpander-icon-spacer",depth0:"oj-rowexpander-depth-0",depth1:"oj-rowexpander-depth-1",depth2:"oj-rowexpander-depth-2",depth3:"oj-rowexpander-depth-3",depth4:"oj-rowexpander-depth-4",depth5:"oj-rowexpander-depth-5",depth6:"oj-rowexpander-depth-6",depth7:"oj-rowexpander-depth-7"},fs:{Ts:7,Q0:53},_ComponentCreate:function(){this._super();this.element.addClass(this.Tj.root);this.ZS()},ZS:function(){var a=this,b;b=this.options.context;this.Aa=b.component;
this.kc=b.datasource;this.depth=b.depth;this.ph=b.state;this.Fl=b.key;this.index=b.index;this.QB=b.parentKey;this.R3();this.Q3();this.AA();"expanded"===this.ph||"collapsed"===this.ph?(f(this.mL).on("touchend",function(b){b.preventDefault();a.xF()}),f(this.mL).on("click",function(b){b.preventDefault();a.xF()}),f(this.element).on("keypress",function(b){var e=b.keyCode||b.which;if(e===f.ui.keyCode.ENTER||e===f.ui.keyCode.SPACE)a.xF(),b.preventDefault(),b.target.focus()}),this.zB=this.yS.bind(this),f(this.Aa.element).on("ojkeydown",
this.zB),this.$Y=this.w9.bind(this),this.ZY=this.d9.bind(this),this.kc.on("expand",this.$Y,this),this.kc.on("collapse",this.ZY,this)):"leaf"===this.ph&&(this.zB=this.yS.bind(this),f(this.Aa.element).on("ojkeydown",this.zB),f(this.icon).attr("tabindex",-1));this.YY=this.W8.bind(this);f(this.Aa.element).on("ojactive",this.YY)},refresh:function(){this.element.empty();this.ZS()},_destroy:function(){f(this.Aa.element).off("ojkeydown",this.zB);f(this.Aa.element).off("ojactive",this.YY);this.kc.off("expand",
this.$Y,this);this.kc.off("collapse",this.ZY,this);this.element.removeClass(this.Tj.root);this.element.empty()},_setOption:function(a,b,c){this._super(a,b,c);"context"==a&&this.refresh()},R3:function(){var a,b;b=this.depth-1;if(b<this.fs.Ts)this.UD(b);else{for(a=1;a<=b/this.fs.Ts;a++)this.UD(this.fs.Ts);a=b%this.fs.Ts;a<this.fs.Ts&&this.UD(a)}},UD:function(a){a=f(document.createElement("span")).addClass(this.Tj.indent).addClass(this.Tj["depth"+a]);this.element.append(a)},Q3:function(){var a=f(document.createElement("div")).addClass(this.Tj.iconspacer);
this.mL=f(document.createElement("div")).addClass(this.Tj.toucharea);this.icon=f(document.createElement("a")).attr("href","#").attr("aria-labelledby",this.ER()).addClass(this.Tj.icon).addClass(this.Tj.clickable);this.element.append(a.append(this.mL.append(this.icon)))},ho:function(a){this.icon.addClass(this.Tj[a])},Zo:function(a){this.icon.removeClass(this.Tj[a])},AA:function(){switch(this.ph){case "leaf":this.Zo("icon");this.Zo("clickable");this.ho("leaf");break;case "collapsed":this.ho("expand");
this.cy(!1);break;case "expanded":this.ho("collapse");this.cy(!0);break;case "loading":this.Zo("clickable"),this.ho("lazyload")}},YH:function(){switch(this.ph){case "leaf":this.Zo("leaf");this.ho("icon");this.ho("clickable");break;case "collapsed":this.Zo("expand");break;case "expanded":this.Zo("collapse");break;case "loading":this.Zo("lazyload"),this.ho("clickable")}},W8:function(a,b){var c,e;null!=b.activeKey&&(c=b.activeKey.rowKey,this.Fl!==c||null!=b.previousActiveKey&&b.previousActiveKey.row==
b.activeKey.row||!this.Aa.vA||(c=this.D("accessibleRowDescription",{level:this.depth,num:this.index+1,total:this.kc.getWrappedDataSource().nf(this.QB)}),e="collapsed"===this.ph?this.D("accessibleStateCollapsed"):"expanded"===this.ph?this.D("accessibleStateExpanded"):"",this.Aa.vA({context:c,state:e})))},yS:function(d,b){var c,e,g;if(this.Fl===b.rowKey&&(d=d.originalEvent,c=d.keyCode||d.which,a.C.ys(d)))if(c==f.ui.keyCode.RIGHT&&"collapsed"===this.ph)this.mH(),this.kc.expand(this.Fl),d.preventDefault();
else if(c==f.ui.keyCode.LEFT&&"expanded"===this.ph)this.mH(),this.kc.collapse(this.Fl),d.preventDefault();else if(d.altKey&&c==this.fs.Q0&&this.Aa.vA){c=this.kc.Rfa(this.Fl);if(null!=c&&0<c.length)for(e=[],g=0;g<c.length;g++)e.push({key:c[g],label:this.D("accessibleLevelDescription",{level:g+1})});c=this.D("accessibleRowDescription",{level:this.depth,num:this.index+1,total:this.kc.getWrappedDataSource().nf(this.QB)});this.Aa.vA({context:c,state:"",ancestors:e});d.preventDefault()}},mH:function(){this.YH();
this.ph="loading";this.AA()},w9:function(a){a=a.rowKey;a===this.Fl&&(this.YH(),this.ph="expanded",this.AA(),this.cy(!0),this._trigger("expand",null,{rowKey:a}))},d9:function(a){a=a.rowKey;a===this.Fl&&(this.YH(),this.ph="collapsed",this.AA(),this.cy(!1),this._trigger("collapse",null,{rowKey:a}))},xF:function(){var a=this.ph;this.mH();"collapsed"===a?this.kc.expand(this.Fl):"expanded"===a&&this.kc.collapse(this.Fl)},cy:function(a){this.icon.attr("aria-expanded",a)},getNodeBySubId:function(a){return null==
a?this.element?this.element[0]:null:"oj-rowexpander-icon"===a.subId&&null!=this.icon?this.icon.get(0):null},getSubIdByNode:function(a){return a===this.icon.get(0)?{oja:"oj-rowexpander-icon"}:null},Zl:function(){this._super();this.icon.attr("aria-labelledby",this.ER())},ER:function(){return this.element.parent().closest("[id]").attr("id")}})});