/**
 * Copyright (c) 2014, 2015, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojeditablevalue","jqueryui-amd/draggable","ojs/ojtouchproxy"],function(a,f){(function(){a.Da("oj.ojSlider",f.oj.editableValue,{defaultElement:"\x3cinput\x3e",version:"1.1.1",widgetEventPrefix:"oj",options:{distance:0,max:100,min:0,orientation:"horizontal",readOnly:!1,disabled:!1,step:1,type:"fromMin",value:0},iU:5,Ke:function(){return"rtl"===a.C.rs()},_ComponentCreate:function(){this._super();this.bA=[];this.element.removeAttr("pattern");this.bu=this.Mo=!1;this.Si=
null;this.lT=!1;this.element.is("INPUT")?(this.lT=!0,this.element[0].style&&(this.Xda=this.element[0].style.cssText),this.jT=this.element.css("display"),this.element.css("display","none"),this.Zg=f(this.element).wrap("\x3cdiv\x3e \x3c/div\x3e").parent()):this.Zg=this.element;var a="oj-slider ",a=this.wc()?a+"oj-slider-vertical":a+"oj-slider-horizontal";this.Zg.addClass(a+" ui-widget ui-widget-content");this.Le="range"===this.options.type?!0:!1;this.WO();this.za();this.Pi()},Ug:function(){this._super();
this.Po();var a=this.L1();if(a){var b=this.Zg.find(".oj-slider-thumb"),c=a.attr("id");c||(c=a.attr("for"));b.attr("aria-labelledby",c);1<a.length&&1<b.length&&b[1].attr("aria-labelledby",String(c))}else if(a=this.element.attr("aria-label"))b=this.Zg.find(".oj-slider-thumb"),b.attr("aria-label",a)},L1:function(){var a=this.v7();if(null!==a&&0!==a.length)return a;a=this.u7();if(null!==a&&0!==a.length)return a},u7:function(){var a=this.element.prop("id");if(void 0!==a){var b=f("label[for\x3d'"+a+"']");
if(0<b.length)return b;a="span[for\x3d'"+a+"']";if(0!==f(a).length)return f(a)}return null},v7:function(){var a=this.element.attr("aria-labelledby");if(void 0!==a){var b=f("label[id\x3d'"+a+"']");if(0<b.length)return b;a=f("span[id\x3d'"+a+"']");if(0<a.length)return a}else return null},widget:function(){return this.Zg},za:function(){this.d6();this.C5();this.b6();this.h6();this.Zk()},ez:function(){return this.element[0].id},Cu:function(a){return this.ez()+"-thumb"+a},Xy:function(){return this.ez()+
"-barValue"},DF:function(){return this.ez()+"-barBack"},M8:function(){return this.ez()+"-sliderWrapper"},h6:function(){var a,b,c="",e="class\x3d'oj-slider-thumb ui-state-default' tabindex\x3d'0' role\x3d'slider'"+("aria-valuemin \x3d '"+this.qd()+"' ")+("aria-valuemax \x3d '"+this.lf()+"' ")+"\x3e\x3c/span\x3e",g=[];b=this.Le?this.options.value.length:1;for(a=0;a<b;a++)c="\x3cspan "+("id\x3d'"+this.Cu(a)+"' ")+e,g.push(c);this.gh=f(g.join("")).appendTo(this.Ri);this.dl=this.gh.eq(0);var h=this;this.gh.each(function(a){f(this).data("oj-slider-thumb-index",
a);h.wc()&&f(this).attr("aria-orientation","vertical");h.options.disabled?(f(this).attr("aria-disabled","true"),f(this).removeAttr("tabindex")):f(this).removeAttr("aria-disabled");h.options.readOnly?f(this).attr("title","read only"):f(this).removeAttr("title")})},d6:function(){var a=this.M8(),b=this.Zg.find("#"+a);b.length&&b.remove();this.Ri=f("\x3cdiv\x3e\x3c/div\x3e");f(this.Ri).attr("id",a);this.Ri.addClass("oj-slider-container");this.element.after(this.Ri);this.Ri[0].style.cssText=this.Xda;this.wc()&&
""==this.Ri[0].style.height&&(this.Ri[0].style.height="150px")},C5:function(){var a=this.DF(),b=this.Zg.find("#"+a);b.length&&b.remove();this.yb=f("\x3cdiv\x3e\x3c/div\x3e");b="oj-slider-bar";b=this.wc()?b+" oj-slider-vertical":b+" oj-slider-horizontal";f(this.yb).attr("id",a);this.yb.addClass(b);this.Ri.append(this.yb);var c=this;this.yb.on("mousedown"+c.eventNamespace,function(a){c.aH(a,!1);c.bv(a);c.lA();c.Wy().addClass("ui-state-active").focus()})},b6:function(){var a=this.options,b="";if(a.type){this.options.value?
this.Le&&(2===this.options.value.length?this.options.value=this.options.value.slice(0):(this.options.value=[this.options.value[0],this.lf()],this.option("value",this.options.value,{_context:{ed:!0,mb:!0}}))):(this.options.value=this.Le?[this.qd(),this.lf()]:this.qd(),this.option("value",this.options.value,{_context:{ed:!0,mb:!0}}));if(this.Jb&&this.Jb.length)this.Jb.removeClass("oj-slider-range-min oj-slider-range-max").css({left:"",top:""});else{this.Jb=f("\x3cdiv\x3e\x3c/div\x3e");f(this.Jb).attr("id",
this.Xy());this.Ri.append(this.Jb);var b="oj-slider-range oj-slider-bar-value",c=this;this.Jb.on("mousedown"+c.eventNamespace,function(a){c.aH(a,!1);c.bv(a);c.lA();c.Wy().addClass("ui-state-active").focus()})}this.Jb=this.Ri.find("#"+this.Xy());var e="";"fromMin"===a.type?e=" oj-slider-range-min":"fromMax"===a.type&&(e=" oj-slider-range-max");this.Jb.addClass(b+e)}else this.Jb&&this.Jb.remove(),this.Jb=null},Kda:function(d){this.FI=a.be.pX(d)},cea:function(d){a.be.j_(d)},Pi:function(){this.gh.toArray().forEach(function(a){a=
f(a);this.uq(a);this._on(a,this.hea);this.Kda(a);this._hoverable(a);this._focusable(a)},this)},_destroy:function(){this.gh.toArray().forEach(function(a){a=f(a);this.cea(a)},this);this.Ri.remove();a.C.unwrap(this.element,this.Zg);this.element.css("display",this.jT);this.nq(this.element);return this._super()},aH:function(a,b){var c,e,g,h,k=this,l=this.options;this.tP=this.dl;if(l.disabled||l.readOnly)return!1;!b||this.Le?(c={x:a.pageX,y:a.pageY},e=this.v8(c)):e=this.NR();g=this.lf()-this.qd()+1;this.Le&&
this.gh.each(function(a){var b=Math.abs(e-k.xo(a));if(g>b||g===b&&(a===k.yaa||k.xo(a)===l.min))g=b,this.tP=f(this),h=a});this.bu=!0;this.Si=h;if(this.tP)return this.gh.hasClass("ui-state-hover")||this.Lr(a,h,e),this.Wy().addClass("ui-state-active").focus(),!0},qH:function(){return!0},Wz:function(){var a=100*this.sR();this.Le?this.cW(a,this.Si):this.$V(a);return!1},bv:function(a){this.gh.removeClass("ui-state-active");this.bu=!1;var b=this.NR();this.Lr(a,this.Si,b);this.rg(a,this.Si);this.Si=null;
return!1},wc:function(){return"vertical"===this.options.orientation},OR:function(a){1<a&&(a=1);0>a&&(a=0);this.wc()&&(a=1-a);return a},v8:function(a){var b=this.X7(a);a=this.lf()-this.qd();this.Ke()&&!this.wc()&&(b=1-b);return this.Ti(this.qd()+b*a)},X7:function(a){var b;this.wc()?(b=this.yb.height(),a=a.y-this.yb.offset().top):(b=this.yb.width(),a=a.x-this.yb.offset().left);return 0==b?1:b=this.OR(a/b)},Wy:function(){return this.Le?f(this.gh[this.Si]):this.dl},sR:function(){var a,b;a=this.Wy();this.wc()?
(b=a.outerHeight()/2,b=a.offset().top+b,a=this.yb.height(),b-=this.yb.offset().top):(b=a.outerWidth()/2,b=a.offset().left+b,a=this.yb.width(),b-=this.yb.offset().left);return 0==a?1:a=this.OR(b/a)},NR:function(){var a,b;a=this.sR();b=this.lf()-this.qd();this.Ke()&&!this.wc()&&(a=1-a);return this.Ti(this.qd()+a*b)},Lr:function(a,b,c){var e;this.Le?(e=this.xo(b?0:1),2===this.options.value.length&&(0===b&&c>e||1===b&&c<e)&&(c=e),c!==this.xo(b)&&this.xda(a,b,c)):c!==this.jG()&&(this.Ada(a,c),this.lT&&
this.element.val(c))},rg:function(a,b){this.Mo||this.bu||(this.Le?(this.zaa=this.t8(b,this.bA[b]),this.tc(this.zaa,a)):this.tc(this.tH,a),this.yaa=b)},jG:function(){return this.Mo||this.bu?isNaN(this.tH)?this.tG():this.tH:this.tG()},Ada:function(a,b){this.tH=this.Ti(b);this.rg(a,0);this.Zk()},xo:function(a){return this.Le?this.Mo||this.bu?a!==this.Si||isNaN(this.bA[a])?this.pS(a):this.bA[a]:this.pS(a):this.jG()},xda:function(a,b,c){this.bA[b]=this.Ti(c);this.rg(a,b);this.Zk()},_setOption:function(a,
b,c){"value"===a&&(Array.isArray(b)?this.Le=!0:(this.Le=!1,this.Yk(a,b)));b="max"===a||"min"===a?this.Yk(a,b):"step"===a?this.fv(b):b;"disabled"!=a&&this._super(a,b,c);"readOnly"===a&&(this.Zg.toggleClass("oj-read-only",!!b),this.za());"disabled"===a&&(this.x6(),this.Zg.toggleClass("oj-disabled",!!b),this.options.disabled=b,this.za());switch(a){case "orientation":this.Zg.removeClass("oj-slider-horizontal oj-slider-vertical");this.yb.removeClass("oj-slider-horizontal oj-slider-vertical");this.wc()?
(this.Zg.addClass("oj-slider-vertical"),this.yb.addClass("oj-slider-vertical")):(this.Zg.addClass("oj-slider-horizontal"),this.yb.addClass("oj-slider-horizontal"));this.Zk();this.gh.css("horizontal"===b?"top":"left","");this.Po();break;case "value":this.Zk();this.Po();break;case "step":case "min":case "max":this.WO();this.Zk();this.Po();break;case "range":this.za()}},tG:function(){var a=this.options.value;return a=this.Ti(a)},pS:function(a){return this.Ti(this.options.value[a])},t8:function(a,b){var c,
e;c=this.options.value.slice();for(e=0;e<c.length;e+=1)c[e]=this.Ti(c[e]);a===this.Si&&(c[a]=b);return c},Ti:function(a){if(a<=this.qd())return this.qd();if(a>=this.lf())return this.lf();var b=0<this.options.step?this.options.step:1,c=(a-this.qd())%b;a-=c;2*Math.abs(c)>=b&&(a+=0<c?b:-b);return parseFloat(a.toFixed(5))},WO:function(){var a=this.qd();this.max=0!==(this.options.max-a)/this.options.step%1?this.options.max-(this.options.max-a)%this.options.step:this.options.max},qd:function(){return this.options.min},
lf:function(){return this.max},tR:function(){var a;a=0<this.options.step?(this.lf()-this.qd())/this.options.step:100;a=(this.wc()?this.yb.height():this.yb.width())/a;1>a&&(a=1);return this.wc()?[1,a]:[a,1]},Du:function(a){return(this.xo(a)-this.qd())/(this.lf()-this.qd())},Zk:function(){var a,b,c,e;this.Le?this.gh.toArray().forEach(function(b,c){var e=f(b);a=100*this.Du(c);this.Ke()&&!this.wc()&&(a=100-a);this.wc()?f(e).css({top:100-a+"%"}):f(e).css({left:a+"%"});f(e).attr("aria-valuenow",this.xo(c));
this.cW(a,c)},this):(b=this.tG(),c=this.qd(),e=this.lf(),a=e!==c?(b-c)/(e-c)*100:0,this.Ke()&&!this.wc()&&(a=100-a),this.wc()?this.dl.css({top:100-a+"%"}):this.dl.css({left:a+"%"}),f(this.dl).attr("aria-valuenow",b),this.$V(a))},$V:function(a){var b=this.options.type;this.wc()?("fromMin"===b&&this.Jb.css({height:a+"%"}),"fromMax"===b&&this.Jb.css({height:100-a+"%"})):this.Ke()?("fromMin"===b&&this.Jb.css({width:100-a+"%"}),"fromMax"===b&&this.Jb.css({width:a+"%"})):("fromMin"===b&&this.Jb.css({width:a+
"%"}),"fromMax"===b&&this.Jb.css({width:100-a+"%"}))},cW:function(a,b){var c=this.Jb.attr("id");if(0==b)switch(c=100*this.Du(1),this.options.type){case "fromMin":this.wc()?this.Jb.css({height:a+"%"}):this.Jb.css({width:a+"%"});break;case "range":this.wc()?(this.Jb.css({top:100-c+"%"}),this.Jb.css({height:c-a+"%"})):this.Ke()?(this.Jb.css({left:100-c+"%"}),this.Jb.css({width:c-(100-a)+"%"})):(this.Jb.css({left:a+"%"}),this.Jb.css({width:c-a+"%"}))}else{var e=100*this.Du(0);switch(this.options.type){case "fromMax":this.wc()?
this.Jb.css({height:100-a+"%"}):this.Jb.css({width:100-a+"%"});break;case "range":this.wc()?document.getElementById(c)&&(this.Jb.css({top:100-a+"%"}),this.Jb.css({height:a-e+"%"})):this.Ke()?document.getElementById(c)&&(this.Jb.css({left:a+"%"}),this.Jb.css({width:-a+100-e+"%"})):document.getElementById(c)&&this.Jb.css({width:a-parseInt(document.getElementById(c).style.left,10)+"%"})}}},hea:{keydown:function(a){var b,c,e,g=f(a.target).data("oj-slider-thumb-index");this.Si=g;switch(a.keyCode){case f.ui.keyCode.HOME:case f.ui.keyCode.END:case f.ui.keyCode.PAGE_UP:case f.ui.keyCode.PAGE_DOWN:case f.ui.keyCode.UP:case f.ui.keyCode.RIGHT:case f.ui.keyCode.DOWN:case f.ui.keyCode.LEFT:a.preventDefault(),
this.Mo||(this.Mo=!0,f(a.target).addClass("ui-state-active"))}e=this.options.step;b=this.Le?c=this.xo(g):c=this.jG();switch(a.keyCode){case f.ui.keyCode.HOME:c=this.qd();break;case f.ui.keyCode.END:c=this.lf();break;case f.ui.keyCode.PAGE_UP:c=this.Ti(b+(this.lf()-this.qd())/this.iU);break;case f.ui.keyCode.PAGE_DOWN:c=this.Ti(b-(this.lf()-this.qd())/this.iU);break;case f.ui.keyCode.UP:case f.ui.keyCode.RIGHT:if(!this.Ke()||this.wc()){if(b===this.lf())return;b+=e}else{if(b===this.qd())return;b-=e}c=
this.Ti(b);break;case f.ui.keyCode.DOWN:case f.ui.keyCode.LEFT:if(!this.Ke()||this.wc()){if(b===this.qd())return;b-=e}else{if(b===this.lf())return;b+=e}c=this.Ti(b)}this.Lr(a,g,c)},keyup:function(a){var b=f(a.target).data("oj-slider-thumb-index");this.Si=b;this.Mo&&(this.Mo=!1,this.rg(a,b),f(a.target).removeClass("ui-state-active"));this.Si=null;this.lA()}},ae:function(d,b){var c=this.options,e=this;this._superApply(arguments);a.Be.vl([{X:"disabled",ra:!1,rc:!0},{X:"placeholder",ra:""},{X:"value",
ra:null},{X:"readonly",option:"readOnly",ra:!1,rc:!0},{X:"required",ra:!1,je:!0,rc:!0},{X:"title",ra:""},{X:"min",ra:null},{X:"max",ra:null},{X:"step",ra:1}],b,this,function(a){for(var b=["value","step","min","max"],d=0;d<b.length;d++){var f=b[d],m=f in a?a[f]:c[f];null!=m&&("step"===f?a[f]=e.fv(m):"min"===f||"max"===f?a[f]=e.Yk(f,m):"value"===f&&(Array.isArray(m)?a[f]=m:a[f]=e.Yk(f,m)))}});if(void 0===c.value)throw Error(this.D("noValue"));if(null!=c.min&&null!=c.max){if(c.max<c.min)throw Error(this.D("maxMin"));
if(c.value<c.min||c.value>c.max)throw Error(this.D("valueRange"));}},getNodeBySubId:function(a){if(null==a)return this.element?this.element[0]:null;a=a.subId;return"oj-slider-thumb-0"===a?(a="#"+this.Cu(0),this.widget().find(a)[0]):"oj-slider-thumb-1"===a?(a="#"+this.Cu(1),this.widget().find(a)[0]):"oj-slider-bar"===a?(a="#"+this.DF(),this.widget().find(a)[0]):"oj-slider-bar-value"===a?(a="#"+this.Xy(),this.widget().find(a)[0]):null},getSubIdByNode:function(a){if(null!=a){if(a.id===this.Cu(0)&&f(a).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-0"};
if(a.id===this.Cu(1)&&f(a).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-1"};if(a.id===this.DF()&&f(a).hasClass("oj-slider-bar"))return{subId:"oj-slider-bar"};if(a.id===this.Xy()&&f(a).hasClass("oj-slider-bar-value"))return{subId:"oj-slider-bar-value"}}return null},_GetDefaultStyleClass:function(){return"oj-slider"},Yk:function(a,b){var c;c=null!==b?+b:b;if(isNaN(c))throw Error(this.D("optionNum",{option:a}));return c},fv:function(a){if(null===a)return 1;a=this.Yk("step",a);if(0>=a)throw Error(this.D("invalidStep"));
if(null===a||0>=a)a=1;return a},V7:function(){return this.yb.offset().left+this.yb.width()},O8:function(){return this.yb.offset().left},eR:function(a){var b=this.dR(),c=b[0],e=b[1],f=b[2],b=b[3];this.dl.outerHeight();switch(a){case 0:a=this.Du(1);this.wc()?(b=this.yb.offset().top+this.yb.height(),e=this.yb.offset().top+(1-a)*this.yb.height()):this.Ke()?(f=this.V7(),c=f-a*this.yb.width()):f=c+a*this.yb.width();break;case 1:a=this.Du(0),this.wc()?(e=this.yb.offset().top,b=e+(1-a)*this.yb.height()):
this.Ke()?(c=this.O8(),f=c+(1-a)*this.yb.width()):c=this.yb.offset().left+a*this.yb.width()}return[c,e,f,b]},dR:function(){var a=this.yb.offset().left,b;b=this.yb.offset().top;var c=a+this.yb.width(),e=b+this.yb.height();return[a,b,c,e]},XO:function(a,b){var c=this.tR(),e=this;a.draggable({axis:this.wc()?"y":"x",containment:b,grid:c,disabled:!1,start:function(a){e.aH(a,!0)},drag:function(a){e.Wz(a)},stop:function(a){e.bv(a);e.lA()}})},lA:function(){var a;this.Le&&this.gh.toArray().forEach(function(b,
c){var e=f(b);a=this.eR(c);e.draggable("option","containment",a)},this)},Po:function(){if(!this.options.disabled){var a;this.Le?this.gh.toArray().forEach(function(b,c){var e=f(b);a=this.eR(c);this.XO(e,a)},this):(a=this.dR(),this.XO(this.dl,a))}},x6:function(){this.Le?this.gh.toArray().forEach(function(a){a=f(a);a.is(".ui-draggable")&&a.draggable("disable")},this):this.dl.is(".ui-draggable")&&this.dl.draggable("disable")}})})()});