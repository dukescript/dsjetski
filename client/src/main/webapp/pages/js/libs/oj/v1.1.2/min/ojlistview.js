/**
 * Copyright (c) 2014, 2015, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(a,f){a.Xd=function(a,b,c){this.Bb=b;this.A=a;this.Gw=!1;this.t_(c)};a.b.ga(a.Xd,a.b,"oj.DataSourceContentHandler");a.Xd.prototype.HandleResize=function(){};a.Xd.prototype.Ae=function(){f(this.Bb).empty();this.Bb=this.A=null};a.Xd.prototype.ax=function(){return!this.Gw};a.Xd.prototype.bL=function(){this.ok()?this.Bb.setAttribute("role","tree"):this.Bb.setAttribute("role","listbox")};a.Xd.prototype.eM=function(){this.op(!1);this.bL()};a.Xd.prototype.vd=
function(a){return a.key};a.Xd.prototype.ig=function(a){var b,c,e;b=f(this.Bb).find("."+this.A.Uf());for(c=0;c<b.length;c++)if(e=b[c],a==this.vd(e))return e;return null};a.Xd.prototype.getDataSource=function(){return this.sh};a.Xd.prototype.t_=function(a){this.sh=a};a.Xd.prototype.op=function(){};a.Xd.prototype.jJ=function(a,b,c,e,g){var h;h=document.createElement("li");f(h).uniqueId();a.appendChild(h);void 0==g&&(g=this.Yr.bind(this));b=this.xJ(b,c,e,h);e=this.A.h8();null!=e?(c=e.call(this,b),null!=
c&&(null===c.parentNode||c.parentNode instanceof DocumentFragment?h.appendChild(c):null==c.parentNode&&c.toString&&(e=document.createElement("span"),e.appendChild(document.createTextNode(c.toString())),h.appendChild(e)))):(e=document.createElement("span"),e.appendChild(document.createTextNode(null==c?"":c.toString())),h.appendChild(e));h=a.lastElementChild;b.parentElement=h;g(h,b)};a.Xd.prototype.Yr=function(a,b){a.key=b.key;a=f(a);a.uniqueId();this.ok()?a.attr("role","treeitem"):a.attr("role","option");
this.mK(b)||a.addClass("oj-skipfocus");this.A.Vk()&&this.pK(b)&&a.attr("aria-selected","false");a.addClass(this.A.Uf())};a.Xd.prototype.xJ=function(a,b,c,e){var g,f;g={};g.parentElement=e;g.index=a;g.data=b;g.component=this.A.Gg();g.datasource=this.getDataSource();for(f in c)c.hasOwnProperty(f)&&(g[f]=c[f]);return g};a.Xd.prototype.mK=function(a){return this.A.qu("focusable",a,!0)};a.Xd.prototype.pK=function(a){return this.A.qu("selectable",a,!0)};a.Sb=function(d,b,c){a.Sb.q.constructor.call(this,
d,b,c)};a.b.ga(a.Sb,a.Xd,"oj.TableDataSourceContentHandler");a.Sb.prototype.ok=function(){return!1};a.Sb.prototype.Ae=function(){a.Sb.q.Ae.call(this);this.cV();null!=this.Fw&&(this.Fw.destroy(),this.zK=this.Fw=null)};a.Sb.prototype.HandleResize=function(a,b){this.Ij()&&void 0!=this.GZ&&this.GZ!=b&&(this.GZ=b,this.checkViewport())};a.Sb.prototype.Ij=function(){return"loadMoreOnScroll"==this.A.options.scrollPolicy?!0:!1};a.Sb.prototype.Cj=function(){return Math.max(0,this.A.options.scrollPolicyOptions.fetchSize)};
a.Sb.prototype.VF=function(){return this.A.options.scrollPolicyOptions.maxCount};a.Sb.prototype.t_=function(d){var b;this.cV();this.FK=!1;if(null!=d){d instanceof a.qa||(this.FK=!0,this.Ij()&&(b=this,this.zK=function(a){null!=a&&(a.maxCountLimit?b.KG():b.EG(a))},this.Fw=new a.hg(this.A.YJ(),d,{fetchSize:this.Cj(),maxCount:this.VF(),success:this.zK})));this.FZ=this.pga.bind(this);this.EZ=this.oga.bind(this);this.BZ=this.lga.bind(this);this.CZ=this.mga.bind(this);this.DZ=this.nga.bind(this);if(d instanceof
a.qa)d.on("sync",this.FZ);d.on("sort",this.EZ);d.on("add",this.BZ);d.on("remove",this.CZ);d.on("reset",this.DZ)}this.sh=d};a.Sb.prototype.Yr=function(d,b){var c;a.Sb.q.Yr.call(this,d,b);f(d).addClass(this.A.rl());this.Ij()&&(c=Math.min(this.sh.totalSize(),this.VF()),-1===c&&(c=this.VF()),0<c&&f(d).attr("aria-setsize",c).attr("aria-posinset",b.index+1));this.A.Cw(d,b)};a.Sb.prototype.Vea=function(a,b){var c,e,g;this.Yr(a,b);c=f(a);e=c.outerHeight();c.css("opacity","0");c.css("maxHeight","0");g=this.A.rl();
c.children().wrapAll("\x3cdiv\x3e\x3c/div\x3e");c.removeClass(g).addClass("oj-listview-item-add-remove-transition");c.children().first().addClass(g);null==this.wK&&(this.wK=this.X8.bind(this));c.on("transitionend",this.wK);requestAnimationFrame(function(){c.css("opacity","1");c.css("maxHeight",e+"px")})};a.Sb.prototype.KG=function(){a.u.error("max count reached")};a.Sb.prototype.cV=function(){null!=this.sh&&(this.sh.off("sync",this.FZ),this.sh.off("sort",this.EZ),this.sh.off("add",this.BZ),this.sh.off("remove",
this.CZ),this.sh.off("reset",this.DZ))};a.Sb.prototype.op=function(a){var b;if(this.ax()&&(this.Gw=!0,this.FK||a)){a={fetchType:"init",startIndex:0};this.Ij()&&(a.pageSize=this.Cj());b=this;a=this.sh.fetch(a);a.then(function(a){b.FK&&b.EG(a)},function(a){b.Rk(a)});return}this.A.El()};a.Sb.prototype.Rk=function(d){a.u.error(d);this.A.El()};a.Sb.prototype.zm=function(a,b){var c,e,g;c=this.Bb.childElementCount;for(e=0;e<a.length;e++)g=a[e],this.jJ(this.Bb,c,g,this.getMetadata(c,b[e],g)),c+=1};a.Sb.prototype.lga=
function(a){var b,c,e;if(null!=this.Bb&&(b=a.data,a=a.keys,null!=b&&null!=a&&0<a.length&&0<b.length&&a.length==b.length)){c=this.Bb.childElementCount;for(e=0;e<b.length;e++)this.jJ(this.Bb,c,b[e],this.getMetadata(c,a[e],b[e]),this.Vea.bind(this)),c++;this.ZX()}};a.Sb.prototype.X8=function(a){f(a.target).removeClass("oj-listview-item-add-remove-transition").addClass(this.A.rl()).off("transitionend",this.wK).children().children().unwrap()};a.Sb.prototype.mga=function(a){var b,c;a=a.keys;if(null!=this.Bb&&
null!=a&&0!=a.length)for(b=0;b<a.length;b++)c=this.ig(a[b]),null!=c&&this.iV(c)};a.Sb.prototype.iV=function(a){var b;null==this.IK&&(this.IK=this.Z9.bind(this));b=this.A.rl();a=f(a);a.children().wrapAll("\x3cdiv class\x3d'"+b+"'\x3e\x3c/div\x3e");a.removeClass(b).css("maxHeight",a.outerHeight()+"px").addClass("oj-listview-item-add-remove-transition").on("transitionend",this.IK);setTimeout(function(){a.css("opacity","0");a.css("maxHeight","0px")},10)};a.Sb.prototype.Z9=function(a){var b;a=f(a.target);
b=a.parent();a.off("transitionend",this.IK);a.remove();0==b.get(0).childElementCount&&this.A.El()};a.Sb.prototype.nga=function(){var a=this;f(this.Bb).children("."+this.A.rl()).each(function(b,c){a.iV(c)})};a.Sb.prototype.EG=function(a){var b;null!=this.Bb&&(b=a.data,a=a.keys,Array.isArray(b)&&Array.isArray(a)&&b.length==a.length&&(this.zm(b,a),this.ZX()))};a.Sb.prototype.pga=function(a){null!=this.Bb&&(f(this.Bb).empty(),this.A.pC(),this.EG(a))};a.Sb.prototype.oga=function(){null!=this.Bb&&(f(this.Bb).empty(),
this.A.pC(),this.A.Ji()&&this.A.mo(!0),this.op(!0))};a.Sb.prototype.ZX=function(){this.Gw=!1;this.A.El();this.checkViewport()};a.Sb.prototype.checkViewport=function(){var a;null!=this.Fw&&0<this.sh.totalSize()&&this.ax()&&(a=this.Fw.checkViewport(),null!=a&&a.then(this.zK,null))};a.Sb.prototype.getMetadata=function(a,b,c){c=c.context;null==c&&(c={});null==c.index&&(c.index=a);null==c.key&&(c.key=b);return c};a.Ih=function(d,b,c){a.Ih.q.constructor.call(this,d,b,c)};a.b.ga(a.Ih,a.Xd,"oj.TreeDataSourceContentHandler");
a.Ih.prototype.ok=function(){return!0};a.Ih.prototype.op=function(){this.Rd(0,null,this.Bb,null)};a.Ih.prototype.Rd=function(a,b,c,e){this.Gw=!0;a={start:a,count:this.sh.nf(b)};this.sh.Rd(b,a,{success:function(a){this.zm(a,b,c,e)}.bind(this),error:function(a){this.Rk(a)}.bind(this)})};a.Ih.prototype.zm=function(a,b,c,e){var g,f,k,l;b=a.ua();g=a.R();for(f=0;f<g;f++)k=a.getData(b+f),l=a.getMetadata(b+f),this.jJ(c,b+f,k,l);this.Gw=!1;null!=e&&e.call(null,c);this.A.El()};a.Ih.prototype.Yr=function(d,
b){var c,e,g,h,k,l;a.Ih.q.Yr.call(this,d,b);c=this.A.Xh();e=this.A.rl();g=this.A.Tf();h=this.A.pp();k=this.A.Yi();d=f(d);!1==b.leaf?(d.children().wrapAll("\x3cdiv\x3e\x3c/div\x3e"),d.attr("aria-expanded","false"),l=d.children().first(),l.uniqueId().addClass(e).addClass(g),this.A.xs()&&(d.addClass("oj-collapsed"),e=document.createElement("a"),f(e).attr("href","#").attr("aria-labelledby",l.get(0).id).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(k),l.prepend(e)),k=document.createElement("ul"),
f(k).addClass(c).addClass(h).attr("role","group"),d.append(k)):!0==b.leaf&&d.addClass(e);this.A.Cw(d[0],b)};a.Ih.prototype.Rk=function(d){a.u.error(d);this.A.El()};a.Ih.prototype.Op=function(a,b){var c,e;c=this.vd(a[0]);e=a.children("ul")[0];this.Rd(0,c,e,b)};a.Ih.prototype.Mp=function(a){a.empty()};a.wd=function(a,b){this.A=a;this.Bb=b};a.wd.prototype.Ae=function(){this.m_(this.Bb,0);this.Nha()};a.wd.prototype.ax=function(){return!0};a.wd.prototype.HandleResize=function(){};a.wd.prototype.eM=function(){this.PZ(this.Bb,
0);this.bL();this.A.El()};a.wd.prototype.Op=function(a,b){var c;c="."+this.A.Xh();c=f(a).children(c)[0];f(c).css("display","block");b.call(null,c)};a.wd.prototype.Mp=function(){};a.wd.prototype.ok=function(){null==this.DK&&(this.DK=0<f(this.Bb).children("li").children("ul").length);return this.DK};a.wd.prototype.m_=function(a,b){var c,e,g,h,k,l,m,n,q;c=this.A.Xh();e=this.A.pp();g=this.A.ms();h=this.A.rl();k=this.A.Uf();l=a.children;for(m=0;m<l.length;m++)n=l[m],this.Mha(n),n=f(n),n.removeClass(k).removeClass(h).removeClass(this.A.NJ(b)).removeClass("oj-skipfocus").removeClass("oj-focus").removeClass("oj-hover").removeClass("oj-expanded").removeClass("oj-collapsed").removeClass("oj-selected"),
q=n.children("ul"),0<q.length&&(n.children("."+h).children().unwrap(),n.children(".oj-component-icon").remove(),n=f(q[0]),n.removeClass(c).removeClass(g).removeClass(e).removeAttr("role"),this.m_(n[0],b+1))};a.wd.prototype.PZ=function(a,b){var c,e,g,h,k,l,m,n,q,p,r,s,t,v;c=this.A.rl();e=this.A.Uf();g=this.A.Xh();h=this.A.Tf();k=this.A.pp();l=this.A.Yi();m=a.children;n=this.A.xs();for(q=0;q<m.length;q++)p=f(m[q]),r=this.xJ(p),this.oha(p,r),p.uniqueId().addClass(e),0<b&&p.addClass(this.A.NJ(b)),this.mK(r)||
p.addClass("oj-skipfocus"),s=p.children("ul"),0<s.length?(this.DK=!0,p.children(":not(ul)").wrapAll("\x3cdiv\x3e\x3c/div\x3e"),t=p.children().first(),t.addClass(c).addClass(h),this.qga(s[0])&&(p.attr("aria-expanded","false"),n&&(p.addClass("oj-collapsed"),t.uniqueId(),v=document.createElement("a"),f(v).attr("href","#").attr("role","button").attr("aria-labelledby",t.get(0).id).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(l),t.prepend(v))),s=f(s[0]),s.addClass(g).addClass(k).attr("role",
"group").css("display","none"),this.PZ(s[0],b+1)):p.addClass(c),this.A.Cw(p[0],r)};a.wd.prototype.bL=function(){this.ok()?this.Bb.setAttribute("role","tree"):this.Bb.setAttribute("role","listbox")};a.wd.prototype.Nha=function(){this.Bb.removeAttribute("role")};a.wd.prototype.qga=function(a){return 0<f(a).children("li").length};a.wd.prototype.xJ=function(a){var b;b={};b.key=a.attr("id");b.parentElement=a.children().first()[0];b.index=a.index();b.data=a[0];b.component=this.A.Gg();this.ok()&&(b.leaf=
0==a.children("ul").length,a=a.parents("li."+this.A.Uf()),b.depth=a.length,b.parentKey=0==a.length?null:a.first().attr("id"));return b};a.wd.prototype.oha=function(a,b){a.attr("role",this.ok()?"treeitem":"option");this.A.Vk()&&this.pK(b)&&a.attr("aria-selected",!1)};a.wd.prototype.Mha=function(a){a.removeAttribute("role");a.removeAttribute("aria-selected");a.removeAttribute("aria-expanded")};a.wd.prototype.vd=function(a){return f(a).attr("id")};a.wd.prototype.ig=function(a){return document.getElementById(a)};
a.wd.prototype.mK=function(a){return this.A.qu("focusable",a,!0)};a.wd.prototype.pK=function(a){return this.A.qu("selectable",a,!0)};a.xH=function(d,b){function c(){}a.b.ga(c,d,"");c.prototype=f.extend(c.prototype,b);return c}(Object,{Ss:37,ex:39,qC:40,PC:38,a1:9,t0:13,u0:27,v0:113,Z0:32,pi:0,oi:1,fM:2,ul:function(d){var b=this;this.la=d.la;this.element=d.element;this.options=d;this.element.uniqueId().addClass(this.xC()+" oj-component-initnode").attr("tabIndex",0);this.la._on(this.element,{click:function(a){b.CC(a);
b.HZ=!1},mousedown:function(){b.HZ=!0},mouseout:function(a){b.S9(a)},mouseover:function(a){b.T9(a)},keydown:function(a){b.PL(a)},focus:function(a){b.BC(a)},blur:function(a){b.AC(a)}});a.Qa.fw().browser===a.Qa.Ll.EL&&this.la._on(this.ah(),{focus:function(){this.element.focus()}})},Xr:function(){var a;this.G4();this.$S();a=this.ah();this.Qm(a[0])},refresh:function(){this.rV();this.Ys();this.$S()},destroy:function(){this.element.removeClass(this.xC()+" oj-component-initnode");this.Pv(this.ah());this.rV();
a.C.unwrap(this.element,this.ah())},rV:function(){this.RC();this.Z4(this.element);null!=this.qe&&(this.qe.Ae(),this.qe=null);this.pb=null;this.pC()},UZ:function(){this.ah().removeClass("oj-focus-ancestor");null!=this.pb&&f(this.pb.elem).removeClass("oj-focus");null!=this.EK&&this.Ur(this.EK,"oj-hover")},eja:function(){},getNodeBySubId:function(a){return null==a?this.element?this.element[0]:null:"oj-listview-icon"===a.subId&&(a=a.key,a=this.ig(a),null!=a&&a.firstElementChild&&(a=a.firstElementChild.firstElementChild,
null!=a&&(f(a).hasClass(this.ol())||f(a).hasClass(this.Yi()))))?a:null},getSubIdByNode:function(a){if(null!=a&&f(a).hasClass(this.ol())||f(a).hasClass(this.Yi()))if(a=this.Mn(a),null!=a&&0<a.length&&(a=this.vd(a[0]),null!=a))return{subId:"oj-listview-icon",key:a};return null},Pv:function(d){d&&this.eh&&a.C.gj(d,this.eh)},Qm:function(d){d&&(null==this.eh&&(this.eh=this.Nf.bind(this)),a.C.jh(d,this.eh))},Nf:function(a,b){0<a&&0<b&&null!=this.qe&&this.qe.HandleResize(a,b)},hM:function(a){return null!=
a.data||null!=a.drillMode||null!=a.item||null!=a.scrollPolicy||null!=a.scrollPolicyOptions},Is:function(a){var b,c,e;if(this.hM(a))return null!=a.data&&(null==a.currentItem&&this.Hh("currentItem",null),null==a.selection&&this.mo(!0)),!0;if(null!=a.currentItem)a=this.ig(a.currentItem),null!=a&&(a=f(a),this.rk(a)||this.fo(a,null));else if(null!=a.expanded)this.qe.ok()&&(a=a.expanded,Array.isArray(a)&&(this.k5(),b=this,f.each(a,function(a,c){b.FJ(c,!1,!1)})));else if(null!=a.selection){if(this.Vk())for(a.selection=
this.h7(a.selection),c=a.selection,this.mo(!1),e=0;e<c.length;e++)a=this.ig(c[e]),null!=a&&this.Ht(a,c[e])}else null!=a.selectionMode&&(this.mo(!0),this.Ys());return!1},Ul:function(a,b,c){return this.la._trigger(a,b,c)},Hh:function(a,b,c){this.la.option(a,b,c)},jg:function(a){return this.la.option(a)},$S:function(){var d;d=this.jg("data");if(null!=d)if(d instanceof a.O)this.qe=new a.Sb(this,this.element[0],d);else if(d instanceof a.Uc)this.qe=new a.Ih(this,this.element[0],d);else throw"Invalid data";
else this.qe=new a.wd(this,this.element[0]);this.Rda();this.qe.eM()},Xp:function(a){this.element.attr("aria-activedescendant",a.attr("id"))},Ys:function(){this.element.attr("aria-activedescendant","");this.Ji()?this.element.attr("aria-multiselectable",!0):this.Vk()&&this.element.attr("aria-multiselectable",!1)},RC:function(){this.element.removeAttr("aria-activedescendant").removeAttr("aria-multiselectable")},G4:function(){var a,b;a=this.ah();this.Ys();b=this.J4();a.append(b);this.IZ=b},J4:function(){var a=
f(document.createElement("div"));a.addClass("oj-listview-status").attr({id:this.QE("status"),role:"status"});return a},Rda:function(){var a=this.la.D("msgFetchingData");this.IZ.text(a).show()},s$:function(){this.IZ.hide()},YJ:function(){return this.ah()},ah:function(){null==this.AZ&&(this.AZ=this.J5());return this.AZ},J5:function(){var a=f(document.createElement("div"));a.addClass(this.JL()).addClass("oj-component");this.element.parent()[0].replaceChild(a[0],this.element[0]);a.prepend(this.element);
return a},U7:function(){return this.la.D("msgNoData")},C4:function(){var a,b;a=this.U7();b=document.createElement("li");b.id=this.QE("empty");b.className="oj-listview-empty-text";b.textContent=a;return b},Ee:function(a){a=a.attr("aria-expanded");return"true"==a?this.pi:"false"==a?this.oi:this.fM},Sn:function(a,b){var c=this.xs();b==this.pi?(a.attr("aria-expanded","true"),c&&a.removeClass("oj-collapsed").addClass("oj-expanded")):b==this.oi&&(a.attr("aria-expanded","false"),c&&a.removeClass("oj-expanded").addClass("oj-collapsed"))},
qu:function(a,b,c){a=this.options.item[a];return"function"==typeof a&&c?a.call(this,b):a},h8:function(){var a=this.qu("renderer",null,!1);return"function"!=typeof a?null:a},Cw:function(a,b){var c,e,g;this.lQ(a);if(this.Vk())if(c=this.jg("selection"),this.Dh(a))for(e=0;e<c.length;e++){if(c[e]==b.key&&(this.Ht(a,c[e]),!this.Ji())){1<c.length&&this.Hh("selection",[b.key],{_context:{originalEvent:null,mb:!0},changed:!0});break}}else e=c.indexOf(b.key),-1<e&&(c=c.slice(0),c.splice(e,1),this.Hh("selection",
c,{_context:{originalEvent:null,mb:!0},changed:!0}));this.qe.ok()&&this.Ee(f(a))==this.oi&&(c=this.jg("expanded"),this.nr()?this.Ln(f(a),null,!1,null,!1,!1,!1):Array.isArray(c)&&(g=this,f.each(c,function(c,e){e==b.key&&g.Ln(f(a),null,!1,null,!1,!1,!1)})));null!=this.pb&&b.key==this.pb.key&&null!=this.pb.elem&&a!=this.pb.elem.get(0)&&(this.pb.elem=f(a))},El:function(){var a;this.s$();f(document.getElementById(this.QE("empty"))).remove();0==this.element[0].childElementCount?(a=this.C4(),this.element.append(a)):
(this.zs=null,a=this.jg("currentItem"),null==this.pb&&null!=a&&(a=this.ig(a),null==a||this.rk(f(a))||this.fo(f(a),null)),this.ah().hasClass("oj-focus-ancestor")&&null==this.pb&&this.eT());this.Ul("ready",null,{})},pC:function(){this.As=this.zs=null},TZ:function(a,b,c){if(this.$w(f(b.target)))return!1;a=f(b.target).closest("."+this.Uf());0<a.length&&!this.rk(f(a[0]))&&this.fo(f(a[0]),null);a={launcher:this.element,initialFocus:"menu"};"keyboard"===c&&(a.position={my:"start top",at:"start bottom",of:this.pb.elem});
this.la.Ye(b,c,a)},SL:function(a){return null!=a.prop("nodeName").match(/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/)},$w:function(a){for(;null!=a&&a[0]!=this.element[0]&&"LI"!=a.prop("nodeName");){if(3!=a[0].nodeType){var b=a.attr("tabIndex"),c=a.attr("data-oj-tabindex");if(null!=b&&0<=b||this.SL(a)&&(-1!=b||-1!=c))return!0}a=a.parent()}return!1},lQ:function(a){var b;f(a).find("a, input, select, textarea, button, object, .oj-component-initnode").each(function(){f(this).removeAttr("data-first").removeAttr("data-last");
b=parseInt(f(this).attr("tabIndex"),10);(isNaN(b)||0<=b)&&f(this).attr("tabIndex",-1).attr("data-tabmod",isNaN(b)?-1:b)})},P6:function(a){var b;a=f(a).find("[data-tabmod]").each(function(){b=parseInt(f(this).attr("data-tabmod"),10);f(this).removeAttr("data-tabmod");-1==b?f(this).removeAttr("tabIndex"):f(this).attr("tabIndex",b)});a.first().attr("data-first","true");a.last().attr("data-last","true")},Z4:function(a){f(a).find("[data-tabmod]").removeAttr("tabIndex").removeAttr("data-tabmod").removeAttr("data-first").removeAttr("data-last")},
rk:function(a){return a.hasClass("oj-skipfocus")},BC:function(a){this.ah().addClass("oj-focus-ancestor");null==this.pb?this.pr()||this.HZ||this.eT(a):f(this.pb.elem).addClass("oj-focus")},eT:function(a){var b,c,e;b=this.su();for(c=0;c<b.length;c++)if(e=f(b[c]),!this.rk(e)){this.fo(e,a);break}},AC:function(){this.ah().removeClass("oj-focus-ancestor");null!=this.pb&&f(this.pb.elem).removeClass("oj-focus")},S9:function(a){a=this.Mn(a.target);null!=a&&(this.EK=null,this.Ur(a,"oj-hover"))},T9:function(a){a=
this.Mn(a.target);null==a||this.rk(a)||(this.EK=a,this.VG(a,"oj-hover"))},PL:function(a){var b,c;if(this.xs()&&(b=a.keyCode,b===this.Ss||b===this.ex))if(c=this.pb.elem,b===this.Ss){if(this.Ee(c)==this.pi){this.Ml(c,a,!0,this.pb.key,!0,!0);return}}else if(this.Ee(c)==this.oi){this.Ln(c,a,!0,this.pb.key,!0,!0,!0);return}!0===this.QL(a)&&a.preventDefault()},CC:function(a){var b,c,e,g;0===a.button&&(b=this.Yi(),c=this.ol(),e=this.Tf(),g=f(a.target),g.hasClass(c)?(this.yj(a),a.preventDefault()):g.hasClass(b)?
(this.ce(a),a.preventDefault()):(b=this.Mn(g),null==b||0==b.length||this.rk(b)||(this.Vk()&&this.Dh(b[0])?this.pr()?this.j$(b,a):this.E0(b,a):this.c9(b,a),this.xs()&&g.closest("."+e)&&(this.Ee(b)==this.oi?this.ce(a):this.Ee(b)==this.pi&&this.yj(a)))))},pr:function(){return a.C.sf()},TE:function(d){return a.C.ys(d)},QE:function(a){return[this.element.attr("id"),a].join(":")},Mn:function(a){return f(a).closest("."+this.Uf())},m8:function(){null==this.zZ&&(this.zZ=parseInt(this.ah().css("border-top-width"),
10)+parseInt(this.ah().css("border-bottom-width"),10));return this.zZ},HV:function(a){var b,c,e,g;b=a.offsetTop;c=a.offsetHeight;a=this.ah()[0];e=a.scrollTop;g=a.offsetHeight;b>=e&&b+c<=e+g||(b=Math.max(0,Math.min(b,Math.abs(b+c-g))),b>e&&(b+=this.m8()),a.scrollTop=b)},vd:function(a){return this.qe.vd(a)},ig:function(a){var b;return null!=this.As&&(b=this.As[a],null!=b)?document.getElementById(b):this.qe.ig(a)},Pp:function(a){return a==this.PC||a==this.qC},su:function(){var a,b,c;null==this.zs&&(a=
this.pp(),b="."+this.Uf()+":visible",this.zs=this.element.find(b).filter(function(){return(c=f(this).parent().hasClass(a))?"false"!=f(this).parent().parent().attr("aria-expanded"):!0}));return this.zs},Pn:function(a,b,c){var e,g,h;if(!this.qe.ax())return!0;e=!b||this.KB?this.pb.elem:this.rn;g=!1;h=this.su();e=h.index(e);switch(a){case this.PC:e--;if(0<=e){for(a=f(h[e]);this.rk(a);){e--;if(0>e)return!1;a=f(h[e])}b?(this.oF(a,c),this.KB=!1):(this.fo(a,c),this.KB=!0)}g=!0;break;case this.qC:e++;if(e<
h.length){for(a=f(h[e]);this.rk(a);){e++;if(e==h.length)return!1;a=f(h[e])}b?(this.oF(a,c),this.KB=!1):(this.fo(a,c),this.KB=!0)}g=!0}return g},baa:function(){return"actionable"==this.Oga},LV:function(a){this.Oga=a?"actionable":"navigation";a||this.element[0].focus()},MV:function(a,b){var c,e;if(null!=a){if(c=a[0],c=this.vd(c),null==this.pb||c!=this.pb.key)e={key:c,item:a},null!=this.pb&&(e.previousKey=this.pb.key,e.previousItem=this.pb.elem),e=!this.Ul("beforeCurrentItem",b,e),e||(this.pb=e={key:c,
elem:a},this.Xp(a),this.Hh("currentItem",c))}else this.pb=null},Qn:function(){null!=this.pb&&this.VG(this.pb.elem,"oj-focus")},QC:function(){null!=this.pb&&this.Ur(this.pb.elem,"oj-focus")},c9:function(a,b){this.fo(a,b)},fo:function(a,b){this.HV(a[0]);this.QC();this.MV(a,b);this.Qn()},Vk:function(){return"none"!=this.jg("selectionMode")},Ji:function(){return"multiple"==this.jg("selectionMode")},Dh:function(a){return a.hasAttribute("aria-selected")},h7:function(a){var b,c,e;b=[];for(c=0;c<a.length&&
(e=this.ig(a[c]),null==e||!this.Dh(e)||(b.push(a[c]),this.Ji()));c++);return b},uea:function(){var a,b;null!=this.As&&(a=this,f.each(this.jg("selection"),function(c,e){b=a.ig(e);null!=b&&a.Ur(b,"oj-selected")}))},VG:function(a,b){this.EC(a,b,!0)},Ur:function(a,b){this.EC(a,b,!1)},EC:function(a,b,c){var e;a=f(a);"oj-selected"==b&&a.attr("aria-selected",c?"true":"false");e=a.children("."+this.Tf());0<e.length&&(a=f(e[0]));c?a.addClass(b):a.removeClass(b)},E0:function(a,b){var c,e;this.HV(a[0]);c=this.TE(b);
e=b.shiftKey;this.Ji()?c||e?!c&&e?this.oF(a,b):this.XD(a,b):this.Xs(a,b):this.Xs(a,b)},j$:function(a,b){this.Ji()?this.XD(a,b):this.Xs(a,b)},mo:function(a){this.uea();a&&this.Hh("selection",[],{_context:{originalEvent:null,mb:!0},changed:!0});this.rn=null},Xs:function(a,b){this.mo(!1);this.XD(a,b,[])},oF:function(a,b){var c;null!=this.pb&&(c=this.rn,c!=a&&this.DQ(this.pb.elem,a,b))},DQ:function(a,b,c){this.mo(!1);this.rn=b;this.v$(a,b,c);this.Qn()},v$:function(a,b,c){var e,g,f,k;e=[];g=this.su();
a=g.index(a);f=g.index(b);a>f?b=f:(b=a,a=f);for(;b<=a;b++)f=g[b],this.Dh(f)&&(k=this.qe.vd(f),this.Ht(f,k),e.push(k));this.Hh("selection",e,{_context:{originalEvent:c,mb:!0},changed:!0})},Ht:function(a,b){null==this.As&&(this.As={});this.As[b]=f(a).attr("id");this.VG(a,"oj-selected")},XD:function(a,b,c){var e,g;e=this.vd(a[0]);void 0==c&&(c=this.jg("selection").slice(0));this.QC();g=c.indexOf(e);-1<g?(this.Ur(a,"oj-selected"),c.splice(g,1)):(this.rn=a,this.Ht(a,e),c.push(e));this.MV(a,b);this.Qn();
this.Hh("selection",c,{_context:{originalEvent:b,mb:!0},changed:!0})},ix:function(a,b,c){var e,g,f,k;e=this.jg("selection").slice(0);g=this.pb.elem;f=this.pb.key;k=e.indexOf(f);if(-1<k){if(c)return;this.Ur(g,"oj-selected");e.splice(k,1);0==e.length&&(this.rn=null)}else this.Dh(g[0])&&(b||(this.mo(!1),e.length=0),this.rn=g,this.Ht(g,f),e.push(f));this.Hh("selection",e,{_context:{originalEvent:a,mb:!0},changed:!0})},QL:function(a){var b,c,e,g=!1;if(null==this.pb)return!1;b=a.keyCode;c=this.pb.elem;
this.baa()?b==this.u0?(this.LV(!1),this.lQ(c),this.Qn(),g=!0):b===this.a1&&(b=c.find("[data-first]"),c=c.find("[data-last]"),a.shiftKey?0<b.length&&0<c.length&&b!=c&&a.target==b[0]&&(c[0].focus(),g=!0):0<b.length&&0<c.length&&b!=c&&a.target==c[0]&&(b[0].focus(),g=!0)):b==this.v0?(this.P6(c),b=c.find("[data-first]"),0<b.length&&(b[0].focus(),this.LV(!0))):b==this.Z0&&this.Vk()?(c=this.TE(a),(e=a.shiftKey)&&!c&&null!=this.rn&&this.Ji()?this.DQ(this.rn,this.pb.elem,a):this.ix(a,c&&!e&&this.Ji(),!1),
g=!0):b==this.t0&&this.Vk()?this.ix(a,!1,!0):this.Pp(b)&&(c=this.TE(a),e=a.shiftKey,c||(g=this.Pn(b,e&&this.Vk()&&this.Ji(),a)));return g},xs:function(){return"none"!=this.jg("drillMode")},nr:function(){var a=this.jg("expanded");if("auto"===a){if(!this.xs())return!0}else if("all"===a)return!0;return!1},FJ:function(a,b,c){var e=this.ig(a);null!=e&&this.Ln(f(e),null,!1,a,b,c,b)},ce:function(a){var b=this.Mn(a.target);null!=b&&0<b.length&&this.Ln(b,a,!0,null,!0,!0,!0)},Ln:function(a,b,c,e,g,f,k){var l;
if(this.Ee(a)==this.oi){null==e&&(e=this.vd(a[0]));l={item:a,key:e};if(k&&(e=!this.Ul("beforeExpand",b,l))&&g)return;this.qe.Op(a,function(a){this.Y6(a,c,b,l,f)}.bind(this));this.zs=null;null!=b&&b.stopPropagation()}},Y6:function(a,b,c,e,g){var h;this.kC(f(a),b);a=a.parentNode;a=f(a);this.Sn(a,this.pi);b=this.Yi();h=this.ol();a.children("."+this.Tf()).find("."+b).removeClass(b).addClass(h);g&&this.Ul("expand",c,e)},sO:function(a,b){var c;a.parentsUntil("ul.oj-component-initnode","ul."+this.Xh()).each(function(){c=
parseInt(f(this).css("maxHeight"),10);0<c&&f(this).css("maxHeight",c+b+"px")})},kC:function(a,b){var c=0;b?(a.children().each(function(){c+=f(this).outerHeight()}),this.pr()&&this.sO(a,c),null==this.AK&&(this.AK=this.x9.bind(this)),a.css("maxHeight","0px"),a.on("transitionend",this.AK),requestAnimationFrame(function(){a.css("maxHeight",c+"px")})):(this.pr()?(a.children().each(function(){c+=f(this).outerHeight()}),a.css("maxHeight",c+"px"),this.sO(a,c)):a.css("maxHeight",""),this.lC(a))},x9:function(a){a=
f(a.target);a.off("transitionend",this.AK);this.pr()||a.css("maxHeight","");this.lC(a)},lC:function(a){a.removeClass(this.pp()).addClass(this.ms())},FX:function(a,b,c){var e=this.ig(a);null!=e&&this.Ml(f(e),null,!1,a,b,c)},yj:function(a){var b=this.Mn(a.target);null!=b&&0<b.length&&this.Ml(b,a,!0,null,!0,!0)},Ml:function(a,b,c,e,g,f){var k;this.Ee(a)==this.pi&&(null==e&&(e=this.vd(a[0])),e={item:a,key:e},k=!this.Ul("beforeCollapse",b,e),k&&g||(this.iC(a,c),this.Sn(a,this.oi),c=this.Yi(),g=this.ol(),
a.find("."+g).first().removeClass(g).addClass(c),this.zs=null,null!=b&&b.stopPropagation(),f&&this.Ul("collapse",b,e)))},iC:function(a,b){var c=0,e;e=a.children("ul").first();b?(null==this.xK&&(this.xK=this.e9.bind(this)),e.children().each(function(){c+=f(this).outerHeight()}),e.css("transition-property","none"),e.css("maxHeight",c+"px"),e.css("transition-property",""),e.on("transitionend",this.xK),setTimeout(function(){e.css("maxHeight","0px")},100)):(e.css("maxHeight","0px"),this.jC(a))},e9:function(a){a=
f(a.target);a.off("transitionend",this.xK);this.jC(a)},jC:function(a){a.removeClass(this.ms()).addClass(this.pp());null!=this.qe&&this.qe.Mp(a)},k5:function(){var a;a=this;this.su().each(function(){a.Ml(f(this),null,!1,null,!1,!1)})},getExpanded:function(){var a,b,c;a=[];b=this;this.su().each(function(){c=f(this);b.Ee(c)==b.pi&&a.push(b.vd(c[0]))});return a},Gg:function(){return a.Components.Gg(this.element)},JL:function(){return this.pr()?"oj-listview oj-listview-container-touch":"oj-listview oj-listview-container"},
xC:function(){return"oj-listview-element"},rl:function(){return"oj-listview-item"},Uf:function(){return"oj-listview-item-element"},Tf:function(){return"oj-listview-group-item"},Xh:function(){return"oj-listview-group"},ms:function(){return"oj-listview-collapsible-transition"},pp:function(){return this.ms()},Yi:function(){return"oj-listview-collapse-icon"},ol:function(){return"oj-listview-expand-icon"},NJ:function(){return""}});o_("_ojListView",a.xH,a);a.Da("oj.ojListView",f.oj.baseComponent,{widgetEventPrefix:"oj",
options:{currentItem:null,data:null,drillMode:"collapsible",expanded:"auto",item:{focusable:!0,renderer:null,selectable:!0},scrollPolicy:"auto",scrollPolicyOptions:{fetchSize:25,maxCount:500},selection:[],selectionMode:"none",beforeCurrentItem:null,beforeExpand:null,beforeCollapse:null,collapse:null,expand:null,optionChange:null,ready:null},_ComponentCreate:function(){this._super();this.za()},za:function(){var d={};d.element=this.element;d.la=this;d=f.extend(this.options,d);this.Jg=new a.xH;this.Jg.ul(d)},
Ug:function(){this._super();this.Jg.Xr()},_destroy:function(){this.Jg.destroy();this._super()},Xe:function(a,b,c){this.Jg.TZ(a,b,c)},_setOptions:function(a,b){var c=this.Jg.Is(a,b);this._super(a,b);c&&this.Jg.refresh()},_setOption:function(a,b){var c=!0;"selectionMode"==a?c="none"==b||"single"==b||"multiple"==b:"drillMode"==a?c="collapsible"==b||"none"==b:"scrollPolicy"==a&&(c="auto"==b||"loadMoreOnScroll"==b);if(c)this._super(a,b);else throw"Invalid value: "+b+" for key: "+a;},yi:function(){this.Jg.UZ()},
vk:function(){},widget:function(){return this.Jg.YJ()},refresh:function(){this._super();this.Jg.refresh()},getNodeBySubId:function(a){return this.Jg.getNodeBySubId(a)},getSubIdByNode:function(a){return this.Jg.getSubIdByNode(a)},expand:function(a,b){this.Jg.FJ(a,b,!0)},collapse:function(a,b){this.Jg.FX(a,b,!0)},getExpanded:function(){return this.Jg.getExpanded()}})});