/**
 * Copyright (c) 2014, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(['./DvtToolkit', './DvtBaseTreeView'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.
    // Map the D namespace to dvt, which is used to provide access across partitions.
  var D = dvt;
  D.OV=function(a,b,c){this.Init(a,b,c)};(0,D.ca)("DvtTreemap",D.OV);D.z.q(D.OV,D.ER,"DvtTreemap");D.OV.newInstance=function(a,b,c){return new D.OV(a,b,c)};D.y=D.OV.prototype;D.y.Init=function(a,b,c){D.OV.u.Init.call(this,a,b,c);this.Of=new D.PV;this.setId("treemap1000"+window.Math.floor(1E9*window.Math.random()))};
D.y.aN=function(a){D.OV.u.aN.call(this,a);a=this.A();this.qf="sliceAndDiceHorizontal"==a.layout?new D.KV(D.k):"sliceAndDiceVertical"==a.layout?new D.KV(D.p):new D.LV;this.rd=[];var b=a.isolatedNode;if(b&&this.Ra){var c=(0,D.iS)(this.Ra);c.push(this.Ra);for(var d=0;d<c.length;d++)if(c[d].getId()==b){this.rd.push(c[d]);break}}"auto"==a.animationOnDisplay&&(a.animationOnDisplay="alphaFade")};
D.y.Wp=function(a){var b=window.Math.max(window.Math.ceil(7*window.Math.min(a.e,a.g)/400),2);a.x+=b;a.y+=b;a.e-=2*b;a.g-=2*b;b=this.qf.Aaa(this,1);a.x+=b;a.e-=2*b;(0,D.HR)(this,a);this.Hb=D.IR.U(this,a,this.kX);a.x-=b;a.e+=2*b;b=this.rd.length;if(0<b&&this.dX)this.qf.Qq(this,this.rd[b-1],a.x,a.y,a.e,a.g,D.k);else{this.Ra&&this.qf.Qq(this,this.Ra,a.x,a.y,a.e,a.g,D.p);for(var c=0;c<b;c++)this.qf.Qq(this,this.rd[c],a.x,a.y,a.e,a.g,D.k)}};
D.y.Kj=function(a){(0,D.KR)(this,a);this.Um&&a.k(this.Um);this.Hb&&(a.k(this.Hb),this.Hb=D.o);if((0,D.LR)(this)){this.u6=new D.D(this.j());a.k(this.u6);this.zCa?this.zCa.U(a):this.Ra.gf()?(this.Ra.ky(a),(0,D.NR)(this,this.Ra)):this.Ra.U(a);this.e7=new D.D(this.j());a.k(this.e7);this.Ex=new D.D(this.j());a.k(this.Ex);a.k(this.u6);this.kC=new D.hp(this.j(),[]);this.kC.sb(D.p);this.kC.ua(D.p);(0,D.Ti)(this.kC);a.k(this.kC);for(a=0;a<this.rd.length;a++){var b=this.rd[a].xa();this.e7.k(b)}}else(0,D.OR)(this,
a)};D.y.br=function(){this.I0||(this.ga.Ql(),this.Wp(new D.B(0,0,this.Za,this.ob)),this.Kj(this.ga),this.O2());D.OV.u.br.call(this)};D.y.O2=function(){for(var a=this.Ob?this.Ob.getSelection():[],b=0;b<a.length;b++)if(0<this.rd.length){var c=this.rd[this.rd.length-1];(a[b]==c||a[b].zA(c))&&a[b].rb(D.k)}else a[b].rb(D.k)};D.y.ow=function(a){return new D.QV(a)};D.y.mI=function(a,b,c,d){return new D.RV(a,b,c,d)};
D.y.vea=function(a){var b=(0,D.SV)(this);return b?(0,D.TV)(this,D.wV.Uqa(b)):a?(0,D.TV)(this,D.wV.Uqa(a)):D.o};D.y.HU=function(a){for(var b=0,c=this.Ex.Ka(),d=0;d<c;d++){var e=this.Ex.la(d);a.zIndex>e.zIndex&&(b=d+1)}b<c?this.Ex.Ua(a,b):this.Ex.k(a)};D.y.LE=function(a,b){return 0<this.rd.length?this.rd[this.rd.length-1].qD(a,b):this.Ra.qD(a,b)};D.SV=function(a){return a.rd&&0<a.rd.length?a.rd[a.rd.length-1]:D.o};
D.VV=function(a,b){if("none"!=a.A().animationOnDataChange){for(var c=a.Ob?a.Ob.getSelection():[],d=0;d<c.length;d++)c[d].rb(D.p);for(var c=[(0,D.UV)(b)],d=(0,D.iS)(b),e=0;e<d.length;e++)c.push((0,D.UV)(d[e]));a.Rp=new D.ho(a.j(),c);a.Rp.le(a.br,a);a.hb.zk(a);a.Rp.play()}else a.U(D.o,a.Za,a.ob,D.k)};D.TV=function(a,b){var c=a.hb.yg;return c?c.VL(b):b&&0<b.length?b[0]:D.o};D.OV.prototype.Yj=function(){return(0,D.Gk)(this.A(),"componentName","DvtUtilBundle","TREEMAP")};D.OV.prototype.GZ=(0,D.ba)("DvtTreemapBundle");
D.OV.prototype.Sp=function(a){return new D.WV(this,a)};
D.WV=function(a,b){this.Init(a,b);var c=this.K.A(),d=c.nodeDefaults,e=d.header,f=b.header?b.header:{};this.MBa=b.groupLabelDisplay?b.groupLabelDisplay:d.groupLabelDisplay;this.zr=b.labelDisplay?b.labelDisplay:d.labelDisplay;this.kK=b.labelHalign?b.labelHalign:d.labelHalign;this.k7=b.labelValign?b.labelValign:d.labelValign;this.hCa=f.labelHalign?f.labelHalign:e.labelHalign;this.Lka=f.labelStyle?new D.I(f.labelStyle):D.o;this.cV="on"==(f.useNodeColor?f.useNodeColor:e.useNodeColor);this.d7=f.isolate?
f.isolate:e.isolate;"auto"==this.d7&&(this.d7=(0,D.Mf)()?"off":"on");this.Cu=c.isolatedNode!=D.o&&c.isolatedNode==this.getId()};D.z.q(D.WV,D.cS,"DvtTreemapNode");D.y=D.WV.prototype;
D.y.U=function(a){if(this.Vu){this.I=this.j5();a.k(this.I);var b;this.gf()?(this.AV=new D.D(this.K.j()),this.I.k(this.AV),this.ky(this.AV)):b=(0,D.dS)(this);if(b){var c=this.A()._cf,d=this.K.Ec;d.pr=c;var c=this.Ha-8-2,e=this.Ja-4-2;0<c&&0<e&&((0,D.vg)(d,c),(0,D.wg)(d,e),d.He((0,D.eS)(this)),this.X4=b=D.ye.RH(d,b,this.I),(0,D.G)(a.j())?(a=b.G(),a=this.Eb+this.Ha-4-1-a.e):a=this.Eb+4+1,(0,D.Ik)(b,a,this.Yb+2+1))}else this.Pb=this.JO(this.I),this.Pb!=D.o&&(this.Kr&&"header"!=this.Qk)&&(a=this.Pb.Kb(),
this.Or=new D.F(this.K.j(),a.x,a.y,a.e,a.g),this.Or.va("#FFFFFF"),this.Or.ua(D.p),this.I.k(this.Or),a=this.Pb,"node"==this.Qk&&this.gf()?this.K.u6.k(a):this.I.k(a));this.gf()?this.I.ld("group"):this.I.ld("img");this.Rm()}};
D.y.rb=function(a){D.WV.u.rb.call(this,a);if(this.I){a=this.K.A().nodeDefaults;var b=a.header;if(this.Fa()){var c=this.Eb,d=this.Yb+1,e=this.Ha-1,f=this.Ja-1;(0,D.Fj)()&&(d-=1);(0,D.ZV)(this,this.Vh);(0,D.ZV)(this,this.Fx);this.Fx=this.Vh=D.o;this.Vh=new D.F(this.K.j(),c,d,e,f);this.Vh.ua(D.p);this.Vh.P(D.o);(0,D.Ti)(this.Vh);this.I.k(this.Vh);this.Fx=new D.F(this.K.j(),c+1,d+1,e-2,f-2);this.Fx.ua(D.p);this.Fx.P(D.o);(0,D.Ti)(this.Fx);this.I.k(this.Fx);"header"==this.Qk?(this.CN||this.Ic()?this.oq.va(b.hoverBackgroundColor):
(this.oq.va(b.selectedBackgroundColor),this.Pb&&(0,D.$V)(this,this.Pb,"_selectedLabelStyle")),this.Vh.Ya(b.selectedOuterColor),this.Fx.Ya(b.selectedInnerColor),(0,D.Mf)()&&(this.Ke=(0,D.aW)(this,this.I))):(this.Vh.Ya(a.selectedOuterColor),this.Fx.Ya(a.selectedInnerColor),!(0,D.nr)()&&!(0,D.Gj)()&&(0,D.Hp)(this.I,D.QR),this.K.HU(this.I))}else(0,D.ZV)(this,this.Fx),this.Fx=D.o,(0,D.Mf)()&&(0,D.bW)(this),"header"==this.Qk?(this.CN||this.Ic()?this.oq.va(b.hoverBackgroundColor):((0,D.cW)(this,this.I,this.oq),
this.Pb&&(this.Oq()?(0,D.$V)(this,this.Pb,"_drillableLabelStyle"):(0,D.$V)(this,this.Pb,"labelStyle"))),this.Vh&&(this.CN||this.Ic()?this.Vh.Ya(b.hoverOuterColor):((0,D.ZV)(this,this.Vh),this.Vh=D.o))):((0,D.fA)(this.I),this.Vh&&((0,D.ZV)(this,this.Vh),this.Vh=D.o),(a=this.sg)&&a.AV&&a.AV.k(this.I))}};
D.y.Sb=function(){if(this.I&&this.Vu){var a=this.K.A().nodeDefaults,b=a.header,c=(0,D.SV)(this.K);if(!(c!=D.o&&c!=this&&!this.zA(c))){var c=[],d,e,f,g;"header"==this.Qk?(this.oq.va(b.hoverBackgroundColor),this.Vh||(a=this.Eb,d=this.Yb+1,e=this.Ha-1,f=this.Ja-1,(0,D.Fj)()&&(d-=1),this.Vh=new D.F(this.K.j(),a,d,e,f),this.Vh.ua(D.p),this.Vh.P(D.o),(0,D.Ti)(this.Vh),this.I.k(this.Vh)),this.Vh.Ya(this.Fa()?b.selectedOuterColor:b.hoverOuterColor),d=this.Eb+1.5+1,f=this.Eb+this.Ha-1.5-1,e=this.Yb+this.jp,
g=this.Yb+this.Ja-1.5-1,c.push(f,e,f,g,d,g,d,e),a=new D.J(b.hoverInnerColor,0.8,3),this.Pb&&(this.Oq()?(0,D.$V)(this,this.Pb,"_drillableHoverLabelStyle"):(0,D.$V)(this,this.Pb,"_hoverLabelStyle"))):(d=this.Eb+1,f=this.Eb+this.Ha-1,e=this.Yb+1,g=this.Yb+this.Ja-1,c.push(this.Eb,e,f,e,f,g,d,g,d,e),a=new D.J(a.hoverColor,1,2));b=this.K;b.kC.Bc(c);b.kC.ba(a);b.kC.sb(D.k)}}};
D.y.Ib=function(){if(this.I&&this.Vu){var a=this.K.A().nodeDefaults.header;"header"==this.Qk&&(this.Fa()?(this.oq.va(a.selectedBackgroundColor),this.Vh.Ya(a.selectedOuterColor),this.Pb&&(this.Oq()?(0,D.$V)(this,this.Pb,"_drillableSelectedLabelStyle"):(0,D.$V)(this,this.Pb,"_selectedLabelStyle"))):((0,D.cW)(this,this.I,this.oq),this.Vh&&(this.I.removeChild(this.Vh),this.Vh=D.o),this.Pb&&(this.Oq()?(0,D.$V)(this,this.Pb,"_drillableLabelStyle"):(0,D.$V)(this,this.Pb,"labelStyle"))));this.K.kC.sb(D.p)}};
D.y.Fe=function(a,b){this.gf()?(this.Pb&&this.Pb.D(b),"header"==this.Qk&&(this.cV&&this.oq)&&this.oq.D(b)):D.WV.u.Fe.call(this,a,b)};D.y.Zx=function(){return"off"!=this.d7&&"header"==this.Qk};D.y.qH=function(a){return!a||!a.RL()?D.WV.u.qH.call(this,a):new D.B(this.Eb,this.Yb,this.Ha,this.Ja)};
D.y.Yd=function(a){var b;if(a.type==D.vn)return D.WV.u.Yd.call(this,a);b=a.keyCode;if(32==b&&a.ctrlKey)return this;if(38==b&&a.altKey||221==b)(b=this.sg)&&b.getId()!=this.K.Ra.getId()?(a=b,(0,D.kS)(b)):a=this;else if(40==b&&a.altKey||219==b)a=(a=this.iX)?a:this.gf()?(0,D.TV)(this.K,this.Gc()):this;else{var c=(0,D.SV)(this.K),d=0;if(c)if(this==c)d=0;else{b=this.sg;for(d=1;c!=b;)d++,b=b.sg}else{for(c=this;c.sg;)c=c.sg;d=(0,D.gS)(this)}b=(0,D.fS)(this,c,d);a=(0,D.xn)(this,a,b)}(0,D.kS)(a);return a};
D.y.Ye=function(){return new D.B(this.Eb,this.Yb,this.Ha,this.Ja)};D.y.Vj=function(){return this.I?this.I.Aa():D.o};
D.y.dT=function(a,b,c,d){if(!(0>=c||0>=d)){this.Vu=D.k;this.Yma=this.Hm();this.Eb=a;this.Yb=b;this.Ha=c?c:0;this.Ja=d?d:0;this.Qk=this.gf()?this.MBa:this.zr;this.YC||(this.Qk="off");if("header"==this.Qk){this.jp=15;a=new D.Nf(this.K.j(),this.YC);a.He((0,D.eS)(this));(0,D.$V)(this,a,"labelStyle");a=D.af.Ch(a).g;this.jp=window.Math.max(this.jp,a);this.Zx()&&(this.jp=window.Math.max(this.jp,15));a=this.Eb;b=this.Yb+this.jp;c=this.Ha;d=this.Ja-this.jp;if(0<=c&&0<=d)return new D.B(a,b,c,d);this.Qk=D.o}return new D.B(this.Eb,
this.Yb,this.Ha,this.Ja)}};D.y.qD=function(a,b){if(this.contains(a,b)||!this.Vu){for(var c=this.Gc(),d=0;d<c.length;d++)if(c[d].contains(a,b))return c[d].qD(a,b);if(this.Vu)return this}return D.o};D.y.contains=function(a,b){return a>=this.Eb&&a<=this.Eb+this.Ha&&b>=this.Yb&&b<=this.Yb+this.Ja};D.y.Hm=function(){var a=D.K.we(this.fk),b=D.K.ue(this.fk),c=D.K.qe(this.fk);return[this.Eb,this.Yb,this.Ha,this.Ja,a,b,c,this.gf()?0:window.Math.random()]};
D.y.dr=function(a){this.dT(a[0],a[1],a[2],a[3]);this.fk=D.K.MA(window.Math.round(a[4]),window.Math.round(a[5]),window.Math.round(a[6]));this.I&&((0,D.hI)(this.I,this.Eb,this.Yb,this.Ha,this.Ja),this.oq&&(0,D.hI)(this.oq,this.Eb+1,this.Yb+1,this.Ha-2,this.Ja-2),("header"!=this.Qk||this.cV)&&this.I.P(this.sI()),this.Fa()&&this.rb(D.p),(0,D.ZV)(this,this.qz),(0,D.ZV)(this,this.aR),this.aR=this.qz=D.o,(0,D.bW)(this),(0,D.dS)(this)?((0,D.ZV)(this,this.X4),this.X4=D.o):((0,D.ZV)(this,this.Or),this.Or=D.o,
this.Pb&&this.Pb.getParent().removeChild(this.Pb),this.Pb=this.JO(this.I)))};D.UV=function(a){if(a.Yma){var b=new D.jo(a.K.j(),a,0.3);(0,D.T)(b.O,"typeNumberArray",a,a.Hm,a.dr,a.Hm());a.dr(a.Yma);return b}return D.o};D.WV.prototype.Cf=function(a,b){return 0==(0,D.gS)(this)||b.Vu&&0<b.Ha&&0<b.Ja?D.WV.u.Cf.call(this,a,b):this.Vg(a)};
D.WV.prototype.j5=function(){var a=this.K.j(),b;if("header"==this.Qk)b=new D.F(a,this.Eb,this.Yb,this.Ha,this.Ja),this.oq=new D.F(a,this.Eb+1,this.Yb+1,this.Ha-2,this.Ja-2),(0,D.cW)(this,b,this.oq),this.oq.ua(D.p),b.k(this.oq),this.Cu&&(this.Ke=(0,D.aW)(this,b));else{var c=this.sI();b=new D.F(a,this.Eb,this.Yb,this.Ha,this.Ja);if((1E3>this.K.Fr||!(0,D.Mf)())&&2<=this.Ha&&2<=this.Ja){new D.J("#FFFFFF");new D.J("#000000",0.3);this.Kr&&new D.J(this.fk,0.15);var d=this.zb(),e=D.K.vM("#FFFFFF",d,0.7),
d=D.K.vM("#000000",d,0.7),f=window.Math.min(this.Ha,this.Ja);4<=f?(b.va(d),this.aR=new D.F(a,this.Eb,this.Yb,this.Ha-1,this.Ja-1),this.aR.va(e),this.aR.ua(D.p),b.k(this.aR),this.qz=new D.F(a,this.Eb+1,this.Yb+1,this.Ha-2,this.Ja-2),this.qz.P(c),this.qz.ua(D.p),b.k(this.qz)):2<=f?(b.va(d),this.qz=new D.F(a,this.Eb,this.Yb,this.Ha-1,this.Ja-1),this.qz.P(c),this.qz.ua(D.p),b.k(this.qz)):b.P(c)}else b.P(c)}this.K.za().Da(b,this);this.Oa()?b.Xf(D.k):b.setCursor("default");b.zIndex=this.XY;return b};
D.aW=function(a,b){if("header"!=a.Qk||!a.Zx())return D.o;var c=D.o,d=a.Eb,e=a.Eb+a.Ha-1,f=a.Yb+1,g=a.Yb+a.jp;if(12<e-d-2){if(a.Cu){var c=a.K.j(),h=(0,D.G)(a.$),j=a.K.A()._resources,l=h&&j.restoreDownRtl?j.restoreDownRtl:j.restoreDown,m=h&&j.restoreOverRtl?j.restoreOverRtl:j.restoreOver,h=new D.Ve(c,h&&j.restoreRtl?j.restoreRtl:j.restore,0,0,12,12),l=new D.Ve(c,l,0,0,12,12),m=new D.Ve(c,m,0,0,12,12);(0,D.Li)(h);(0,D.Li)(l);(0,D.Li)(m);c=new D.Re(c,h,l,m);c.oa(D.vn,a.xha,D.p,a)}else c=a.K.j(),h=(0,D.G)(a.$),
j=a.K.A()._resources,l=h&&j.isolateDownRtl?j.isolateDownRtl:j.isolateDown,m=h&&j.isolateOverRtl?j.isolateOverRtl:j.isolateOver,h=new D.Ve(c,h&&j.isolateRtl?j.isolateRtl:j.isolate,0,0,12,12),l=new D.Ve(c,l,0,0,12,12),m=new D.Ve(c,m,0,0,12,12),(0,D.Li)(h),(0,D.Li)(l),(0,D.Li)(m),c=new D.Re(c,h,l,m),c.oa(D.vn,a.wha,D.p,a);d=(0,D.G)(b.j())?d+1:e-12-1;(0,D.Ik)(c,d,(g+f-12)/2);b.k(c);(0,D.Mf)()&&(f=new D.F(b.j(),-2,-2,16,16),(0,D.Li)(f),c.k(f));(0,D.YH)(a.K.A().skin)?a.K.za().Da(c,a):(f=(0,D.Gk)(a.K.A(),
a.Cu?"tooltipRestore":"tooltipIsolate","DvtTreemapBundle",a.Cu?"RESTORE":"ISOLATE"),a.K.za().Da(c,new D.MR(a,a.getId(),f)))}return c};D.bW=function(a){a.Ke&&((0,D.ZV)(a,a.Ke),a.Ke=D.o)};
D.WV.prototype.JO=function(a){var b=(0,D.G)(a.j());if(!this.YC||!a||!this.Qk||"off"==this.Qk)return D.o;var c=this.Ja;if((0,D.eS)(this)>c)return D.o;var d="node"==this.Qk?this.kK:this.hCa;b&&("start"==d?d="end":"end"==d&&(d="start"));var e=this.Ha-6,f=0;this.Zx()&&(f=13,e="center"==d?e-2*f:e-f);if(0>=e)return D.o;var g=new D.Nf(this.K.j(),this.YC);g.He((0,D.eS)(this));"start"==d?(b?g.ha(this.Eb+4+f):g.ha(this.Eb+4),g.$h()):"center"==d?(g.ha(this.Eb+this.Ha/2),g.df()):"end"==d&&(b?g.ha(this.Eb+this.Ha-
4):g.ha(this.Eb+this.Ha-4-f),g.ai());"node"==this.Qk?((0,D.pS)(this,g),c=this.Ja-4,b=D.af.oM(g),"top"==this.k7?g.ya(this.Yb+2):"center"==this.k7?g.ya(this.Yb+this.Ja/2-b/2):"bottom"==this.k7&&g.ya(this.Yb+this.Ja-2-b)):"header"==this.Qk&&(b=(0,D.Fj)()?1:0,g.ya(this.Yb+1+this.jp/2+b),g.Jg(),(0,D.$V)(this,g,"labelStyle"));if(g!=D.o)return"header"==this.Qk&&this.Oq()?((0,D.$V)(this,g,"_drillableLabelStyle"),g.setCursor("pointer"),b=new D.MR(this,this.getId(),D.o,this.Ne(),this.Yi()),b.Nca(D.k),this.K.za().Da(g,
b)):g.ua(D.p),D.af.Vb(g,e,c,a)?g:D.o};D.cW=function(a,b,c){var d=a.K.A().nodeDefaults.header;a.cV?(a=a.zb(),c.va(a),c=D.K.vM(d.borderColor,a,0.5),b.va(c)):(b.va(d.borderColor),c.va(d.backgroundColor))};D.$V=function(a,b,c){var d=[];1>=(0,D.gS)(a)&&d.push(new D.I("font-weight:bold;"));d.push(a.K.A().nodeDefaults.header[c]);a.cV&&("labelStyle"==c||"_drillableLabelStyle"==c)&&d.push(new D.I("color: "+(a.Kr?"#000000":D.K.zj(a.fk))));a.Lka&&d.push(a.Lka);b.Na((0,D.zp)(d))};
D.WV.prototype.vA=function(){!this.Ke&&!(0,D.Mf)()&&(this.Ke=(0,D.aW)(this,this.I));D.WV.u.vA.call(this)};D.WV.prototype.Zt=function(){this.Cu!==D.k&&!(0,D.Mf)()&&(0,D.bW)(this);D.WV.u.Zt.call(this)};D.WV.prototype.gH=function(){return this.I?new D.F(this.K.j(),this.I.pa(),this.I.qa(),this.I.getWidth(),this.I.getHeight()):D.o};D.ZV=function(a,b){b&&a.I.removeChild(b)};D.y=D.WV.prototype;
D.y.wha=function(a){this.Cu=D.k;this.Ib();var b=this.K,c=b.za().Od();c&&c.qc();b.rd.push(this);b.A().isolatedNode=this.getId();b.Wa(new D.YV(this.getId()));b.dX=D.k;b.Wp(new D.B(0,0,b.Za,b.ob));b.dX=D.p;c=this.xa();b.e7.k(c);(0,D.VV)(b,this);(0,D.bW)(this);this.Rm();a&&a.stopPropagation()};
D.y.xha=function(a){this.Cu=D.p;this.Ib();var b=this.K,c=b.rd.pop();b.A().isolatedNode=0<b.rd.length?b.rd[b.rd.length-1].getId():D.o;var d=b.za().Od();d&&d.qc();d=c.getId();b.YP=d;b.Wa(new D.YV);b.dX=D.k;b.Wp(new D.B(0,0,b.Za,b.ob));b.dX=D.p;(0,D.VV)(b,c);(0,D.bW)(this);this.Rm();a&&a.stopPropagation()};D.y.Ne=function(a,b,c){return a&&a instanceof D.Re?D.o:D.WV.u.Ne.call(this,a,b,c)};D.y.Yi=function(a){return a&&a instanceof D.Re?D.o:D.WV.u.Yi.call(this,a)};
D.y.ye=function(a){return a&&a instanceof D.Re?(0,D.Gk)(this.K.A(),this.Cu?"tooltipRestore":"tooltipIsolate","DvtTreemapBundle",this.Cu?"RESTORE":"ISOLATE"):D.o};
D.y.nc=function(){var a=this.K.A(),b=[];this.Oa()&&b.push((0,D.Gk)(a,this.Fa()?"stateSelected":"stateUnselected","DvtUtilBundle",this.Fa()?"STATE_SELECTED":"STATE_UNSELECTED"));this.Cu&&b.push((0,D.Gk)(a,"stateIsolated","DvtUtilBundle","STATE_ISOLATED"));this.Oq()&&b.push((0,D.Gk)(a,"stateDrillable","DvtUtilBundle","STATE_DRILLABLE"));return(0,D.Hk)(this.ed(),b)};D.y.Rm=function(){!(0,D.df)()&&this.I&&this.I.Mb("label",this.nc())};
D.IV=function(){this.Init()};D.z.q(D.IV,D.z,"DvtBaseTreemapLayout");D.IV.prototype.Init=function(){this.XY=0};D.IV.prototype.Qq=(0,D.t)();D.JV=function(a,b,c,d,e,f,g){b.XY=a.XY;a.XY++;if(!g||!b.gf()){a=a.Aaa(b.K,(0,D.gS)(b));g=window.Math.round(c+a);var h=window.Math.round(d+a);if(b=b.dT(g,h,window.Math.round(c+e-a)-g,window.Math.round(d+f-a)-h))return b}return new D.B(c,d,e,f)};D.IV.prototype.Aaa=function(a,b){var c=a.A().groupGaps;return"outer"==c?1==b&&2<=a.qt?3:0:"all"==c?b<a.qt?3:0:0};
D.LV=function(){this.Init()};D.z.q(D.LV,D.IV,"DvtSquarifyingLayout");D.LV.prototype.Qq=function(a,b,c,d,e,f,g){this.qf(b,c,d,e,f,g?D.p:D.k)};D.LV.prototype.qf=function(a,b,c,d,e,f){b=(0,D.JV)(this,a,b,c,d,e,f);a=a.Gc();if(a!=D.o&&0<a.length){c=a;e=b.e*b.g;for(d=d=f=0;d<c.length;d++)f+=0<c[d].$c()?c[d].$c():0;e=0==e?0:e/f;for(d=0;d<c.length;d++)f=c[d],f.ME=f.$c()*e;a=a.slice(0).sort(function(a,b){return a.$c()-b.$c()});c=window.Math.min(b.e,b.g);(0,D.MV)(this,a,c,new D.B(b.x,b.y,b.e,b.g))}};
D.MV=function(a,b,c,d){var e=[],f=window.Infinity;if(b==D.o||0==b.length)(0,D.NV)(a,e,c,d);else for(;0<b.length;){var g=b.pop();if(0>g.ME){(0,D.NV)(a,e,c,d);break}e.push(g);var h,j=e,l=c,m=0;h=window.Infinity;for(var n=-window.Infinity,q=0;q<j.length;q++)m+=j[q].ME,h=window.Math.min(h,j[q].ME),n=window.Math.max(n,j[q].ME);j=m*m;l*=l;h=window.Math.max(l*n/j,j/(l*h));if(h>f){b.push(g);e.pop();d=(0,D.NV)(a,e,c,d);(0,D.MV)(a,b,window.Math.min(d.e,d.g),d);break}else if(0==b.length){(0,D.NV)(a,e,c,d);break}else f=
h}};D.NV=function(a,b,c,d){var e=0,f;for(f=0;f<b.length;f++)e+=b[f].ME;var g=d.x,h=d.y;if(c==d.e){e=0==c?0:e/c;for(f=0;f<b.length;f++)c=b[f].ME/e,a.qf(b[f],g,h,c,e,D.p),g+=c;return new D.B(d.x,d.y+e,d.e,d.g-e)}c=0==c?0:e/c;for(f=0;f<b.length;f++)e=b[f].ME/c,a.qf(b[f],g,h,c,e,D.p),h+=e;return new D.B(d.x+c,d.y,d.e-c,d.g)};
D.KV=function(a){this.Init();this.ix=a};D.z.q(D.KV,D.IV,"DvtSliceAndDiceLayout");D.KV.prototype.Qq=function(a,b,c,d,e,f,g){this.qf(this.ix,a,b,c,d,e,f,g?D.p:D.k)};
D.KV.prototype.qf=function(a,b,c,d,e,f,g,h){var j=b.A();d=(0,D.JV)(this,c,d,e,f,g,h);c=c.Gc();if(c!=D.o){e=d.x;f=d.y;g=d.e;h=d.g;var l=0,m;for(m=0;m<c.length;m++)l+=0<c[m].$c()?c[m].$c():0;"on"==j.sorting&&(c=c.slice(0),c.sort(function(a,b){return b.$c()-a.$c()}));a&&(0,D.G)(b.j())&&(c=c.slice(0).reverse());for(m=0;m<c.length;m++)if(j=c[m],!(0>=j.$c())){var n=j.$c()/l;a?g=d.e*n:h=d.g*n;this.qf(!a,b,j,e,f,g,h,D.p);a?e+=g:f+=h}}};
D.YV=function(a){this.Init("treemapIsolate");this.ib=a?a:D.o};(0,D.ca)("DvtTreemapIsolateEvent",D.YV);D.z.q(D.YV,D.$i,"DvtTreemapIsolateEvent");D.YV.TYPE="treemapIsolate";D.YV.prototype.getId=(0,D.x)("ib");D.YV.prototype.getId=D.YV.prototype.getId;
D.QV=function(a){this.Init(a)};D.z.q(D.QV,D.xV,"DvtTreemapKeyboardHandler");D.QV.prototype.Xg=function(a){var b=D.QV.u.Xg.call(this,a);if(!b&&(a=a.keyCode,219==a||221==a))b=D.k;return b};
D.RV=function(a,b,c,d){D.ZR.call(this,a,b,c,d)};D.z.q(D.RV,D.ZR,"DvtTreemapEventManager");D.RV.prototype.Jh=function(a){var b=D.k;if(13==a.keyCode&&a.ctrlKey){var c=this.Od();c.Zx()&&(c.Cu?c.xha():c.wha());(0,D.ti)(a)}else b=D.RV.u.Jh.call(this,a);return b};D.RV.prototype.vba=(0,D.ba)(D.p);
(0,D.Lg)("DvtTreemapBundle",{COLOR:"Color",ISOLATE:"Isolate",OTHER:"Other",RESTORE:"Restore",SIZE:"Size"});
D.PV=function(){this.Init({skyros:D.XV,alta:{}})};D.z.q(D.PV,D.YR,"DvtTreemapDefaults");
D.XV={groupGaps:"outer",nodeDefaults:{header:{backgroundColor:"#FFFFFF",borderColor:"#d6dfe6",hoverBackgroundColor:"#ebeced",hoverOuterColor:"#ebeced",hoverInnerColor:"#d6d7d8",isolate:"auto",labelHalign:"start",labelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px;color:#252525;"),selectedBackgroundColor:"#dae9f5",selectedInnerColor:"#FFFFFF",selectedOuterColor:"#000000",useNodeColor:"off",_hoverLabelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px;color:#252525;"),
_selectedLabelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px;color:#252525;"),_drillableLabelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px; color:#145c9e;"),_drillableHoverLabelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px; color:#145c9e;"),_drillableSelectedLabelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px; color:#145c9e;")},
hoverColor:"#ebeced",groupLabelDisplay:"header",labelDisplay:"node",labelHalign:"center",labelValign:"center",selectedInnerColor:"#FFFFFF",selectedOuterColor:"#000000"}};
  return D;
});