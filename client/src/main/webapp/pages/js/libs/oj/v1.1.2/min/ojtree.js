/**
 * Copyright (c) 2014, 2015, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(a,f){(function(){function d(a){n.push(a);f(a.KV).keydown(b)}function b(b){var c="";a.C.ys(b)?c+="ctrl+":b.shiftKey&&(c+="shift+");var d=b.which;switch(d){case 32:c+="space";break;case 37:c+="left";break;case 38:c+="up";break;case 39:c+="right";break;case 40:c+="down";break;case 46:c+="del";break;case 33:c+="pgup";break;case 34:c+="pgdn";break;case 35:c+="end";break;case 36:c+="home";break;case 56:c="*";break;case 113:case 121:c+="f"+(1-
(112-d))}if(0!==c.length&&"shift+"!=c&&"ctrl+"!=c){var e=null;f.each(n,function(a,d){if(d.Jv.f.ui.Xi)return d.Jv.f.ui.Jp=!1,"shift+f10"==c?d.Jv.f.menu.dB=d.Jv.f.ui.zb:d.IS[c]&&(b.preventDefault(),e=d.IS[c].call(d.Jv,b)),!1});if(null!=e)return e}}function c(a){f.each(n,function(b){if(n[b].KV===a)return f(a).off("keydown"),n[b]=null,n.splice(b,1),!1})}function e(a){var b=!1,c=!0;a.bC&&(a.title&&(b=f("style[id\x3d'"+a.title+"-stylesheet']")[0]),b?c=!1:(b=document.createElement("style"),b.setAttribute("type",
"text/css"),a.title&&b.setAttribute("id",a.title+"-stylesheet")),b.styleSheet?c?(document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet.cssText=a.bC):b.styleSheet.cssText=b.styleSheet.cssText+" "+a.bC:(b.appendChild(document.createTextNode(a.bC)),document.getElementsByTagName("head")[0].appendChild(b)))}var g={cut:"ojtreecut",copy:"ojtreecopy",paste:"ojtreepaste",remove:"ojtreeremove",rename:"ojtreerename"},h={cut:"labelCut",copy:"labelCopy",paste:"labelPaste",remove:"labelRemove",rename:"labelRename"},
k,l,m;f(function(){/msie/.test(navigator.userAgent.toLowerCase())?(l=f('\x3ctextarea cols\x3d"10" rows\x3d"2"\x3e\x3c/textarea\x3e').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),m=f('\x3ctextarea cols\x3d"10" rows\x3d"2" style\x3d"overflow: hidden;"\x3e\x3c/textarea\x3e').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),k=l.width()-m.width(),l.add(m).remove()):(l=f("\x3cdiv /\x3e").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("\x3cdiv /\x3e").find("div").css({width:"100%",
height:200}),k=100-l.width(),l.parent().remove())});var n=[],q=-1;a.Da("oj.ojTree",f.oj.baseComponent,{widgetEventPrefix:"oj",defaultElement:"\x3cdiv\x3e",options:{dnd:{reorder:"disable"},expandParents:!1,initExpanded:null,xga:[],selection:[],selectionMode:"single",selectedParentCollapse:!1,selectedParentExpand:!0,selectPrevOnDelete:!1,data:null,emptyText:null,icons:!0,types:null,before:null,collapse:null,create:null,collapseAll:null,cut:null,dehover:null,remove:null,destroy:null,expand:null,expandAll:null,
hover:null,loaded:null,move:null,optionChange:null,paste:null,refresh:null,rename:null},collapse:function(a,b){var c=(b=b||!1)?0:this.TD;a=this.va(a);if(!a.length||-1===a||!a.hasClass("oj-expanded")||this.f.V.locked||a.hasClass("oj-disabled"))return!1;var d=this.tb({obj:a,func:"collapse"},"before");if("boolean"!=typeof d||d)a.removeClass("oj-expanded").addClass("oj-collapsed").attr("aria-expanded","false"),f(a.children()[0]).removeClass("oj-selected").addClass("oj-default"),!b&&c?this.Lr(a,!0):this.KI(f(a.children("UL")[0]),
a)},Lr:function(a,b){var c,d,e;c=f(a.children("ul"));this.AT?c[0].addEventListener("webkitTransitionEnd",this.kA):c[0].addEventListener("transitionend",this.kA);b?(d=c[0].offsetHeight,e=0):(d=0,e=this.P7(c[0]));c.css("max-height",d+"px");c.css("overflow","hidden");b||(c[0].style.display="block");setTimeout(function(){c.addClass("oj-tree-transition");c.css("max-height",e+"px")},20)},P7:function(a){var b,c,d,e,g=f("\x3cdiv style\x3d'position: absolute'\x3e");b=a.parentNode;c=a.nextSibling;b.removeChild(a);
e=a.style.display;a.style.display="block";g.append(a);this.ea[0].appendChild(g[0]);d=a.offsetHeight||a.scrollHeight;a.style.display=e;this.ea[0].removeChild(g[0]);g[0].removeChild(a);c?b.insertBefore(a,c):b.appendChild(a);return d+10},Tr:function(a){a=f(a.target);var b=a.closest("li");this.AT?a[0].removeEventListener("webkitTransitionEnd",this.kA):a[0].removeEventListener("transitionend",this.kA);a.removeClass("oj-tree-transition");this.KI(a,b)},KI:function(a,b){b.hasClass("oj-collapsed")?(a[0].style.display=
"none",a.css("max-height",""),this.tb({obj:b},"collapse"),this.after_close(b)):(a[0].style.display="block",a.css("max-height",""),this.tb({obj:b},"expand"),this.after_open(b))},collapseAll:function(a,b){var c=a?a:-1,d=this;if(!this.f.V.locked&&((a=a?this.va(a):this.ea)&&-1!==c&&(c=a),a&&-1!==c||(a=this.fa),!a.hasClass("oj-disabled"))){var e;-1!==c&&this.isExpanded(a)&&(e=a[0]);var f=a.find("li.oj-expanded");f.length&&f.each(function(){d.collapse(this,!b)});e&&(this.collapse(e,!b),f.splice(0,0,e));
f.length&&this.tb({obj:f,targ:c},"collapseAll")}},expand:function(a,b){this.ce(a,!1,b)},expanded:function(a,b){var c,d,e=this;if(a&&"array"===f.type(a)){if(this.f.V.locked)return null;d=a.length;f.each(a,function(a,c){e.ce(c,!1,b)});return null}a=this.fa.find("li.oj-expanded");d=a.length;c=[];for(var g=0;g<d;g++)c.push(a[g]);return f(c)},expandAll:function(a,b){this.mF(a,b)},toggleExpand:function(a,b){if((a=this.va(a))&&a.length&&-1!==a&&!a.hasClass("oj-disabled")&&!this.f.V.locked){if(a.hasClass("oj-collapsed"))return this.expand(a,
b);if(a.hasClass("oj-expanded"))return this.collapse(a,b)}},deselect:function(a){var b=this.options.selection.slice(0);this.Kq(a);this.fu("selection",b,null,null)},deselectAll:function(a){if(!this.f.V.locked){var b=this.options.selection.slice(0);this.Cy(a);this.fu("selection",b,null,null)}},select:function(a){this.Lj(a,!0)},toggleSelect:function(a){a=this.va(a);if(!a.length||a.hasClass("oj-disabled")||this.f.V.locked)return!1;this.isSelected(a)?this.deselect(a):this.Lj(a,!0);return!0},isCollapsed:function(a){return(a=
this.va(a))&&-1!==a&&a.hasClass("oj-collapsed")},isExpanded:function(a){return(a=this.va(a))&&-1!==a&&a.hasClass("oj-expanded")},isLeaf:function(a){return this.sT(a)},isSelected:function(a){a=this.va(a);var b=!1;a&&a.length&&this.f.ui.selected&&(b=0<=this.f.ui.selected.index(a));return b},create:function(a,b,c){return this.OE(a,b,c)},remove:function(a){a=this.va(a);if(!a.length||a.hasClass("oj-disabled")||this.f.V.locked)return!1;var b=this.tb({obj:a,func:"remove"},"before");if("boolean"==typeof b&&
!b)return!1;this.eo();var b=this.Hi(a),c=f([]),d=this,e=this.Ok(a);a.each(function(){c=c.add(d.Ok(this))});a=a.detach();-1!==b&&0===b.find("\x3e ul \x3e li").length&&b.removeClass("oj-expanded oj-collapsed").addClass("oj-tree-leaf").removeAttr("aria-expanded");this.tg(b);this.tb({obj:a,prev:e,parent:b},"remove");return a},getText:function(a){a=this.va(a);if(!a.length)return!1;a=a.children("a:eq(0)");a=a.find("span:eq(0)");return a[0].textContent},rename:function(a,b){this.nV(a,b)},hover:function(a){if(!this.f.menu.dB&&
(a=this.va(a),a.length&&!a.hasClass("oj-disabled")&&!this.f.V.locked&&!a.hasClass("oj-hover"))){var b=this.tb({obj:a,func:"hover"},"before");if("boolean"!=typeof b||b)a.hasClass("oj-hover")||this.dehover(),this.f.ui.zb=a.children("a").addClass("oj-hover").parent(),this.fa.attr("aria-activedescendant",this.f.ui.zb.attr("id")),this.RQ(a),this.tb({obj:a},"hover")}},dehover:function(){if(!this.f.menu.dB){var a=this.f.ui.zb,b;if(a&&a.length&&!a.hasClass("oj-disabled")&&!this.f.V.locked){b=a.find("a.oj-hover");
if(!b.length&&(b=this.fa.find("a.oj-hover"),!b.length))return;b.removeClass("oj-hover").parent();this.fa.removeAttr("aria-activedescendant");this.f.ui.zb=null;void 0!=a.attr("id")&&this.tb({obj:a},"dehover")}}},getPath:function(a,b){var c=[],d=this;a=this.va(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".oj-tree","li").each(function(){c.push(b?this.id:d.getText(this))});c.reverse();c.push(b?a.attr("id"):this.getText(a));return c},getRoot:function(){return this.ea.children("ul:eq(0)")},refresh:function(a){this._super();
this.f.V.locked||this.Bd(a?a:-1)},move:function(a,b,c,d){this.wr(a,b,c,d)},getType:function(a){return this.sG(a)},setType:function(a,b){return this.Eda(a,b)},getNodeBySubId:function(a){return a?this.Tba(a):this.element?this.element[0]:null},getParent:function(a){return(a=this.Hi(a))&&0<a.length?a:null},getPrevSibling:function(a){return(a=this.Ok(a,!0))&&0<a.length?a:null},getNextSibling:function(a){return(a=this.yo(a,!0))&&0<a.length?a:null},getChildren:function(a){return(a=this.C7(a?a:-1))&&0<a.length?
a:null},_ComponentCreate:function(){this._super();this.y$=this.hba();this.Lq=this.element.attr("id");void 0===this.Lq&&(this.Lq="oj-tree-"+this.Jd(),this.element.attr("id",this.Lq));this.Lq="#"+this.Lq;this.ea=this.element;this.fa=null;this.f={};this.NW=null;this.Em="rtl"===this.hc();this.ET=a.C.sf();this.M$();if(this.TD=this.t7())this.AT="safari"==a.Qa.fw().browser,this.kA=f.proxy(this.Tr,this);this.fh()},_destroy:function(){this.g5();this.f.html.Cs&&(this.ea.append(this.f.html.Cs),this.f.html.LB.remove(),
this.f.html.LB=!1,this.f.html.eC=!1);this.f.Oa.type=0;this._super()},_setOption:function(a,b,c){var d;if("selection"===a)b="string"==typeof b?[b]:b&&b.length?b:[],this.f.V.Ip=!0,this.g$(b),this.f.V.Ip=!1,b=this.gG();else if("selectionMode"===a)"none"===b?d=0:"single"===b?d=1:"multiple"===b?d=-1:(d=0,b="none"),d!=this.f.V.Gl&&(this.f.V.Gl=d);else if("icons"===a)"boolean"==f.type(b)&&b!=this.f.gb.icons&&((this.f.gb.icons=b)?this.sI():this.TG());else if("contextMenu"===a)this.lo(),b&&this.Am(b);else if("disabled"===
a)this.n9(b);else{if("data"===a){this._super(a,b,c);this.aT();this.bT();this.dT();this.QT();return}if("dnd"===a){this._super(a,b,c);this.cT();return}"emptyText"==a&&(b=this.Iy(b))}this._super(a,b,c)},ht:function(a,b,c){return"selection"===a?this.uP(b,c):this._superApply(arguments)},uP:function(a,b){var c,d,e,g,h,k=!1,l=!1;g=a&&a.length?a.length:0;h=b&&b.length?b.length:0;if(g!==h)k=!0;else if(0==g&&0===h)k=!1;else for(c=0;c<g;c++){e=f(a[c]).attr("id");l=!1;for(d=0;d<h;d++)if(e==f(b[d]).attr("id")){l=
!0;break}if(!l){k=!0;break}}return!k},g5:function(){var a=this.Jd();this.ea.unbind(".oj-tree").undelegate(".oj-tree").removeData("oj-tree-instance-id").find("[class^\x3d'oj-tree']").addBack().attr("class",function(){return this.className.replace(/oj-tree[^ ]*|$/ig,"")});var b=this.ea.attr("class"),b=b.trim();0===b.length&&this.ea.removeAttr("class");c(this.fa);f(document).unbind(".oj-tree-"+a).undelegate(".oj-tree-"+a);this.fa.remove();this.fa=null},va:function(a,b){if("undefined"===typeof a||null===
a)return b?this.f.ui.selected:this.f.ui.Gb;var c=f(a,this.ea);if(c.is(".oj-tree")||-1===a)return-1;c=c.closest("li",this.ea);return c.length?c:!1},Ok:function(a,b){a=this.va(a);if(-1===a)return this.ea.find("\x3e ul \x3e li:last-child");if(!a.length)return!1;if(b)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("oj-expanded");)a=a.children("ul:eq(0)").children("li:last");return a}var c=a.parentsUntil(".oj-tree","li:eq(0)");return c.length?
c:!1},yo:function(a,b){a=this.va(a);return-1===a?this.ea.find("\x3e ul \x3e li:first-child"):a.length?b?0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):!1:a.hasClass("oj-expanded")?a.find("li:eq(0)"):0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):a.parentsUntil(".oj-tree","li").next("li").eq(0):!1},Hi:function(a){a=this.va(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".oj-tree","li:eq(0)");return a.length?a:-1},C7:function(a){a=this.va(a);return-1===a?this.ea.children("ul:eq(0)").children("li"):
a.length?a.children("ul:eq(0)").children("li"):!1},sT:function(a){return(a=this.va(a))&&-1!==a&&a.hasClass("oj-tree-leaf")},u8:function(a){a=this.fa.find(a);var b=!1;a&&a.length&&0<a.length&&f(a).is("li")&&(b=a);return b},PH:function(b,c){var d=b.parents("div").eq(0);(d=a.Components.Gg(d))&&c&&d("getCI",c);return this},getCI:function(a){a.ek=this},yO:function(a,b){void 0!=a&&void 0!=b&&f.each(b,function(b,c){void 0==a[b]&&(a[b]=c)})},n9:function(a){var b;"undefined"!==typeof a&&((b=this.fa.hasClass("oj-disabled"))||
(b=!1),b!=a&&(a?(this.fa.addClass("oj-disabled"),this.fa.prop("disabled",!0)):(this.fa.removeClass("oj-disabled"),this.fa.prop("disabled",!1)),this.rea(a)))},rea:function(a){a?(this.f.V.locked=!0,this.f.ui.opacity=this.ea.children("ul").css("opacity"),this.fa.addClass("oj-disabled").css("opacity","0.9")):(this.f.V.locked=!1,this.fa.removeClass("oj-disabled").css("opacity",this.f.ui.opacity))},g$:function(a){var b=a.slice(0),c=[],d=this,e,g,h,k;f.grep(b,function(a,f){if(e=d.u8(a))c.push(e),b[f]=e[0];
else return!1;return!0});a=this.gG();f.each(a,function(a,b){k=c.length;g=f(b).attr("id");h=!1;for(a=0;a<k;a++)if(g==c[a].attr("id")){h=!0;break}h||d.Kq(b)});this.zda(c,null)},Br:function(a,b,c,d,e){var f={};b=-1!==b&&b?this.va(b):-1;this.PH(a,f);f.zn=this;f.wa=f.ek.va(a);f.xa=b;f.Bl="undefined"===typeof c||!1===c?"last":c;if(!e&&this.f.V.ag.wa&&this.f.V.ag.wa[0]===f.wa[0]&&this.f.V.ag.xa[0]===f.xa[0]&&this.f.V.ag.Bl===f.Bl)d&&d.call(this,this.f.V.ag);else{if(-1!==f.xa&&f.xa){if(!/^(before|after)$/.test(f.Bl)&&
!this.Wk(f.xa))return this.Xk(f.xa,function(){this.Br(a,b,c,d,!0)});switch(f.Bl){case "before":f.Vi=f.xa.index();f.mp=f.zn.Hi(f.xa);break;case "after":f.Vi=f.xa.index()+1;f.mp=f.zn.Hi(f.xa);break;case "inside":case "first":f.Vi=0;f.mp=f.xa;break;case "last":f.Vi=f.xa.find(" \x3e ul \x3e li").length;f.mp=f.xa;break;default:f.Vi=f.Bl,f.mp=f.xa}}else switch(f.mp=-1,f.Bl){case "first":case "before":case "inside":f.Vi=0;break;case "after":case "last":f.Vi=f.zn.ea.find(" \x3e ul \x3e li").length;break;
default:f.Vi=f.Bl}f.yl=-1==f.mp?f.zn.ea:f.mp;f.Al=f.ek.Hi(f.wa);f.Kia=f.wa.index();-1===f.Al&&(f.Al=f.ek?f.ek.ea:this.ea);!/^(before|after)$/.test(f.Bl)&&f.Al&&f.yl&&f.Al[0]===f.yl[0]&&f.wa.index()<f.Vi&&f.Vi++;f.NK=f.yl.find(" \x3e ul \x3e li:nth-child("+(f.Vi+1)+")");this.f.V.ag=f;d&&d.call(this,this.f.V.ag,"prepare_move")}},check_move:function(){var a=this.f.V.ag,b=!0,c;c=-1===a.xa?this.ea:a.xa;if(!a||!a.wa||a.NK[0]===a.wa[0]||!a.xa)return!1;if(!a.pB){if(a.Al&&a.yl&&a.Al[0]===a.yl[0]&&a.Vi-1===
a.wa.index())return!1;a.wa.each(function(){if(-1!==c.parentsUntil(".oj-tree","li").addBack().index(this))return b=!1})}return b},nV:function(a,b){var c;a=this.va(a);this.eo();c=this.getText(a);if(a&&a.length){var d=this.tb({obj:a,func:"rename",title:b,prevTitle:c},"before");if("boolean"==typeof d&&!d)return}a&&a.length&&this.pI.apply(this,Array.prototype.slice.call(arguments))&&this.tb({obj:a,title:b,prevTitle:c},"rename")},wr:function(a,b,c,d,e,g){e||(a=this.va(a));if(!(a.hasClass&&a.hasClass("oj-disabled")||
this.f.V.locked)){if(!e)return this.Br(a,b,c,function(a){a.ek===a.zn||a.pB||a.ek.deselect(a.wa);this.wr(a,!1,!1,d,!0,g)});d&&(this.f.V.ag.pB=!0);if(!g&&!this.check_move())return!1;this.eo();b=!1;d?(b=a.wa.clone(!0),b.find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)})):b=a.wa;a.NK.length?a.NK.before(b):(a.yl.children("ul").length||f("\x3cul /\x3e").appendTo(a.yl),a.yl.children("ul:eq(0)").append(b));try{a.ek.tg(a.Al),a.zn.tg(a.yl),a.Al.find("\x3e ul \x3e li").length||a.Al.removeClass("oj-expanded oj-collapsed").removeAttr("aria-expanded").addClass("oj-tree-leaf").children("ul").remove()}catch(h){}d&&
(this.f.V.ag.pB=!0,this.f.V.ag.MK=b);b=f.extend(!0,{},this.f.V.ag);b.obj=a.wa;this.tb(b,"move");return this.f.V.ag}},mia:function(){return this.f.zc.ag},sG:function(a){var b=null;this.options.types&&(b=this.va(a));return b&&b.length?b.attr(this.options.types.attr)||"default":!1},Eda:function(a,b){var c=this.options.types,d,e=!1;a=this.va(a);c&&a&&-1!=a&&a.length&&b&&(d=c.attr)&&c[b]&&(a.attr(d,b),a.addClass("oj-tree-type"),e=!0);return e},cP:function(a,b,c){b=this.va(b);var d=!1,e=this.sG(b),g=0,
h=this,k=this.Nk().types,l=!1;if(-1===b)if(k[a])d=k[a];else return;else{if(!1===e)return;(l=this.f.types.ac.useData?b.data("oj-tree"):!1)&&l.types&&"undefined"!==typeof l.types[a]?d=l.types[a]:k.types[e]&&"undefined"!==typeof k.types[e][a]?d=k.types[e][a]:k.types["default"]&&"undefined"!==typeof k.types["default"][a]&&(d=k.types["default"][a])}f.isFunction(d)&&(d=d.call(this,b));var m=this.f.types.ac.maxDepth;"maxDepth"===a&&-1!==b&&!1!==c&&-2!==this.f.types.ac.maxDepth&&0!==d&&b.children("a:eq(0)").parentsUntil(".oj-tree",
"li").each(function(b){if(-1!==m&&0>=m-(b+1))return d=0,!1;g=0===b?d:h.cP(a,this,!1);if(-1!==g&&0>=g-(b+1))return d=0,!1;0<=g&&(g-(b+1)<d||0>d)&&(d=g-(b+1));0<=m&&(m-(b+1)<d||0>d)&&(d=m-(b+1))});return d},tg:function(a){a=a&&-1!=a?f(a):this.fa;a=a.is("li")?a.find("li").addBack():a.find("li");a.removeClass("oj-tree-last").addClass("oj-tree-node").addClass("oj-draggable").filter("li:last-child").addClass("oj-tree-last").end().filter(":has(li)").not(".oj-expanded").removeClass("oj-tree-leaf").addClass("oj-collapsed").attr("aria-expanded",
"false");a.not(".oj-expanded, .oj-collapsed").addClass("oj-tree-leaf").children("ul").remove();var b=this.options.types?this.options.types.attr:!1;a.find("li");var c,d;f.each(a,function(){d=f(this);c=d.find("\x3e ins");1<c.length&&(c=f(c[0]));d.hasClass("oj-tree-leaf")?(c.removeClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default"),c.addClass("oj-tree-icon")):(c.addClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default"),c.removeClass("oj-tree-node-icon"));
b&&d.attr(b)&&d.addClass("oj-tree-type")})},OE:function(a,b,c,d,e){a=a||-1;a=this.va(a);if(-1!==a&&!a.length)return!1;b="undefined"===typeof b?"last":b;var g=f("\x3cli /\x3e"),h;if(!e&&!this.Wk(a))return this.Xk(a,function(){this.OE(a,b,c,d,!0)}),!1;this.eo();"string"===typeof c&&(c={data:c});c||(c={});c.attr&&g.attr(c.attr);c.metadata&&g.data(c.metadata);c.state&&g.addClass("expanded"===c.state?"oj-expanded":"oj-collapsed");c.data||(c.data=void 0!==c.title?c.title:this.Au("labelNewNode"));f.isArray(c.data)||
(h=c.data,c.data=[],c.data.push(h));var k;f.each(c.data,function(a,b){h=f("\x3ca tabindex\x3d'-1' /\x3e");f.isFunction(b)&&(b=b.call(this,c));k=f("\x3cspan class\x3d'oj-tree-title'\x3e");"string"==typeof b?(k[0].textContent=b,h.attr("href","#")):(b.attr||(b.attr={}),b.attr.href||(b.attr.href="#"),k[0].textContent=b,b.language&&h.addClass(b.language));h.append(k);h.prepend("\x3cins class\x3d'oj-tree-icon oj-tree-node-icon oj-component-icon'\x3e\x26#160;\x3c/ins\x3e");!b.icon&&c.icon&&(b.icon=c.icon);
b.icon&&(-1===b.icon.indexOf("/")?h.children("ins").addClass(b.icon):h.children("ins").css("background","url('"+b.icon+"') center center no-repeat"));g.append(h)});g.prepend("\x3cins class\x3d'oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default'\x3e\x26#160;\x3c/ins\x3e");-1===a&&(a=this.ea,"before"===b&&(b="first"),"after"===b&&(b="last"));switch(b){case "before":a.before(g);h=this.Hi(a);break;case "after":a.after(g);h=this.Hi(a);break;case "inside":case "first":a.children("ul").length||
a.append("\x3cul /\x3e");a.children("ul").prepend(g);h=a;break;case "last":a.children("ul").length||a.append("\x3cul /\x3e");a.children("ul").append(g);h=a;break;default:a.children("ul").length||a.append("\x3cul /\x3e"),b||(b=0),h=a.children("ul").children("li").eq(b),h.length?h.before(g):a.children("ul").append(g),h=a}if(-1===h||h.get(0)===this.ea.get(0))h=-1;this.tg(h);this.tb({obj:g,parent:h},"create");d&&d.call(this,g);return g},ce:function(a,b,c){a=this.va(a);if(!a||!a.length)return!1;c=c||!1;
if(!a.hasClass("oj-disabled")&&!this.f.V.locked){if(!a.hasClass("oj-collapsed"))return b&&b.call(),!1;var d=this.tb({obj:a,func:"expand"},"before");if("boolean"!=typeof d||d){var d=c?0:this.TD,e=this;this.Wk(a)?(this.options.expandParents&&a.parentsUntil(".oj-tree",".oj-collapsed").each(function(){e.ce(this,!1,!0)}),a.removeClass("oj-collapsed").addClass("oj-expanded").attr("aria-expanded","true").children("a").removeClass("oj-tree-loading"),f(a.children()[0]).removeClass("oj-selected").addClass("oj-default"),
!c&&d?this.Lr(a,!1):this.KI(f(a.children("UL")[0]),a),b&&b.call()):(a.children("a").addClass("oj-tree-loading"),this.Xk(a,function(){e.ce(a,b,c)},b))}}},mF:function(a,b,c){var d=a?a:-1;(a=a?this.va(a):-1)&&-1!==a?d=a:a=this.fa;c?a=a.find("li.oj-collapsed"):(c=a,a=a.is(".oj-collapsed")?a.find("li.oj-collapsed").addBack():a.find("li.oj-collapsed"));var e=this;a.each(function(){var a=this;e.Wk(this)?e.ce(this,!1,!b):e.expand(this,function(){e.mF(a,b,c)},!b)});0===c.find("li.oj-collapsed").length&&this.tb({obj:a,
targ:d},"expandAll")},Lj:function(b,c,d){var e=this.f.V.Gl;if(0==e)return!1;b=this.va(b);if(-1==b||!b||!b.length||b.hasClass("oj-disabled")||this.f.V.locked)return!1;d&&"touchend"==d.type||(this.f.ui.Jp=!1);var f=this.isSelected(b);if(!f){var g=this.tb({obj:b,func:"select"},"before");if("boolean"==typeof g&&!g)return!1}var g=this.options.selection.slice(0),h=this.options,k=this.f.ui.ac.selectMultipleModifier,l=this.f.ui.ac.selectRangeModifier,m=this.f.ui.ac.disableSelectingChildren,k="on"==k||!1!==
k&&d&&a.C.ys(d),l=!1!==l&&d&&d[l+"Key"]&&this.f.ui.Gb&&this.f.ui.Gb[0]!==b[0]&&this.f.ui.Gb.parent()[0]===b.parent()[0],n=!0,q=this;if(c){if(m&&k&&(b.parentsUntil(".oj-tree","li").children("a.oj-selected").length||b.children("ul").find("a.oj-selected:eq(0)").length))return!1;n=!1;switch(!0){case l:this.f.ui.Gb.addClass("oj-tree-last-selected");b=b[b.index()<this.f.ui.Gb.index()?"nextUntil":"prevUntil"](".oj-tree-last-selected").addBack();-1==e||b.length<e?(this.f.ui.Gb.removeClass("oj-tree-last-selected"),
this.f.ui.selected.each(function(){this!==q.f.ui.Gb[0]&&q.Kq(this)}),f=!1,n=!0):n=!1;break;case this.f.ui.Jp&&-1==e:this.f.ui.Jp=!1;this.toggleSelect(b);n=!1;break;case f&&!k:if(!d)break;this.Cy();this.f.ui.gL||(f=!1);n=!0;break;case !f&&!k:d?this.f.ui.selected&&1==this.f.ui.selected.length?this.Kq(this.f.ui.selected):this.Cy(this.f.ui.selected):1===e?this.Kq(this.f.ui.selected):1<e&&this.Cy();n=!0;break;case f&&k:this.deselect(b);break;case !f&&k:if(-1==e||this.f.ui.selected.length+1<=e)n=!0}}c=
!1;n&&!f&&(l||(this.f.ui.Gb=b),b.children("a").addClass("oj-selected"),b.attr("aria-selected","true"),c=!0,h.selectedParentExpand&&b.parents(".oj-collapsed").each(function(){q.ce(this,!1,!0)}),this.f.ui.selected=this.f.ui.selected.add(b),this.RQ(b.eq(0)),this.f.V.Ip||this.fu("selection",g,null,d));return c},Kq:function(a){a=this.va(a);if(!a.length)return!1;a.hasClass("oj-disabled")||this.f.V.locked||!this.isSelected(a)||(a.children("a").removeClass("oj-selected"),a.removeAttr("aria-selected"),this.f.ui.selected=
this.f.ui.selected.not(a),this.f.ui.Gb&&this.f.ui.Gb.length&&this.f.ui.Gb.get(0)===a.get(0)&&(this.f.ui.Gb=this.f.ui.selected.eq(0)))},Cy:function(a){if(!this.f.V.locked&&(a=a?f(a).find("a.oj-selected").parent():this.ea.find("a.oj-selected").parent(),a.not(".oj-disabled"),0!==a.length)){var b=this;f.each(a,function(){b.Kq(this)})}},zda:function(a,b){if(this.f.V.locked)return null;if(a&&0<a.length){var c=this;f.each(a,function(a,d){d&&c.Lj(d,!0,b)})}},DS:function(a){a.preventDefault();a.currentTarget.blur();
f(a.currentTarget).hasClass("oj-tree-loading")||(this.yA(),this.Lj(a.currentTarget,!0,a)&&this.fa.focus());this.f.ui.Jp=!1},nQ:function(a,b){a=f(a);if(!a.hasClass("oj-disabled")&&!this.f.V.locked){var c=a.parent(),d=c.hasClass("oj-collapsed");if(c.hasClass("oj-expanded")||d)b?(a.addClass("oj-hover"),a.removeClass("oj-default"),a.removeClass("oj-selected")):(a.removeClass("oj-hover"),a.addClass("oj-default"))}},Bd:function(a){this.YU(a)},YU:function(a){var b=a?a:-1,c=this;this.ada();a||(a=-1);(a=this.va(a))?
b=a:a=-1;-1!==a?a.children("UL").remove():(this.fa.empty(),this.AU());this.Xk(a,function(){c.tb({obj:b},"refresh");c.pA()})},UH:function(a){this.saveSelected();this.YU(a)},after_open:function(a){this.tb({obj:a},"after_open",!0)},after_close:function(a){this.tb({obj:a},"after_close",!0)},Lca:function(){var a=this;this.f.V.cg.length&&f.each(this.f.V.cg,function(b,c){a.ce(c,!1,!0)});this.tb({},"reopen",!0)},gG:function(a){var b,c,d;a=a?f(a).find("a.oj-selected").parent():this.f.ui.selected;b=[];d=a.length;
for(c=0;c<d;c++)b.push(a[c]);return b},pI:function(a,b){a=this.va(a);if(!a.length)return!1;a=a.children("a:eq(0)");a=a.find("span:eq(0)");this.tb({obj:a,name:b},"set_text",!0);return a[0].textContent=b},QT:function(){0!==this.f.Oa.type&&-1!==this.f.Oa.type?this.Xk(-1,function(){this.ST();this.pA()}):(this.l4(),this.ST())},Xk:function(a){this.tb({obj:a},"load_node",!0)},Wk:function(){return!0},Iaa:function(a,b,c){var d=this;this.Naa(a,function(){d.tb({obj:d.va(a)},"load_node",!0);b.call(this)},c)},
saa:function(a){a=this.va(a);return-1===a||!a||a.is(".oj-expanded, .oj-tree-leaf")||0<a.children("ul").children("li").length},hca:function(a){(a=this.va(a))&&-1!==a&&a.removeData("oj-tree-children");return this.UH(a)},Kaa:function(a,b,c){var d=this;this.Maa(a,function(){d.tb({obj:d.va(a)},"load_node",!0);b.call(this)},c)},uaa:function(a){var b=this.options.data;a=this.va(a);return-1==a||!a||!b.ajax&&!this.f.Oa.UK&&!f.isFunction(b.data)||a.is(".oj-expanded, .oj-tree-leaf")||0<a.children("ul").children("li").length},
Jaa:function(a,b,c){var d=this;this.Laa(a,function(){d.tb({obj:d.va(a)},"load_node",!0);b.call(this)},c)},taa:function(a){var b=this.options.data,c=null,d=null;b&&(c=b.data||null,d=b.ajax||null);a=this.va(a);return-1==a||!a||!d&&!f.isFunction(c)||a.is(".oj-expanded, .oj-tree-leaf")||0<a.children("ul").children("li").size()},reselect:function(){var a=this,b=this.f.ui.Tw,b=f.map(f.makeArray(b),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,
".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});f.each(b,function(b,c){c&&"#"!==c&&a.select(c)});this.f.ui.selected=this.f.ui.selected.filter(function(){return this.parentNode});this.tb(null,"reselect",!0)},saveSelected:function(){var a=this;this.f.ui.Tw=[];this.f.ui.selected.each(function(){this.id&&a.f.ui.Tw.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.tb(this.f.ui.Tw,"savedselected",
!0)},rollback:function(a){a&&f.isArray(a)},get_rollback:function(){this.tb(null,"get_rollback",!0);return{Via:this.Jd(),Hg:this.ea.children("ul").clone(!0),Lia:this.data}},Naa:function(a,b){var c=this.fN(a&&-1!=a?a[0].id:a?a:-1,a);if(c.success&&c.Dw){var d=!a||-1===a,e=this.options.data;if(e.data&&!e.ajax||e.data&&e.ajax&&d)d&&((c=this.Lm(c.Dw,a))?(this.fa.empty().append(c.children()),this.tg()):this.f.Oa.Rf&&this.fa.empty()),b&&b.call(this);else if(!e.data&&e.ajax||e.data&&e.ajax&&!d)(c=this.Lm(c.Dw,
a))?(d?(d=this.fa,d.empty().append(c.children()),d.attr("role","tree").attr("tabindex","0").css("outline","none"),-1===this.f.V.Gl&&d.attr("aria-multiselectable",!0)):(a.append(c).children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading")),this.tg(a),b&&b.call(this)):d?this.f.Oa.Rf&&(this.fa.empty(),b&&b.call(this)):(a.children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading"),e.correct_state&&(this.qo(a),b&&b.call(this)))}},
fN:function(a,b){var c=[],d=this.NW,e,g={},h={success:!1,Dw:null};-1==a&&(a=null,g.start=0);e=d.nf(a);0<e&&(g.count=e,d.Rd(a,g,{success:f.proxy(function(a){for(var e=a.R(),f,g=0;g<e;g++){b={};(f=a.getData(g))&&(b.attr=f);b.title=a.tf[g].title;f.aja&&(b.metadata=a.tf[g].metadata);var k=b.attr.id;f=d.nf(k);0<f&&(f=this.fN(k,b),b.children=f.Dw);c.push(b)}h.success=!0;h.Dw=c},this),error:function(){h.success=!1}}));return h},ica:function(a){a=this.va(a);if(!this.f.V.locked){var b=!a||-1!==a||!a.length;
if(b||!a.hasClass("oj-disabled")){var c=this.options.data.json;!b&&this.f.Oa.Hs&&(f.isFunction(c.data)||c.ajax)&&a.removeData("oj-tree-children");return this.UH(a)}}},Maa:function(a,b,c){function d(){}function e(){}var g=this.Nk().data,h=g&&g.data||null,k=g&&g.ajax||null;!g||h||k||(h=g);if((a=this.va(a))&&-1!==a&&(this.f.Oa.UK||this.f.Oa.Hs)&&!a.is(".oj-expanded, .oj-tree-leaf")&&0===a.children("ul").children("li").length&&a.data("oj-tree-children")){if(g=this.Lm(a.data("oj-tree-children"),a))a.append(g),
this.f.Oa.Hs||a.removeData("oj-tree-children");this.tg(a);b&&b.call(this)}else{if(a&&-1!==a){if(a.data("oj-tree-is-loading"))return;a.data("oj-tree-is-loading",!0)}switch(!0){case !h&&!k:throw"ojTree - neither data nor ajax settings supplied.";case f.isFunction(h):h.call(this,a,f.proxy(function(d){(d=this.Lm(d,a))?(-1!==a&&a?(a.append(d).children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading")):this.fa.empty().append(d.children()),this.tg(a),b&&b.call(this)):
(-1!==a&&a?(a.children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading"),this.f.Oa.Rf&&this.qo(a)):this.f.Oa.Rf&&this.fa.empty(),c&&c.call(this))},this));break;case !!h&&!k||!!h&&!!k&&(!a||-1===a):a&&-1!=a||((g=this.Lm(h,a))?(this.fa.empty().append(g.children()),this.tg()):this.f.Oa.Rf&&this.fa.empty());b&&b.call(this);break;case !h&&!!k||!!h&&!!k&&a&&-1!==a:e=function(b,d,e){var f=this.Nk().data.ajax.error;f&&f.call(this,d,e,b);-1!=a&&a.length?(a.children("a.oj-tree-loading").removeClass("oj-tree-loading"),
a.removeData("oj-tree-is-loading"),"success"===d&&this.f.Oa.Rf&&this.qo(a)):("error"==d||"success"===d&&this.f.Oa.Rf)&&this.fa.empty();c&&c.call(this)},d=function(c,d,g){var h=this.Nk().data.ajax.success;h&&(c=h.call(this,c,d,g)||c);if("string"==typeof c){d=c.replace(/^[\s\n]+$/,"");try{d=f.parseJSON(d)}catch(k){d=null}if(!d)return e.call(this,g,"Bad JSON","")}(c=this.Lm(c,a))?(-1!==a&&a?(a.append(c).children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading")):
(g=this.fa,g.empty().append(c.children()),g.attr("role","tree").attr("tabindex","0").css("outline","none"),-1===this.f.V.Gl&&g.attr("aria-multiselectable",!0)),this.tg(a),b&&b.call(this)):-1!==a&&a?(a.children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading"),this.f.Oa.Rf&&(this.qo(a),b&&b.call(this))):this.f.Oa.Rf&&(this.fa.empty(),b&&b.call(this))},g.ajax.context=this,g.ajax.error=e,g.ajax.success=d,g.dataType||(g.ajax.dataType="json"),f.isFunction(g.ajax.url)&&
(g.ajax.url=g.ajax.url.call(this,a)),f.isFunction(g.ajax.data)&&(g.ajax.data=g.ajax.data.call(this,a)),f.ajax(g.ajax)}}},Lm:function(a,b,c){var d=!1,e,g,h,k;if(!a)return d;this.f.Oa.Hs&&b&&-1!==b&&b.data("oj-tree-children",d);if("string"==typeof a)try{a=f.parseJSON(a)}catch(l){a=[]}if(f.isArray(a)){d=f("\x3cul\x3e");if(!a.length)return!1;g=0;for(h=a.length;g<h;g++)e=this.Lm(a[g],b,!0),e.length&&(d=d.append(e));d=d.children()}else{"string"==typeof a&&(a={data:a});k="string"==typeof a.title?a.title:
" ";d=f("\x3cli role\x3d'treeitem' /\x3e");a.attr&&(this.f.types.js&&!a.attr.type&&(a.attr.type="oj-tree-deftype",d.addClass("oj-tree-type")),d.attr(a.attr));a.metadata&&d.data(a.metadata);(a.state||a.children&&0===a.children.length)&&d.addClass("expanded"===a.state?"oj-expanded":"oj-collapsed");a.data||(a.data={dummy:0});var m=!1,n;e=f("\x3ca tabindex\x3d'-1' /\x3e");f.each(a.data,function(b,c){f.isFunction(c)&&(c=c.call(this,a));"string"!=typeof c&&("attr"==b?e.attr(c):"style"==b&&e.css(c),"language"==
b&&e.addClass(c));m||(n=f("\x3cspan class\x3d'oj-tree-title'\x3e"),n[0].textContent=k,e.prepend("\x3cins class\x3d'oj-tree-icon oj-tree-node-icon oj-component-icon'\x3e\x26#160;\x3c/ins\x3e",n),m=!0);!c.icon&&a.icon&&(c.icon=a.icon);c.icon&&(-1===c.icon.indexOf("/")?e.children("ins").addClass(c.icon):e.children("ins").css("background","url('"+c.icon+"') center center no-repeat"))});d.append(e);d.prepend("\x3cins class\x3d'oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default'\x3e\x26#160;\x3c/ins\x3e");
a.children&&(this.f.Oa.UK&&"expanded"!==a.state?d.addClass("oj-collapsed").attr("aria-expanded","false").data("oj-tree-children",a.children):(this.f.Oa.Hs&&d.data("oj-tree-children",a.children),f.isArray(a.children)&&a.children.length&&(e=this.Lm(a.children,b,!0),e.length&&(b=f("\x3cul role\x3d'group' /\x3e"),b.append(e),d.append(b)))))}c||(c=f("\x3cul /\x3e"),c.append(d),d=c);return d},qo:function(a){a=this.va(a);if(!a||-1===a)return!1;a.removeClass("oj-collapsed oj-expanded").removeAttr("aria-expanded").addClass("oj-tree-leaf").children("ul").remove();
a.find("ins:first-child").removeClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default").addClass("oj-tree-icon");this.tb({obj:a},"correct_state",!0)},ST:function(){this.tb(null,"loaded")},Laa:function(a,b,c){function d(){}function e(){}var g=this.Nk().data,h=g&&g.data||null,k=g&&g.ajax||null;if((a=this.va(a))&&-1!==a){if(a.data("oj-tree-is-loading"))return;a.data("oj-tree-is-loading",!0)}switch(!0){case !h&&!k&&g&&"string"===typeof g:this.PT(g,a,b,c);break;case f.isFunction(h):h.call(this,
a,f.proxy(function(d){this.PT(d,a,b,c)},this));break;case !h&&!k:a&&-1!=a||(this.fa.empty().append(this.f.html.hB).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'oj-tree-icon' \x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass("oj-tree-node-icon").addClass("oj-tree-icon"),this.fa.find("li").children("ins:first-child").addClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default"),
this.Jz(this.fa),this.f.types.js&&this.Ft(this.fa),this.tg(),this.fa.find("ul").attr("role","group"),this.fa.find("li").attr("role","treeitem"),this.fa.find("a").attr("tabindex",-1));b&&b.call(this);break;case !!h&&!k||!!h&&!!k&&(!a||-1===a):a&&-1!=a||(g=f(h),g.is("ul")||(g=f("\x3cul /\x3e").append(g)),this.fa.empty().append(g.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'oj-tree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass("oj-tree-node-icon").addClass("oj-tree-icon"),
this.fa.find("li.oj-tree-leaf ins:first-child").removeClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default").removeClass("oj-tree-node-icon").addClass("oj-tree-icon"),this.Jz(this.fa),this.f.types.js&&this.Ft(this.fa),this.tg(),this.fa.find("ul").attr("role","group"),this.fa.find("li").attr("role","treeitem"),this.fa.find("a").attr("tabindex","-1"));b&&b.call(this);break;case !h&&!!k||!!h&&!!k&&a&&-1!==a:a=this.va(a),e=function(b,d,e){var f=this.Nk().data.ajax.error;
f&&f.call(this,b,d,e);-1!=a&&a.length?(a.children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading"),"success"===d&&this.f.Oa.Rf&&this.qo(a)):"success"===d&&this.f.Oa.Rf&&this.fa.empty();c&&c.call(this)},d=function(c,d,g){var h=this.Nk().data.ajax.success;h&&(c=h.call(this,c,d,g)||c);if(""===c||c&&c.toString&&""===c.toString().replace(/^[\s\n]+$/,""))return e.call(this,g,d,"");if(c){c=f(c);c.is("ul")||(c=f("\x3cul /\x3e").append(c));-1!=a&&a?(a.children("a.oj-tree-loading").removeClass("oj-tree-loading"),
this.vca(a),a.append(c).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'oj-tree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass("oj-tree-node-icon").addClass("oj-tree-icon"),a.removeData("oj-tree-is-loading"),a.find("li.oj-tree-leaf ins:first-child").removeClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default").removeClass("oj-tree-node-icon").addClass("oj-tree-icon"),
c=a):(this.fa.empty().append(c.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'oj-tree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass("oj-tree-node-icon").addClass("oj-tree-icon"),this.fa.find("li.oj-tree-leaf ins:first-child").removeClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default").removeClass("oj-tree-node-icon").addClass("oj-tree-icon"),
c=this.fa);this.B9(c);this.Jz(c);d=c.children("UL");if(1<=d.length){d=d.first().find("span.oj-tree-title");var k=this;f.each(d,function(){this.textContent=k.Iy(this.textContent)})}this.f.types.js&&c&&this.Ft(this.fa);this.tg(a);b&&b.call(this)}else a&&-1!==a?(a.children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading"),this.f.Oa.Rf&&(this.qo(a),b&&b.call(this))):this.f.Oa.Rf&&(this.fa.empty(),b&&b.call(this)),this.fa.find("ul").attr("role","group"),this.fa.find("li").attr("role",
"treeitem")},g.ajax.context=this,g.ajax.error=e,g.ajax.success=d,g.ajax.dataType||(g.ajax.dataType="html"),f.isFunction(g.ajax.url)&&(g.ajax.url=g.ajax.url.call(this,a)),f.isFunction(g.ajax.data)&&(g.ajax.data=g.ajax.data.call(this,a)),f.ajax(g.ajax)}},B9:function(a){a=a.find(a.is("ul")?"li ul":"ul").filter(function(){return!this.firstChild||0==this.childNodes.length||1==this.childNodes.length&&3==this.firstChild.nodeType});f.each(a,function(){f(this).closest("li").addClass("oj-collapsed")})},vca:function(a){a=
a.find("ul").filter(function(){return!this.firstChild||0==this.childNodes.length||1==this.childNodes.length&&3==this.firstChild.nodeType});0<a.length&&a.remove()},PT:function(a,b,c){if(a&&""!==a&&a.toString&&""!==a.toString().replace(/^[\s\n]+$/,"")){a=f(a);a.is("ul")||(a=f("\x3cul /\x3e").append(a));-1!=b&&b?(b.children("a.oj-tree-loading").removeClass("oj-tree-loading"),b.append(a).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'oj-tree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass("oj-tree-node-icon").addClass("oj-tree-icon"),
b.removeData("oj-tree-is-loading"),a=b,this.Ft(this.vn)):(this.fa.empty().append(a.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'oj-tree-icon oj-tree-disclosure-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass("oj-tree-node-icon").addClass("oj-tree-icon"),this.fa.find("li.oj-tree-leaf ins:first-child").removeClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default").removeClass("oj-tree-node-icon").addClass("oj-tree-icon"),
a=this.fa,this.Ft(this.fa));a&&this.Jz(a);a=a.children("UL");if(1<=a.length){a=a.first().find("span.oj-tree-title");var d=this;f.each(a,function(){this.textContent=d.Iy(this.textContent)})}this.tg(b);c&&c.call(this)}else b&&-1!==b?(b.children("a.oj-tree-loading").removeClass("oj-tree-loading"),b.removeData("oj-tree-is-loading"),this.f.Oa.Rf&&(this.qo(b),c&&c.call(this))):this.f.Oa.Rf&&(this.fa.empty(),c&&c.call(this))},Jz:function(a){f.each(a.find("li a"),function(a,b){var c=b.innerHTML,c=c.replace("ins\x3e",
"ins\x3e\x3cspan class\x3d'oj-tree-title'\x3e");b.innerHTML=c+"\x3c/span\x3e"})},Ft:function(a){var b,c;this.f.types.js&&(c=(b=this.options.types)?b.attr:this.f.types.ac.attr,f.each(a.find("li"),function(a,b){b=f(b);b.attr(c)||b.attr(c,"oj-tree-deftype").addClass("oj-tree-type")}))},Gy:function(){var a=this.f.dnd.Cb;if(a.xa&&a.xa.length){this.f.dnd.off=a.xa.offset();this.Em&&(this.f.dnd.off.right=this.f.dnd.off.left+a.xa.width()-a.xa.find("\x3ea").width()-14);this.f.dnd.L_=a.xa.find("a").width();
if(this.f.dnd.rB)return a=this.options.dnd.drag_check.call(this,{o:a.wa,r:a.xa}),this.f.dnd.after=a.after,this.f.dnd.before=a.before,this.f.dnd.inside=a.inside,this.f.dnd.Mw=!0,this.dF();this.Br(a.wa,a.xa,"before");this.f.dnd.before=this.check_move();this.Br(a.wa,a.xa,"after");this.f.dnd.after=this.check_move();this.Wk(a.xa)?(this.Br(a.wa,a.xa,"inside"),this.f.dnd.inside=this.check_move()):this.f.dnd.inside=!1;this.f.dnd.Mw=!0;return this.dF()}},dF:function(){var a=this.f.dnd,b=!1,c;if(a.Mw){var b=
["before","inside","after"],d=!1,e=a.dc,g=a.Cb,b=a.Gc<this.f.V.$h/3?["before","inside","after"]:a.Gc<=2*this.f.V.$h/3?a.Gc<this.f.V.$h/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];f.each(b,f.proxy(function(a,b){if(this.f.dnd[b])return e.helper.children("ins").removeClass("oj-tree-drop-invalid").addClass("oj-tree-drop-ok"),this.ea.removeClass("oj-invalid-drop"),d=b,!1},this));!1===d?(e.helper.children("ins").removeClass("oj-tree-drop-ok").addClass("oj-tree-drop-invalid"),
g.xa.addClass("oj-invalid-drop")):g.xa.removeClass("oj-invalid-drop").addClass("oj-valid-drop");c=this.Em?this.f.dnd.off.right-18:this.f.dnd.off.left+5;b=!this.isLeaf(g.xa);a=this.Em?c+this.f.dnd.L_+18:c;c=this.Em?a-this.f.dnd.LZ:c+8;switch(d){case "before":b=this.f.dnd.off.top-3;g.bd.css({left:a+"px",top:b-7+"px"}).show();g.bc&&g.bc.css({left:c+"px",top:b+"px"}).show();break;case "after":b=this.f.dnd.off.top+this.f.V.$h-3;g.bd.css({left:a+"px",top:b-2+"px"}).show();g.bc&&g.bc.css({left:c+"px",top:b+
6+"px"}).show();break;case "inside":g.bd.css({left:a+(this.Em?b?-4:0:4)+"px",top:this.f.dnd.off.top+this.f.V.$h/2-8+"px"}).show();g.bc&&g.bc.hide();break;default:g.bd.hide(),g.bc&&g.bc.hide()}return g.uK=d}},cF:function(a){var b=this.f.dnd,c=b.Cb;b.NB&&(clearTimeout(b.NB),b.NB=!1);b.Mw=!1;c.xa=this.va(a);a=this.options.dnd;var d=a.check_timeout;d?(b.hj&&clearTimeout(b.hj),b.hj=setTimeout(f.proxy(this.Gy,this),d)):this.Gy();(a=a.open_timeout)?(b.ei&&clearTimeout(b.ei),c.xa&&c.xa.length&&c.xa.hasClass("oj-collapsed")&&
(b.ei=setTimeout(f.proxy(this.pQ,this),a))):c.xa&&c.xa.length&&c.xa.hasClass("oj-collapsed")&&this.pQ()},B6:function(a){var b=this.f.dnd,c=this.f.dnd.Cb;b.after=!1;b.before=!1;b.inside=!1;this.f.dnd.dc.helper.children("ins").removeClass("oj-tree-drop-ok").addClass("oj-tree-drop-invalid");this.ea.addClass("oj-invalid-drop");c.wa&&c.wa.removeClass("oj-valid-drop").removeClass("oj-invalid-drop");c.xa&&c.xa.removeClass("oj-valid-drop").removeClass("oj-invalid-drop");c.bd.hide();c.bc&&c.bc.hide();c.xa&&
c.xa[0]===a.target.parentNode&&(b.hj&&(clearTimeout(b.hj),b.hj=!1),b.ei&&(clearTimeout(b.ei),b.ei=!1))},pQ:function(){var a=this.f.dnd.Cb;this.f.dnd.ei=!1;this.expand(a.xa,f.proxy(this.Gy,this),!0)},A6:function(a){var b=this.f.dnd,c=this.f.dnd.Cb;b.rB?(b.after||b.before||b.inside)&&this.options.dnd.drag_finish.call(this,{o:c.wa,r:c.xa,p:c.uK}):(this.Gy(),this.wr(c.wa,c.xa,c.uK,a[this.options.dnd.copy_modifier+"Key"]));c.wa&&c.wa.removeClass("oj-drag").removeClass("oj-invalid-drop").removeClass("oj-valid-drop");
c.wa=!1;c.xa=!1;c.bd.hide();c.bc&&c.bc.hide()},Vda:function(a,b){var c=this.f.dnd,d=this.f.dnd.Cb;d.wa=this.va(a);if(!d.wa.hasClass("oj-disabled")&&!this.f.V.locked){this.f.ui&&this.isSelected(d.wa)&&(d.wa=this.va(null,!0));var e=1<d.wa.length?this.Au("labelMultiSelection"):this.getText(d.wa),f=this.ea,e=e.replace(/</ig,"\x26lt;").replace(/>/ig,"\x26gt;");d.wa.addClass("oj-drag");this.zQ(b,{rh:!0,vn:d.wa},"\x3cspan\x3e"+e+"\x3c/span\x3e");this.f.gb&&(d.bd&&d.bd.addClass("oj-tree-"+this.f.gb.di),c.dc.helper.addClass("oj-tree-dnd-helper oj-tree-"+
this.f.gb.di));c.bs=f.offset();c.AJ=parseInt(f.width(),10);c.ch=parseInt(f.height(),10);c.ta=!0}},zQ:function(a,b,c){var d=this.f.dnd.dc;d.qh&&this.hF();try{a.currentTarget.unselectable="on",a.currentTarget.onselectstart=function(){return!1},a.currentTarget.style&&(a.currentTarget.style.MozUserSelect="none")}catch(e){}d.gK=a.pageX;d.hK=a.pageY;d.Gd=b;d.qK=!0;d.helper=f("\x3cdiv class\x3d'oj-tree-title oj-drag' style\x3d'top:-2000px' /\x3e").html(c);f(document).bind("mousemove",this.uQ.bind(this));
f(document).bind("mouseup",this.hF.bind(this));return!1},uQ:function(a){var b=this.f.dnd.dc,c=this.f.dnd.Cb;if(b.qK){if(!b.qh)if(5<Math.abs(a.pageX-b.gK)||5<Math.abs(a.pageY-b.hK))b.helper.appendTo("body"),b.qh=!0,f(document).triggerHandler("drag_start.ojtreeu",[{event:a,data:b.Gd}]);else return;if("mousemove"===a.type){var d=f(document),e=d.scrollTop(),d=d.scrollLeft();20>a.pageY-e?(c.te&&"down"===c.ks&&(clearInterval(c.te),c.te=void 0),c.te||(c.ks="up",c.te=setInterval(function(){f(document).scrollTop(f(document).scrollTop()-
b.An)},150))):c.te&&"up"===c.ks&&(clearInterval(c.te),c.te=void 0);20>f(window).height()-(a.pageY-e)?(c.te&&"up"===c.ks&&(clearInterval(c.te),c.te=void 0),c.te||(c.ks="down",c.te=setInterval(function(){f(document).scrollTop(Number(f(document).scrollTop())+b.An)},150))):c.te&&"down"===c.ks&&(clearInterval(c.te),c.te=void 0);20>a.pageX-d?(c.re&&"right"===c.ls&&(clearInterval(c.re),c.re=void 0),c.re||(c.ls="left",c.re=setInterval(function(){f(document).scrollLeft(f(document).scrollLeft()-b.An)},150))):
c.re&&"left"===c.ls&&(clearInterval(c.re),c.re=void 0);20>f(window).width()-(a.pageX-d)?(c.re&&"left"===c.ls&&(clearInterval(c.re),c.re=void 0),c.re||(c.ls="right",c.re=setInterval(function(){f(document).scrollLeft(Number(f(document).scrollLeft())+b.An)},150))):c.re&&"right"===c.ls&&(clearInterval(c.re),c.re=void 0)}e=b.sga;this.Em&&c.wa&&(c=c.wa.find("span.oj-tree-title:first"))&&0<c.length&&(e=-e-c[0].offsetWidth);b.helper.css({left:a.pageX+e+"px",top:a.pageY+b.tga+"px"});f(document).triggerHandler("drag.ojtreeu",
[{event:a,data:b.Gd}])}},hF:function(a){var b=this.f.dnd.Cb,c=this.f.dnd.dc;b.re&&clearInterval(b.re);b.te&&clearInterval(b.te);b.wa&&b.wa.removeClass("oj-drag").removeClass("oj-invalid-drop").removeClass("oj-valid-drop");f(document).unbind("mousemove",this.uQ.bind(this));f(document).unbind("mouseup",this.hF.bind(this));f(document).triggerHandler("drag_stop.ojtreeu",[{event:a?a:{},data:c.Gd}]);c.helper.remove();c.gK=0;c.hK=0;c.Gd={};c.qK=!1;c.qh=!1;this.ea.removeClass("oj-invalid-drop")},ada:function(){var a=
this;this.f.V.cg=[];this.fa.find("li.oj-expanded").each(function(){this.id&&a.f.V.cg.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))})},pA:function(a){var b=this,c=!0,d=[],e=[],g,h;a||(this.f.V.WK=!1,this.f.V.eha=!0);this.laa()&&(this.f.V.cg=[],this.fa.find("li.oj-collapsed").each(function(){h="#"+f(this).attr("id");b.isExpanded(h)||b.f.V.cg.push(h)}));this.f.V.cg=f.map(f.makeArray(this.f.V.cg),
function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.f.V.gk=f.map(f.makeArray(this.f.V.gk),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.f.V.cg.length&&(this.f.V.gk=this.f.V.gk.concat(this.f.V.cg),this.f.V.gk=this.f.V.gk.reduce(function(a,b){0>a.indexOf(b)&&a.push(b);return a},
[]));this.f.V.gk.length&&(f.each(this.f.V.gk,function(a,c){if("#"==c)return!0;g=b.ea.find(c);g.length?b.isExpanded(c)||d.push(c):e.push(c)}),d.length&&(this.f.V.gk=e,f.each(d,function(a,d){b.Wk(d)||(b.Xk(d,function(){b.pA(!0)},function(){b.pA(!0)}),c=!1)})));this.f.V.cg.length&&f.each(this.f.V.cg,function(a,c){b.isExpanded(c)||b.ce(c,!1,!0)});c&&(this.f.V.WK&&clearTimeout(this.f.V.WK),this.f.V.WK=setTimeout(function(){b.tb({},"reload_nodes",!0)},50),this.f.V.eha=!1,this.Lca())},setTheme:function(a,
b){if(!a)return!1;b||(b=this.f.gb.Iv+a+"/style.css");-1==f.inArray(b,this.f.gb.M_)&&(e({url:b}),this.f.gb.M_.push(b));this.f.gb.di!=a&&(this.ea.removeClass("oj-tree-"+this.f.gb.di),this.f.gb.di=a);this.ea.addClass("oj-tree-"+a);this.f.gb.cw?this.lW():this.KS();this.f.gb.icons?this.sI():this.TG()},isIcons:function(){return this.f.gb.icons},sI:function(){this.f.gb.icons=!0;this.ea.children("ul").removeClass("oj-tree-no-icons")},TG:function(){this.f.gb.icons=!1;this.ea.children("ul").addClass("oj-tree-no-icons")},
toggleIcons:function(){},Q6:function(){this.f.keys.Kfa=!0},M$:function(){this.E$();this.D$();this.aT(!0);this.O$();this.cT();this.C$();this.Q$();this.L$();this.bT();this.P$();this.F$();this.Am()},tb:function(a,b,c){if(b&&"string"===f.type(b)&&(!0!==this.f.V.locked||"unlock"===b||"isLocked"===b||"lock"===b)){var d,e=Array.prototype.slice.call(arguments);d=this.ea;var g="before"===b,h=c?!1:!0;h||(b="_tree"+b);var k={};k.item=a?a.obj:void 0;k.inst=d;g?(d=a.func,k.func=d,k.args=e,"rename"===d&&(k.title=
a.title,k.prevTitle=a.prevTitle)):h&&("move"==b?(k.position=a.Bl,k.reference=a.xa,k.data=a):"rename"==b?(k.title=a.title,k.prevTitle=a.prevTitle):"remove"==b?(k.parent=a.parent,k.prev=a.prev):"delete"==b?(k.prev=a.prev,k.parent=a.parent):"expandAll"===b||"collapseAll"===b||"deselectAll"===b?k.targ=a.targ:"loaded"===b&&(k.item=-1));if(h){if(e=this._trigger(b,new f.Event("oj"+b),k),g)return"undefined"!=typeof e&&(e=e?!0:!1),e}else this.ea.trigger(b,k)}},fu:function(a,b,c,d){"selection"===a&&(null==
c&&(c=this.gG()),this.uP(b,c)||this.option(a,c,{_context:{originalEvent:d,mb:!0},changed:!0}))},eo:function(){return this.get_rollback()},fh:function(){this.Em&&this.ea.addClass("oj-tree-rtl").css("direction","rtl");this.ea.html("\x3cul role\x3d'tree' tabindex\x3d'0' class\x3d'oj-tree-list' style\x3d'outline:none'"+(-1===this.f.V.Gl?" aria-multiselectable\x3d'true'":"")+"\x3e\x3cli class\x3d'oj-tree-last oj-tree-leaf'\x3e\x3cins class\x3d'oj-tree-icon'\x3e\x26#160;\x3c/ins\x3e\x3ca class\x3d'oj-tree-loading' href\x3d'#'\x3e\x3cins class\x3d'oj-tree-icon'\x3e\x26#160;\x3c/ins\x3e"+
this.Au("stateLoading")+"\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e");this.fa=this.ea.children("ul:eq(0)");this.ea.data("oj-tree-instance-id",this.Jd());this.f.V.$h=this.fa.find("li.oj-collapsed, li.oj-tree-leaf").eq(0).height()||18;this.ET&&this.ea.delegate(".oj-tree-list ins.oj-tree-disclosure-icon","touchend.ojtree",f.proxy(function(a){a.preventDefault();a=f(a.target);this.toggleExpand(a)},this));this.ea.delegate(".oj-tree-list ins.oj-tree-disclosure-icon","click.ojtree",f.proxy(function(a){a=f(a.target);
this.toggleExpand(a)},this)).delegate(".oj-tree-list ins.oj-tree-disclosure-icon","mousedown",f.proxy(function(a){this.f.ui.CJ=!0;f(a.target).removeClass("oj-default").removeClass("oj-hover").addClass("oj-selected")},this)).delegate(".oj-tree-list ins.oj-tree-disclosure-icon","mouseup",f.proxy(function(a){f(a.target).removeClass("oj-selected").addClass("oj-default")},this)).bind("mousedown.ojtree",f.proxy(function(){this.yA()},this)).bind("dblclick.ojtree",function(){var a;if(document.selection&&
document.selection.empty)document.selection.empty();else if(window.getSelection){a=window.getSelection();try{a.removeAllRanges(),a.collapse(document.getElementsByTagName("body")[0],0)}catch(b){}}});this.fa.focus(f.proxy(function(){if(this.f.ui.CJ)this.f.ui.CJ=!1;else{this.f.ui.Xi=!0;var a;this.f.ui.$i?(this.f.ui.zb=this.f.ui.$i,a=this.f.ui.zb):this.f.ui.Gb&&0<this.f.ui.Gb.length?(this.f.ui.zb=this.f.ui.Gb,a=this.f.ui.zb):a=this.fa.find("li:first");a&&(this.hover(a),this.f.ui.$i=null,this.fa.find("a.oj-selected").removeClass("oj-tree-inactive"))}},
this)).blur(f.proxy(function(){this.f.ui.Xi=!1;this.f.ui.$i=this.f.ui.zb;this.f.ui.$i&&this.dehover(this.f.ui.zb);this.fa.find("a.oj-selected").addClass("oj-tree-inactive")},this));this.tb({},"init",!0);this.QT();this.f.menu.sd&&this.gm();d({IS:this.qr,KV:this.fa,Jv:this});this.Q6()},C$:function(){this.f.V.locked=!1;this.ea.addClass("oj-tree oj-tree-"+this.Jd());this.ea.css("outline","none");this.ea.css("MozUserSelect","none");this.ea.css("WebkitTouchCallout","none");this.ea.css("WebkitUserSelect",
"none");this.ea.css("WebkitTapHighlightColor","rgba(0,0,0,0)")},Q$:function(){this.f.ui.selected=f();this.f.ui.Gb=!1;this.f.ui.zb=null;var a=this.options.selection;a&&"array"===f.type(a)&&0<a.length&&(this.f.ui.Tw=a,this.options.selection=[]);this.ET&&this.ea.delegate(".oj-tree-list a","touchend.ojtree",f.proxy(function(a){this.f.ui.Jp=!0;this.DS(a);f(a.currentTarget).hasClass("oj-tree-loading")||this.dehover()},this));this.ea.delegate(".oj-tree-list a","click.ojtree",f.proxy(function(a){this.f.ui.Jp=
!1;this.DS(a)},this)).delegate(".oj-tree-list a","mouseenter.ojtree",f.proxy(function(a){f(a.currentTarget).hasClass("oj-tree-loading")||this.hover(a.target)},this)).delegate(".oj-tree-list a","mouseleave.ojtree",f.proxy(function(a){f(a.currentTarget).hasClass("oj-tree-loading")||this.dehover(a.target)},this)).delegate(".oj-tree-list .oj-tree-disclosure-icon","mouseenter.ojtree",f.proxy(function(a){f(a.currentTarget).hasClass("oj-tree-loading")||this.nQ(a.target,!0)},this)).delegate(".oj-tree-list .oj-tree-disclosure-icon",
"mouseleave.ojtree",f.proxy(function(a){f(a.currentTarget).hasClass("oj-tree-loading")||this.nQ(a.target,!1)},this)).bind("_treereopen",f.proxy(function(){this.reselect()},this)).bind("_treeget_rollback",f.proxy(function(){this.dehover();this.saveSelected()},this)).bind("ojcollapse",f.proxy(function(a,b){var c=this.va(b.item),d=c&&c.length?c.children("ul").find("a.oj-selected"):f();!1!==this.options.selectedParentCollapse&&d.length&&d.each(function(){this.deselect(this);"selectParent"===this.options.selectedParentCollapse&&
this.select(c)})},this)).bind("ojremove",f.proxy(function(a,b){var c=this.options.selectPrevOnDelete,d=this.va(b.item),d=d&&d.length?d.find("a.oj-selected"):[],e=this,f;d.each(function(){e.deselect(this);e.f.ui.$i&&(f=e.va(this))&&e.f.ui.$i.attr("id")==f.attr("id")&&(e.f.ui.$i=null)});c&&d.length&&b.prev&&b.prev.each(function(){if(this.parentNode)return e.select(this),!1})},this)).bind("ojmove",f.proxy(function(a,b){var c=b.data,d=c.pB;d&&c.MK&&(c.MK.find("a.oj-selected").removeClass("oj-selected"),
c.MK.removeAttr("aria-selected"));c.ek===c.zn||d||(d=c.ek.f.ui,d.$i&&(c.wa.attr("id")==d.$i.attr("id")&&(d.$i=null),d.Gb&&c.wa.attr("id")==d.Gb.attr("id")&&(d.Gb=null)))},this))},bT:function(){this.N$();this.I$();this.H$()},N$:function(){1===this.f.Oa.type&&(this.NW=this.options.data||null,this.Xk=this.Iaa,this.Wk=this.saa,this.Bd=this.hca)},I$:function(){3===this.f.Oa.type&&(this.f.Oa.Hs&&this.ea.bind("_treeafter_close",function(a,b){b.item.children("ul").remove()}),this.Xk=this.Kaa,this.Wk=this.uaa,
this.Bd=this.ica)},H$:function(){4===this.f.Oa.type&&(this.AU(),this.Xk=this.Jaa,this.Wk=this.taa,this.Bd=this.UH)},AU:function(){this.f.html.eC&&(this.f.html.Cs||(this.f.html.Cs=this.ea.find(" \x3e ul"),this.f.html.LB=f("\x3cdiv id\x3d'oj-tree-existing-markup-"+this.Jd()+"' style\x3d'display:none'\x3e").append(this.f.html.Cs),this.ea.after(this.f.html.LB)),this.f.html.JZ=this.f.html.Cs.find(" \x3e li"),this.f.html.hB=this.f.html.JZ.clone(!0),this.f.html.hB.find("li").addBack().contents().filter(function(){return 3==
this.nodeType}).remove())},L$:function(){!1===this.f.gb.Iv&&f("script").each(function(){if(this.src.toString().match(/jquery\.oj-tree[^\/]*?\.js(\?.*)?$/))return this.f.gb.Iv=this.src.toString().replace(/jquery\.oj-tree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===this.f.gb.Iv&&(this.f.gb.Iv="themes/");this.ea.bind("_treeinit",f.proxy(function(){var a=this.options;this.f.gb.cw=a.dots;this.f.gb.icons=a.icons;this.setTheme(this.f.gb.di,this.f.gb.url)},this)).bind("ojloaded",f.proxy(function(){this.f.gb.cw?
this.lW():this.KS();this.f.gb.icons?this.sI():this.TG()},this))},P$:function(){var a=this.options.types;a&&this.ea.bind("_treeinit",f.proxy(function(){var b=f.extend(!0,{},a.types),c=a.attr||this.f.types.ac.attr,d="",g=this;f.each(b,function(a,b){f.each(b,function(a){/^(maxDepth|maxChildren|icon|validChildren)$/.test(a)||g.f.types.vX.push(a)});var e=typeof b.icon;if("undefined"===e){e=typeof b.image;if("boolean"===e&&!b.image)b.image="ojt$none";else if(!b.image&&!b.position)return!0;b.icon={};b.image&&
(b.icon.image=b.image,delete b.image);void 0!==b.position&&(b.icon.position=b.position,delete b.position)}if(b.icon.image||b.icon.position)"default"==a?(g.f.types.js=!0,d+=".oj-tree-"+g.Jd()+" .oj-tree-list li.oj-tree-type a \x3e .oj-tree-node-icon { ",d+=g.rO(b,d),d+="} ",d+=".oj-tree-"+g.Jd()+" .oj-tree-list li["+c+'\x3d"oj-tree-deftype"].oj-tree-type \x3e a ins.oj-tree-node-icon { '):b.icon.image&&(d+=".oj-tree-"+g.Jd()+" .oj-tree-list li["+c+'\x3d"'+a+'"].oj-tree-type \x3e a \x3e ins.oj-tree-node-icon { '),
d+=g.rO(b,d),d+="} "});""!==d&&e({bC:d,title:"oj-tree-types"})},this)).bind("ojbefore",f.proxy(function(a,b){var c,d,e=b.func,g=b.item;if((c=(c=this.f.types.ac.useData?this.va(g):!1)&&-1!==c&&c.length?c.data("oj-tree"):!1)&&c.types&&!1===c[e]||-1!==f.inArray(e,this.f.types.vX)&&b.item&&(b.item.tagName||b.item.jquery)&&(c=this.options.types.types,d=this.sG(g),(c[d]&&"undefined"!==typeof c[d][e]||c["default"]&&"undefined"!==typeof c["default"][e])&&!1===this.cP(e,g)))return a.stopImmediatePropagation(),
!1},this))},rO:function(a){var b="",b="ojt$none"!==a.icon.image?b+(" background-image:url("+a.icon.image+"); "):b+" background-image:none; ";return b=a.icon.position?b+(" background-position:"+a.icon.position+"; "):b+" background-position:0 0; "},F$:function(){if(this.f.dnd.reorder){var a=this.f.dnd.Cb;a.bd=f("\x3cdiv class\x3d'oj-tree-drop-marker'\x3e\x3cspan class\x3d'oj-tree-drop-ptr oj-component-icon'\x3e\x26#160;\x3c/span\x3e\x3c/div\x3e").hide().bind("mouseleave mouseenter",f.proxy(function(a){var b=
this.f.dnd.Cb;b.bd.hide();b.bc.hide();a.preventDefault();a.stopImmediatePropagation();return!1},this)).appendTo("body");a.bc=f("\x3cdiv /\x3e").addClass("oj-tree-drop-marker-line").hide().bind("mouseup",function(a){var b=this.f.dnd.Cb;if(b.xa&&b.xa.length)return b.xa.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",f.proxy(function(a){var b=this.f.dnd.Cb,c=f(a.relatedTarget);if((c.is(".oj-tree")||0===c.closest(".oj-tree").length)&&b.xa&&b.xa.length)return b.xa.children("a").trigger(a),
b.bd.hide(),b.bc.hide(),a.preventDefault(),a.stopImmediatePropagation(),!1},this)).appendTo("body");this.f.dnd.LZ=a.bc.width();f(document).bind("drag_start.ojtreeu",f.proxy(function(a,b){var c=this.f.dnd.Cb;b.data.rh&&(c.bd.show(),c.bc&&c.bc.show())},this));f(document).bind("drag_stop.ojtreeu",f.proxy(function(a,b){var c=this.f.dnd.Cb;b.data.rh&&(c.bd.hide(),c.bc&&c.bc.hide())},this));this.ea.bind("mouseenter.ojtree",f.proxy(function(a){var b=this.f.dnd.dc,c=this.f.dnd.Cb;if(b.qh&&b.Gd.rh&&(this.options.themes&&
(c.bd.addClass("oj-tree-"+this.f.gb.di),c.bc&&c.bc.addClass("oj-tree-"+this.f.gb.di),b.helper.addClass("oj-tree-dnd-helper oj-tree-"+this.f.gb.di)),a.currentTarget===a.target&&b.Gd.vn&&f(b.Gd.vn).length&&f(b.Gd.vn).parents(".oj-tree:eq(0)")[0]!==a.target))if(a=this.PH(a.target),a.data.dnd.rB){if(a=a.options.dnd.drag_check.call(this,{o:c.wa,r:a.ea,is_root:!0}),!0===a||!0===a.inside||!0===a.before||!0===a.after)b.helper.children("ins").removeClass("oj-tree-drop-invalid").addClass("oj-tree-drop-ok"),
this.ea.removeClass("oj-invalid-drop"),c.wa&&c.wa.removeClass("oj-invalid-drop").addClass("oj-valid-drop")}else a.Br(c.wa,a.ea,"last"),a.check_move()&&(b.helper.children("ins").removeClass("oj-tree-drop-invalid").addClass("oj-tree-drop-ok"),this.ea.removeClass("oj-invalid-drop"),c.wa&&c.wa.removeClass("oj-invalid-drop").addClass("oj-valid-drop"))},this)).bind("mouseup.ojtree",f.proxy(function(a){var b=this.f.dnd.Cb,c=this.f.dnd.dc;c.qh&&c.Gd.rh&&a.currentTarget===a.target&&c.Gd.vn&&f(c.Gd.vn).length&&
f(c.Gd.vn).parents(".oj-tree:eq(0)")[0]!==a.target&&(c=this.PH(a.currentTarget),c.data.dnd.foreign?(a=c.Nk().dnd.drag_check.call(this,{o:b.wa,r:c.ea,is_root:!0}),!0!==a&&!0!==a.inside&&!0!==a.before&&!0!==a.after||c.Nk().dnd.drag_finish.call(this,{o:b.wa,r:c.ea,is_root:!0})):c.wr(b.wa,c.ea,"last",a[c.options.dnd.copy_modifier+"Key"]))},this)).bind("mouseleave.ojtree",f.proxy(function(a){var b=this.f.dnd.dc;if(a.relatedTarget&&f(a.relatedTarget).hasClass("oj-tree-drop-marker-line"))return!1;b.qh&&
b.Gd.rh&&(this.f.dnd.nh&&clearInterval(this.f.dnd.nh),this.f.dnd.oh&&clearInterval(this.f.dnd.oh),this.f.dnd.hj&&clearTimeout(this.f.dnd.hj),this.f.dnd.ei&&clearTimeout(this.f.dnd.ei),b.helper.children("ins").hasClass("oj-tree-drop-ok")&&(b.helper.children("ins").removeClass("oj-tree-drop-ok").addClass("oj-tree-drop-invalid"),this.ea.addClass("oj-invalid-drop"),this.f.dnd.Cb.wa&&this.f.dnd.Cb.wa.removeClass("oj-valid-drop").removeClass("oj-invalid-drop")))},this)).bind("mousemove.ojtree",f.proxy(function(a){var b=
this.f.dnd.dc;if(b.qh&&b.Gd.rh){var c=this.ea[0];a.pageX+24>this.f.dnd.bs.left+this.f.dnd.AJ?(this.f.dnd.nh&&clearInterval(this.f.dnd.nh),this.f.dnd.nh=setInterval(f.proxy(function(){this.scrollLeft+=b.An},c),100)):a.pageX-24<this.f.dnd.bs.left?(this.f.dnd.nh&&clearInterval(this.f.dnd.nh),this.f.dnd.nh=setInterval(f.proxy(function(){this.scrollLeft-=b.An},c),100)):this.f.dnd.nh&&clearInterval(this.f.dnd.nh);a.pageY+24>this.f.dnd.bs.top+this.f.dnd.ch?(this.f.dnd.oh&&clearInterval(this.f.dnd.oh),this.f.dnd.oh=
setInterval(f.proxy(function(){this.scrollTop+=b.An},c),100)):a.pageY-24<this.f.dnd.bs.top?(this.f.dnd.oh&&clearInterval(this.f.dnd.oh),this.f.dnd.oh=setInterval(f.proxy(function(){this.scrollTop-=b.An},c),100)):this.f.dnd.oh&&clearInterval(this.f.dnd.oh)}},this)).bind("scroll.ojtree",f.proxy(function(){var a=this.f.dnd.dc,b=this.f.dnd.Cb;a.qh&&a.Gd.rh&&b.bd&&b.bc&&(b.bd.hide(),b.bc.hide())},this)).delegate(".oj-tree-list a","mousedown.ojtree",f.proxy(function(a){if(1===a.which)return this.Vda(a.currentTarget,
a),!1},this)).delegate(".oj-tree-list a","mouseenter.ojtree",f.proxy(function(a){var b=this.f.dnd.dc;b.qh&&b.Gd.rh&&this.cF(a.currentTarget)},this)).delegate(".oj-tree-list a","mousemove.ojtree",f.proxy(function(a){var b=this.f.dnd.dc,c=this.f.dnd.Cb;b.qh&&b.Gd.rh&&(c.xa&&c.xa.length&&c.xa.children("a")[0]===a.currentTarget||this.cF(a.currentTarget),"undefined"===typeof this.f.dnd.off.top&&(this.f.dnd.off=f(a.target).offset()),"undefined"===typeof this.f.dnd.off.top&&(this.f.dnd.off=f(a.target).offset()),
this.f.dnd.Gc=(a.pageY-(this.f.dnd.off.top||0))%this.f.V.$h,0>this.f.dnd.Gc&&(this.f.dnd.Gc+=this.f.V.$h),this.dF())},this)).delegate(".oj-tree-list a","mouseleave.ojtree",f.proxy(function(a){var b=this.f.dnd.dc,c=this.f.dnd.Cb;if(b.qh&&b.Gd.rh){if(a.relatedTarget&&f(a.relatedTarget).hasClass("oj-tree-drop-marker-line"))return!1;c.bd&&c.bd.hide();c.bc&&c.bc.hide();this.f.dnd.NB=setTimeout(function(b){return function(){b.B6(a)}}(this),0)}},this)).delegate(".oj-tree-list a","mouseup.ojtree",f.proxy(function(a){var b=
this.f.dnd.dc;b.qh&&b.Gd.rh&&this.A6(a)},this));f(document).bind("drag_stop.ojtreeu",f.proxy(function(){var a=this.f.dnd,b=this.f.dnd.Cb;a.hj&&clearTimeout(a.hj);a.ei&&clearTimeout(a.ei);a.nh&&clearInterval(a.nh);a.oh&&clearInterval(a.oh);a.after=!1;a.before=!1;a.inside=!1;a.off=!1;a.Mw=!1;a.Gc=!1;a.hj=!1;a.ei=!1;a.nh=!1;a.oh=!1;a.ta=!1;a.rB=!1;b.bd&&b.bd.css({top:"-2000px"});b.bc&&b.bc.css({top:"-2000px"})},this)).bind("drag_start.ojtreeu",f.proxy(function(a,b){if(b.data.rh){var c=f(b.event.target);
c.closest(".jstree").hasClass("oj-tree-"+this.Jd())&&this.cF(c)}},this));a=this.options.dnd;a.drag_target&&f(document).delegate(a.drag_target,"mousedown.ojtree-"+this.Jd(),f.proxy(function(a){var b=this.f.dnd.dc,c=this.f.dnd,d=this.f.dnd.Cb;d.wa=a.target;this.zQ(a,{rh:!0,vn:a.target},"\x3cins class\x3d'oj-tree-icon'\x3e\x3c/ins\x3e"+f(a.target).text());this.f.gb&&(d.bd&&d.bd.addClass("oj-tree-"+this.f.gb.di),d.bc&&d.bc.addClass("oj-tree-"+this.f.gb.di),b.helper.addClass("oj-tree-dnd-helper oj-tree-"+
this.f.gb.di));b.helper.children("ins").removeClass("oj-tree-drop-ok").addClass("oj-tree-drop-invalid");this.ea.addClass("oj-invalid-drop");d.wa&&d.wa.removeClass("oj-valid-drop").addClass("oj-invalid-drop");b=this.ea;c.bs=b.offset();c.AJ=parseInt(b.width(),10);c.ch=parseInt(b.height(),10);c.rB=!0;a.preventDefault()},this));a.drop_target&&f(document).delegate(a.drop_target,"mouseenter.ojtree-"+this.Jd(),f.proxy(function(a){var b=this.f.dnd,c=this.f.dnd.Cb;b.ta&&this.options.dnd.drop_check.call(this,
{o:c.wa,r:f(a.target),e:a})&&(b.dc.helper.children("ins").removeClass("oj-tree-drop-invalid").addClass("oj-tree-drop-ok"),this.ea.removeClass("oj-invalid-drop"),c.wa&&c.wa.removeClass("oj-invalid-drop").addClass("oj-valid-drop"))},this)).delegate(a.drop_target,"mouseleave.ojtree-"+this.Jd(),f.proxy(function(){this.f.dnd.ta&&(this.f.dnd.dc.helper.children("ins").removeClass("oj-tree-drop-ok").addClass("oj-tree-drop-invalid"),this.ea.addClass("oj-invalid-drop"))},this)).delegate(a.drop_target,"mouseup.ojtree-"+
this.Jd(),f.proxy(function(a){var b=this.f.dnd.Cb;this.f.dnd.ta&&this.f.dnd.dc.helper.children("ins").hasClass("oj-tree-drop-ok")&&this.options.dnd.drop_finish.call(this,{o:b.wa,r:f(a.target),e:a})},this))}},cT:function(){this.f.dnd.reorder=!1;var a=this.options.dnd,b=!0;"object"===typeof a&&(a=a.reorder,"string"===typeof a&&("enable"===a?(this.f.dnd.reorder=!0,b=!1):"disable"==a&&(b=!1)));this.f.dnd.reorder?(this.options.dnd={},this.yO(this.options.dnd,this.f.dnd.ac),this.options.dnd.reorder="enable"):
b&&(this.options.dnd={reorder:"disable"})},tia:function(){},Am:function(a){var b,c;a||this.options.contextMenu||(b=this.ea.attr("contextmenu"))&&(this.options.contextMenu="#"+b);if(a||this.options.contextMenu){b=a||this.options.contextMenu;c=f.type(b);if("function"==c){try{b=b()}catch(d){b=null}c=f.type(b)}if("string"===c){if(b=f(b))b.css("display","none"),c=this.f.menu,c.ve=b,c.sd=!0;this.f.menu.sd&&a&&this.gm()}}},Ii:function(a,b){if(!b.inst&&this.f.menu.Jha==this.Lq.substr(1)){var c=b?b.item.attr("id"):
void 0;"ojtreecopy"===c?this.k6(this.f.menu.dj):"ojtreecut"===c?this.m6(this.f.menu.dj):"ojtreepaste"===c?this.n6(this.f.menu.dj):"ojtreeremove"===c?this.isSelected(this.f.menu.dj)?this.OP():this.OP(this.f.menu.dj):"ojtreerename"===c?this.PP(this.f.menu.dj):"ojtreecreate"===c&&this.l6(this.f.menu.dj)}},Xe:function(a,b,c){var d="keyboard"===c;if("contextmenu"==b.type||d||"touch"==c){this.f.menu.dj=d?this.f.ui.zb:f(b.target);var e=this.f.menu.dj.find(".oj-tree-title")[0];this.f.menu.dB=null;this.f.menu.dj?
(this.f.menu.Jha=this.f.menu.dj.closest("div").attr("id"),a={launcher:this.fa},d&&(a.position={of:e}),this.f.menu.sd&&this.f.menu.Ms&&(d=!this.f.zc.Vh&&!this.f.zc.lp,!!this.f.menu.Ms.hasClass("oj-disabled")!=d&&(d?this.f.menu.Ms.addClass("oj-disabled"):this.f.menu.Ms.removeClass("oj-disabled"),this.f.menu.ve.ojMenu("refresh"))),this.Ye(b,c,a)):b.preventDefault()}},D$:function(){var a=this.options.selectionMode,a=void 0==a?"single":a;"none"===a?a=0:"single"===a?a=1:"multiple"===a&&(a=-1);this.f.V.Gl=
a;this.f.gb.icons=this.options.icons;this.dT();this.f.V.gk=this.options.initLoaded},wia:function(){},aT:function(b){var c=this.options.data,d;this.f.Oa.type=0;this.f.html.eC=!1;this.f.html.hB=!1;if(c)if(d=f.type(c),"string"===d)this.iaa(c)?this.f.Oa.type=4:this.f.Oa.type=3;else if("array"===d)this.f.Oa.type=3;else if("object"===d){try{c instanceof a.Ic&&(this.f.Oa.type=1)}catch(e){this.f.Oa.type=-1}if(1!==this.f.Oa.type)try{c instanceof a.Ka&&(this.f.Oa.type=2)}catch(g){this.f.Oa.type=-1}1!==this.f.Oa.type&&
2!==this.f.Oa.type&&(c.data||c.ajax)&&((d=c.dataType)?"json"===d?this.f.Oa.type=3:"html"===d&&(this.f.Oa.type=4):(c.dataType="json",this.f.Oa.type=3))}b&&0==this.f.Oa.type&&0<this.ea.find("ul").length&&(this.f.Oa.type=4,this.f.html.eC=!0)},via:function(){},sia:function(){},ria:function(){},uia:function(){},O$:function(){var a=this.options.types;"object"===typeof a&&this.yO(a,{attr:this.f.types.ac.attr})},dT:function(){this.f.V.cg=this.Mea(this.options,"initExpanded");null==this.f.V.cg&&(this.f.V.cg=
[])},E$:function(){var a=this.f;a.V={xga:[],Gl:1,$ia:!1,$h:0,fja:!1,cg:!1,gk:!1,ag:{},Ip:!1,zha:{}};a.ui={selected:f(),Gb:!1,zb:null,$i:null,CJ:!1,Tw:null,opacity:1,gL:!1,Xi:!1,qX:null,Jp:!1};a.ui.ac={selectMultipleModifier:"ctrl",selectRangeModifier:"shift",disableSelectingChildren:!1};a.zc={};a.zc.lp=!1;a.zc.Vh=!1;a.zc.ac={inputWidthLimit:200,move:{alwaysCopy:!1,openOnMove:!0,defaultPosition:"last",checkMove:function(){return!0}}};a.zc.ag={};a.Oa={};a.Oa.UK=!1;a.Oa.Hs=!1;a.Oa.Rf=!0;a.Oa.type=0;
a.Iga={};a.Iga.ac={data:!1,ajax:!1};a.html={};a.html.ac={data:!1,ajax:!1};a.html.eC=!1;a.html.Cs=!1;a.html.LB=!1;a.html.JZ=!1;a.html.hB=!1;a.gb={};a.gb.icons=!0;a.gb.cw=!1;a.gb.di="default";a.gb.url=!1;a.gb.M_=[];a.gb.Iv=!1;a.types={};a.types.vX=[];a.types.js=!1;a.types.ac={maxChildren:-1,maxDepth:-1,validChildren:"all",useData:!1,attr:"type",types:{"default":{maxChildren:-1,maxDepth:-1,validChildren:"all"}}};a.menu={};a.menu.sd=!1;a.menu.ve=!1;a.menu.Ms=!1;a.menu.dj=!1;a.menu.dB=!1;a.keys={};a.keys.Kfa=
!0;a.keys.bound=[];a.dnd={};a.dnd.reorder=!1;a.dnd.ta=!1;a.dnd.after=!1;a.dnd.inside=!1;a.dnd.before=!1;a.dnd.off=!1;a.dnd.Mw=!1;a.dnd.Gc=0;a.dnd.hj=!1;a.dnd.ei=!1;a.dnd.bs=!1;a.dnd.AJ=!1;a.dnd.ch=!1;a.dnd.nh=!1;a.dnd.oh=!1;a.dnd.NB=!1;a.dnd.LZ=100;a.dnd.L_=100;a.dnd.ac={copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".oj-tree-drop",drop_check:function(){return!0},drop_finish:f.noop,drag_target:".oj-tree-draggable",drag_finish:f.noop,drag_check:function(){return{after:!1,before:!1,
inside:!0}}};a.dnd.Cb={};a.dnd.Cb.wa=!1;a.dnd.Cb.xa=!1;a.dnd.Cb.bd=!1;a.dnd.Cb.bc=!1;a.dnd.Cb.re=void 0;a.dnd.Cb.te=void 0;a.dnd.Cb.ks=!1;a.dnd.Cb.ls=!1;a.dnd.Cb.uK=!1;a.dnd.dc={};a.dnd.dc.qK=!1;a.dnd.dc.qh=!1;a.dnd.dc.helper=!1;a.dnd.dc.An=10;a.dnd.dc.gK=0;a.dnd.dc.hK=0;a.dnd.dc.rja=5;a.dnd.dc.sga=15;a.dnd.dc.tga=5;a.dnd.dc.Gd={}},RQ:function(a){var b=this.ea[0];b.scrollHeight>b.offsetHeight&&(a=this.va(a))&&-1!==a&&a.length&&a.is(":visible")&&(a=a.offset().top-this.ea.offset().top,0>a&&(b.scrollTop=
b.scrollTop+a-1),a+this.f.V.$h+(b.scrollWidth>b.offsetWidth?k:0)>b.offsetHeight&&(b.scrollTop+=a-b.offsetHeight+this.f.V.$h+1+(b.scrollWidth>b.offsetWidth?k:0)))},yA:function(){},Gia:function(){},hba:function(){return++q},Jd:function(){return this.y$},Nk:function(){return f.extend(!0,{},this.options)},iia:function(){return this.ea},qr:{up:function(){this.hover(this.Ok(this.f.ui.zb||this.f.ui.Gb||-1));return!1},"ctrl+up":function(){this.hover(this.Ok(this.f.ui.zb||this.f.ui.Gb||-1));return!1},"shift+up":function(){this.select(this.Ok(this.f.ui.zb||
this.f.ui.Gb||-1),-1!==this.f.ui.Gl);return!1},down:function(){this.hover(this.yo(this.f.ui.zb||this.f.ui.Gb||-1));return!1},"ctrl+down":function(){this.hover(this.yo(this.f.ui.zb||this.f.ui.Gb||-1));return!1},"shift+down":function(){this.select(this.yo(this.f.ui.zb||this.f.ui.Gb||-1),-1!==this.f.ui.Gl);return!1},left:function(){var a=this.f.ui.zb||this.f.ui.Gb;a&&(a.hasClass("oj-expanded")?this.collapse(a):this.hover(this.Ok(a)));return!1},"ctrl+left":function(){var a=this.f.ui.zb||this.f.ui.Gb;
a&&(a.hasClass("oj-expanded")?this.collapse(a):this.hover(this.Ok(a)));return!1},"shift+left":function(){var a=this.f.ui.zb||this.f.ui.Gb;a&&(a.hasClass("oj-expanded")?this.collapse(a):this.hover(this.Ok(a)));return!1},right:function(){var a=this.f.ui.zb||this.f.ui.Gb;a&&a.length&&(a.hasClass("oj-collapsed")?this.expand(a):this.hover(this.yo(a)));return!1},"ctrl+right":function(){var a=this.f.ui.zb||this.f.ui.Gb;a&&a.length&&(a.hasClass("oj-collapsed")?this.expand(a):this.hover(this.yo(a)));return!1},
"shift+right":function(){var a=this.f.ui.zb||this.f.ui.Gb;a&&a.length&&(a.hasClass("oj-collapsed")?this.expand(a):this.hover(this.yo(a)));return!1},space:function(){this.f.ui.zb&&(this.f.ui.gL=!0,this.f.ui.zb.children("a:eq(0)").click(),this.f.ui.gL=!1);return!1},home:function(){this.hover(this.fa.find("li:first"));return!1},end:function(){var a=this.fa.find("li.oj-tree-last:visible");a&&a.length&&this.hover(a[a.length-1]);return!1},"*":function(){this.fa.find("a");this.mF(-1,!1);return!1},"ctrl+space":function(){if(this.f.ui.zb){var a=
f.Event("click");a.ctrlKey=!0;this.f.ui.zb.children("a:eq(0)").trigger(a)}return!1},"shift+space":function(){if(this.f.ui.zb){var a=f.Event("click");a.shiftKey=!0;this.f.ui.zb.children("a:eq(0)").trigger(a)}return!1},"shift+home":function(a){var b,c=this.f.ui.zb;if(c){var d=!0,e=this,g=this.fa.find("li:visible");this.f.V.Ip=!0;b=this.options.selection.slice(0);c=c[0];f.each(g,function(a,b){b==c&&(d=!1);e.Lj(b,!0);return d});this.f.V.Ip=!1;this.fu("selection",b,null,a)}return!1},"shift+pgdn":function(a){var b,
c=this.f.ui.Gb||this.f.ui.zb;if(c){var d=!1,e=this,g=this.fa.find("li:visible");this.f.V.Ip=!0;b=this.options.selection.slice(0);c=c[0];f.each(g,function(a,b){d||(d=b==c);d&&!e.isSelected(b)&&e.Lj(b,!0);return!0});this.f.V.Ip=!1;this.fu("selection",b,null,a)}return!1},f2:function(){this.PP(this.f.ui.zb||this.f.ui.Gb);return!1},del:function(){this.remove(this.f.ui.zb||this.va(null));return!1}},gm:function(){if(this.f.menu.sd){var a=this.f.menu.ve,b=this;a.on("ojselect",f.proxy(this.Ii,this));var c=
!1;a.find("[data-oj-command]").each(function(){var a;0===f(this).children("a").length&&(a=f(this).attr("data-oj-command").split("oj-tree-"),f(this).replaceWith(b.Ci(a[a.length-1])),f(this).hasClass("oj-menu-divider")&&f(this).removeClass("oj-menu-divider").addClass("oj-menu-item"),c=!0)});c&&a.ojMenu("refresh");this.f.menu.Ms=a.find("#ojtreepaste")}},lo:function(){var a=this.f.menu;a.sd&&(a.sd=!1,a.ve.off("ojselect"),a.ve=null)},Ci:function(a){return f(this.If(a))},If:function(a){return"\x3cli id\x3d"+
g[a]+"\x3e"+this.cE(a)+"\x3c/li\x3e"},cE:function(a){return'\x3ca href\x3d"#"\x3e'+this.Au(h[a])+"\x3c/a\x3e"},m6:function(a){a=this.va(a,!0);if(!a||!a.length)return!1;this.f.zc.lp=!1;this.f.zc.Vh=a;this.tb({obj:a},"cut")},k6:function(a){a=this.va(a,!0);if(!a||!a.length)return!1;this.f.zc.Vh=!1;this.f.zc.lp=a;this.tb({obj:a},"copy")},n6:function(a){a=this.va(a);if(!a||!a.length)return!1;var b=this.f.zc.Vh?this.f.zc.Vh:this.f.zc.lp;if(!this.f.zc.Vh&&!this.f.zc.lp)return!1;this.f.zc.Vh&&(this.SE(this.f.zc.Vh,
a),this.f.zc.Vh=!1);this.f.zc.Vh&&(this.SE(this.f.zc.Vh,a),this.f.zc.Vh=!1);this.f.zc.lp&&this.SE(this.f.zc.lp,a,!1,!0);this.tb({obj:a,nodes:b},"paste")},SE:function(a,b,c,d,e,f){var g=this.f.zc.ac.move;if(!e)return"undefined"===typeof c&&(c=g.defaultPosition),"inside"!==c||g.defaultPosition.match(/^(before|after)$/)||(c=g.defaultPosition),this.wr(a,b,c,d,!1,f);if(!0===g.alwaysCopy||"multitree"===g.alwaysCopy&&a.zn.Jd()!==a.ek.Jd())d=!0;this.wr(a,b,c,d,!0,f)},OP:function(a){a=this.va(a,!0);this.eo();
this.remove(a)},PP:function(a){a=this.va(a);this.eo();this.QP(a,function(){})},QP:function(a,b){a=this.va(a);var c=this.Em,d=this.f.zc.ac.inputWidthLimit,e=a.children("ins").width(),g=a.find("\x3e a:visible \x3e ins").width()*a.find("\x3e a:visible \x3e ins").length,h=this.getText(a),k=this,l=f("\x3cdiv /\x3e",{css:{position:"absolute",top:"-200px",left:c?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),m=a.css("position","relative").append(f("\x3cinput /\x3e",{value:h,"class":"oj-tree-rename-input",
css:{padding:"0",border:"1px solid silver",position:"absolute",left:c?"auto":e+g+4+"px",right:c?e+g+4+"px":"auto",top:"0px",height:this.f.V.$h-2+"px",lineHeight:this.f.V.$h-2+"px",width:"150px"},blur:f.proxy(function(){var c=a.children(".oj-tree-rename-input"),d=c.val();""===d&&(d=h);l.remove();c.remove();this.pI(a,h);this.nV(a,d);b.call(this,a,d,h);a.css("position","")},this),keyup:function(a){a=a.keyCode||a.which;if(!k.fF)return k.fF=!0,!1;27==a?(k.fF=!1,this.value=h,this.blur()):13==a?(k.fF=!1,
this.blur()):m.width(Math.min(l.text("pW"+this.value).width(),d))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".oj-tree-rename-input");this.pI(a,"");l.css({fontFamily:m.css("fontFamily")||"",fontSize:m.css("fontSize")||"",fontWeight:m.css("fontWeight")||"",fontStyle:m.css("fontStyle")||"",fontStretch:m.css("fontStretch")||"",fontVariant:m.css("fontVariant")||"",letterSpacing:m.css("letterSpacing")||"",wordSpacing:m.css("wordSpacing")||""});m.width(Math.min(l.text("pW"+
m[0].value).width(),d))[0].select()},l6:function(a,b,c,d,e){var g=this;(a=this.va(a))||(a=-1);this.eo();return this.OE(a,b,c,function(a){var b=this.Hi(a),c=f(a).index();d&&d.call(this,a);b.length&&b.hasClass("oj-collapsed")&&this.expand(b,!1,!0);e?g.tb({obj:a,name:this.getText(a),parent:b,position:c}):this.QP(a,function(a,d){g.tb({obj:a,name:d,parent:b,position:c})})})},iaa:function(a){if(!a||3>a.length)return!1;a=a.trim();return"\x3c"===a.charAt(0)},l4:function(){var a=this.options.emptyText;"string"!==
typeof a&&(a=this.Au("labelNoData"));if(a&&0<a.length){var b=this.fa,c=f("\x3cli class\x3d'oj-tree-empty'\x3e\x3c/li\x3e");c[0].textContent=a;b.empty().append(c)}},Tba:function(a){var b,c,d;d=null;var e;a&&(b=a.subId);if(!b)return null;d=b.split("[");if(3===d.length&&(d[0]=d[0].trim(),"oj-tree-node"===d[0]&&(d[1]=d[1].trim(),b=d[1].charAt(0),b=d[1].indexOf(b,1),0<=b&&(a=d[1].substring(1,b).trim(),d[2]=d[2].trim(),b=d[2].charAt(0),b=d[2].indexOf(b,1),0<=b)))){d=d[2].substring(1,b).trim();try{c=this.va(a)}catch(f){c=
null}if(d&&c&&-1!==c)switch(d){case "icon":this.f.gb.icons&&(e=c.find(" \x3e a \x3e ins:eq(0)"));break;case "link":e=c.find(" \x3e a:eq(0)");break;case "disclosure":this.sT(c)||(e=c.find(" \x3e ins:eq(0)"));break;case "title":e=c.find(" \x3e a \x3e span")}}return e?e.length?e[0]:null:null},KS:function(){this.f.gb.cw=!1;this.ea.children("ul").addClass("oj-tree-no-dots")},lW:function(){this.f.gb.cw=!0;this.ea.children("ul").removeClass("oj-tree-no-dots")},laa:function(){var a=this.options.initExpanded;
return a&&"all"==a||f.isArray(a)&&a.length&&"all"==a[0]},Au:function(a){var b=this.f.V.zha,c;c=b[a];c||(c=this.D(a),c=this.Iy(c),b[a]=c);return c},Iy:function(a){var b=document.createElement("div");f(b).text(a);return b.textContent},t7:function(){var a=0,b,c;window.getComputedStyle&&(c=this.f.ui.qX,c||(c=f("\x3cdiv id\x3d'ojtree-comp-animduration'\x3e\x3cspan class\x3d'oj-tree-transition'\x3edummy\x3c/span\x3e\x3c/div\x3e"),this.f.ui.qX=c,f("body").append(c)),b=c[0].childNodes[0],b=window.getComputedStyle(b),
b=b.transitionDuration?b.transitionDuration:b["-webkit-transition-duration"]?b["-webkit-transition-duration"]:0,c.detach(),"string"==typeof b&&1<b.length&&(c=b.charAt(b.length-1).toLowerCase(),"s"==c?(b=b.substring(0,b.length-1),b=parseFloat(b),isNaN(b)||(a=1E3*b)):2<b.length&&(c=b.substring(b.length-2).toLowerCase(),"ms"==c&&(b=parseFloat(b),isNaN(b)||(a=b)))));return a},Mea:function(a,b){var c={};c[b]=a[b];return f.extend(!0,{},c)[b]}})})()});