/**
 * Copyright (c) 2014, 2015, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(["ojs/ojcore","jquery","promise","ojs/ojdatacollection-common"],function(a,f){a.Xa=function(a,b){this.Init();this.ca=a;this.zg=b;this.Lp()};o_("Cube",a.Xa,a);a.b.ga(a.Xa,a.b,"oj.Cube");a.Xa.prototype.Init=function(){a.Xa.q.Init.call(this)};a.Xa.prototype.ml=function(){var a=this.QR(),b=[];Array.prototype.push.apply(b,a?a.ml():this.bf);for(a=2;a<this.bf.length;a++)b.push(this.bf[a]);return b};a.b.i("Cube.prototype.getAxes",{ml:a.Xa.prototype.ml});a.Xa.prototype.$F=function(){return this.bf};
a.Xa.prototype.sl=function(a){var b=this.QR();a=b.nba(a);for(a=b=b.kX(a,0,[]);Array.isArray(a)&&1===a.length;)if(a=a[0],!Array.isArray(a))return a;return b};a.b.i("Cube.prototype.getValues",{sl:a.Xa.prototype.sl});a.Xa.prototype.setPage=function(a){this.DH=a instanceof Array?a:[a]};a.Xa.prototype.$Z=function(d,b,c,e,g){var f=this.zg,k=this.MQ(d);if(!k)return!1;d=null;c<f.length?d=this.MQ(c):(d={axis:c,levels:[]},f.push(d));c=k.levels;f=d.levels;d=b<c.length?c[b]:null;if(!d)return!1;e>=f.length?(f.push(d),
c.splice(b,1)):g===a.Xa.LC.SWAP?(c[b]=f[e],f[e]=d):(g===a.Xa.LC.AFTER&&e++,f.splice(e,0,d),f===c&&e<b&&b++,c.splice(b,1));this.Lp();return!0};a.b.i("Cube.prototype.pivot",{$Z:a.Xa.prototype.$Z});a.Xa.prototype.MQ=function(a){for(var b=0;b<this.zg.length;b++)if(this.zg[b].axis===a)return this.zg[b];return null};a.Xa.prototype.DY=function(){return this.zg};a.b.i("Cube.prototype.getLayout",{DY:a.Xa.prototype.DY});a.Xa.LC={BEFORE:"before",AFTER:"after",SWAP:"swap"};o_("Cube.PivotType",a.Xa.LC,a);a.Xa.prototype.kX=
function(a,b,c){var e=[];if(0===a.length)return b=c.slice(0),this.Co(b);var g=a.slice(1),f=a[0].start;a=a[0].count;for(c[b]=f;c[b]<f+a;c[b]++)e.push(this.kX(g,b+1,c));return e};a.Xa.prototype.nba=function(a){var b=[];if(!a)return b;for(var c=Math.min(a.length,this.bf.length),e=0;e<c;e++){var g=a[e];g instanceof Object&&(g.hasOwnProperty("start")||g.hasOwnProperty("count"))?g.hasOwnProperty("start")?g.hasOwnProperty("count")?b.push(this.Ty(g.start,g.count,e)):b.push(this.Ty(g.start,1,e)):b.push(this.Ty(0,
g.count,e)):b.push(this.Ty(g,1,e))}return b};a.Xa.prototype.Ty=function(a,b,c){c=this.ml()[c].Rb();if(a>=c||0>a)a=0;b=Math.min(b,c-a);return{start:a,index:a,count:b}};a.Xa.prototype.Co=function(d){var b=this.F5(d);return b&&(b=b.On(),0<b.length&&(b=this.f[b[0].key]))?new a.yf(b.value,d,b.eB,b.rows,b.Dn):new a.yf(null,d,void 0,[])};a.Xa.prototype.x0=function(){var a=this.w8();this.DH=[];for(var b=0;b<a.length;b++)this.to(a[b].axis,a[b].levels),this.DH.push({axis:a[b].axis,index:0});if(0===a.length)for(a=
this.$F(),b=0;b<a.length;b++)this.to(a[b].axis,a[b].levels)};a.Xa.prototype.w8=function(){for(var a=[],b=0;b<this.zg.length;b++)1<this.zg[b].axis&&a.push(this.zg[b]);return a};a.Xa.prototype.$F=function(){for(var a=[],b=0;b<this.zg.length;b++)2>this.zg[b].axis&&a.push(this.zg[b]);return a};a.Xa.prototype.Lp=function(){this.bf=[];this.f=[];this.UE=[];this.x0();if(null!==this.ca)for(var d=0;d<this.ca.length;d++){for(var b=new a.ji,c=2;c<this.bf.length;c++)b=this.bf[c].ZL(this.ca[d],b);for(var b=b.On(),
e=0;e<b.length;e++){var c=b[e].key,g=this.UE[c];g||(g=this.UE[c]=this.sC(this.$F()));for(var f=new a.ji,k=g.bf.length,c=0;c<k;c++)f=g.bf[c].ZL(this.ca[d],f);f=c=f.On();if(void 0!==b[e].TX)for(f=[],k=0;k<c.length;k++)f.push(b[e]);g.Wda(c,f,this.ca[d])}}};a.Xa.prototype.Wda=function(a,b,c){for(var e=0;e<a.length;e++)this.f[a[e].key]=this.d4(b[e],this.f[a[e].key],c)};a.Xa.prototype.QR=function(){return this.UE[this.b8(this.DH)]};a.Xa.prototype.b8=function(d){var b=new a.ji;if(d&&0<d.length){d.sort(function(a,
b){return a.axis-b.axis});for(var c=this.bf,e=0;e<d.length;e++)b=c[d[e].axis].Zw(d[e].index,b)}return b.On()[0].key};a.Xa.FT=function(a){return a?void 0!==a.value&&null!==a.value:!1};a.Xa.prototype.uc=function(a,b,c,e,g){c.push(e);e={};for(var f in g)g.hasOwnProperty(f)&&(e[f]=g[f]);e.value=a;e.eB=b;e.rows=c;return e};a.Xa.Md=function(d){return a.Ba.rd(d.value)?!1:!isNaN(d.value)};a.Xa.prototype.d4=function(d,b,c){var e=this.uC(d.TX),g=e.Zr,f=a.Xa.FT(b),k=a.Xa.FT(d),l=f&&a.Xa.Md(b),m=k&&a.Xa.Md(d);
switch(g){case a.xf.SUM:return f&&k?l&&m?this.uc(b.value+d.value,g,b.rows,c,{}):this.uc(NaN,g,b.rows,c,{}):k&&!f?m?this.uc(d.value,g,[],c,{}):this.uc(NaN,g,[],c,{}):b;case a.xf.AVERAGE:return f&&k?l&&m?this.uc((b.Ks+d.value)/(b.rows.length+1),g,b.rows,c,{Ks:b.Ks+d.value}):this.uc(NaN,g,b.rows,c,{Ks:b.Ks}):k&&!f?m?this.uc(d.value,g,[],c,{Ks:d.value}):this.uc(NaN,g,[],c,{Ks:NaN}):b;case a.xf.VARIANCE:case a.xf.STDDEV:return f&&k?l&&m?(f=b.value+(d.value-b.value)/(b.rows.length+1),this.uc(f,g,b.rows,
c,{Dn:b.Dn+(d.value-b.value)*(d.value-f)})):this.uc(NaN,g,b.rows,c,{Dn:NaN}):k&&!f?m?this.uc(d.value,g,[],c,{Dn:0}):this.uc(NaN,g,[],c,{Dn:NaN}):b;case a.xf.NONE:return this.uc(null,g,f?b.rows:[],c,{});case a.xf.FIRST:return f?this.uc(b.value,g,b.rows,c,{}):k?this.uc(d.value,g,[],c,{}):b;case a.xf.MIN:return f&&k?l&&m?this.uc(Math.min(b.value,d.value),g,b.rows,c,{}):this.uc(NaN,g,b.rows,c,{}):k&&!f?m?this.uc(d.value,g,[],c,{}):this.uc(NaN,g,[],c,{}):b;case a.xf.MAX:return f&&k?l&&m?this.uc(Math.max(b.value,
d.value),g,b.rows,c,{}):this.uc(NaN,g,b.rows,c,{}):k&&!f?m?this.uc(d.value,g,[],c,{}):this.uc(NaN,g,[],c,{}):b;case a.xf.COUNT:return f&&k?this.uc(b.value+1,g,b.rows,c,{}):k&&!f?this.uc(1,g,[],c,{}):b;case a.xf.CUSTOM:return d=e.Xb.call(this,f?b.value:void 0,k?d.value:void 0),this.uc(d,g,f?b.rows:[],c,{})}};a.Xa.prototype.to=function(d,b){d>=this.bf.length&&Array.prototype.push.apply(this.bf,Array(d-this.bf.length+1));this.bf[d]||(this.bf[d]=new a.Oe(b,d,this));return this.bf[d]};a.Xa.prototype.F5=
function(d){for(var b=this.ml(),c=new a.ji,e=0;e<d.length;e++)c=b[e].Zw(d[e],c);return c};a.Xa.prototype.Vp=function(){a.j.Ya()};a.Xa.prototype.sC=function(){a.j.Ya()};a.Xa.prototype.tC=function(){a.j.Ya()};a.Xa.prototype.uC=function(){a.j.Ya();return{}};a.xf={SUM:"sum",AVERAGE:"avg",STDDEV:"stddev",VARIANCE:"variance",NONE:"none",FIRST:"first",MIN:"min",MAX:"max",COUNT:"count",CUSTOM:"custom"};o_("CubeAggType",a.xf,a);a.$b=function(a,b,c,e){this.Init();this.nd=[];this.To=e;this.o6=c;this.f={};this.f.value=
a;this.f.label=b};o_("CubeAxisValue",a.$b,a);a.b.ga(a.$b,a.b,"oj.CubeAxisValue");a.$b.prototype.Init=function(){a.$b.q.Init.call(this)};a.$b.prototype.rp=function(){return this.o6};a.b.i("CubeAxisValue.prototype.getLevel",{rp:a.$b.prototype.rp});a.$b.prototype.Td=function(){return 1};a.b.i("CubeAxisValue.prototype.getDepth",{Td:a.$b.prototype.Td});a.$b.prototype.FY=function(){for(var a=[],b=this.To;b&&b.To;)a.unshift(b),b=b.To;return a};a.b.i("CubeAxisValue.prototype.getParents",{FY:a.$b.prototype.FY});
a.$b.prototype.getChildren=function(){return this.nd};a.b.i("CubeAxisValue.prototype.getChildren",{getChildren:a.$b.prototype.getChildren});a.$b.prototype.Rb=function(){if(-1<this.Rq)return this.Rq;if(this.nd&&0!==this.nd.length)for(var a=this.Rq=0;a<this.getChildren().length;a++)this.Rq+=this.getChildren()[a].Rb();else this.Rq=1;return this.Rq};a.b.i("CubeAxisValue.prototype.getExtent",{Rb:a.$b.prototype.Rb});a.$b.prototype.ua=function(){if(-1<this.fh)return this.fh;if(!this.To)return 0;for(var a=
this.To.ua(),b=this.To.TR(this);b;)a+=b.Rb(),b=this.To.TR(b);return this.fh=a};a.b.i("CubeAxisValue.prototype.getStart",{ua:a.$b.prototype.ua});a.$b.prototype.Pc=function(){return this.f.value};a.b.i("CubeAxisValue.prototype.getValue",{Pc:a.$b.prototype.Pc});a.$b.prototype.RJ=function(){return this.f.label?this.f.label:this.Pc()};a.b.i("CubeAxisValue.prototype.getLabel",{RJ:a.$b.prototype.RJ});a.$b.prototype.y0=function(a){var b=this.B7();if(null===b)return null;if(b.ws())return this.K7(a);if(a=a[b.attribute])for(b=
0;b<this.nd.length;b++)if(this.nd[b].Pc()===a)return this.nd[b];return null};a.$b.prototype.K7=function(a){for(var b=0;b<this.nd.length;b++){var c=this.nd[b].Pc();if(a.hasOwnProperty(c)&&a[c]===c)return this.nd[b]}return null};a.$b.prototype.B7=function(){return this.nd&&0<this.nd.length?this.nd[0].rp():null};a.$b.prototype.z0=function(a){return this.rF(a,0,this.nd.length-1)};a.$b.prototype.rF=function(a,b,c){if(b>c)return null;var e=Math.floor((b+c)/2),g=this.nd[e],f=g.ua();return f>a?this.rF(a,
b,e-1):f+g.Rb()-1<a?this.rF(a,e+1,c):g};a.$b.prototype.hC=function(d,b,c){for(var e=0;e<this.nd.length;e++)if(this.nd[e].Pc()===d)return this.nd[e];d=new a.$b(d,b,c,this);this.nd.push(d);return d};a.$b.prototype.A0=function(){var a={};a[this.rp().attribute]=this.Pc();return a};a.$b.prototype.TR=function(a){for(var b=0;b<this.nd.length;b++)if(this.nd[b]===a){if(0<b)return this.nd[b-1];break}return null};a.Oe=function(d,b,c){this.Init();this.axis=b;this.MT=[];for(b=0;b<d.length;b++)this.MT.push(c.tC(d[b],
this));this.Yt=c;this.Ym=new a.$b(null,null,null,null)};o_("CubeAxis",a.Oe,a);a.b.ga(a.Oe,a.b,"oj.CubeAxis");a.Oe.prototype.Init=function(){a.Oe.q.Init.call(this)};a.Oe.prototype.Yj=function(){return this.MT};a.b.i("CubeAxis.prototype.getLevels",{Yj:a.Oe.prototype.Yj});a.Oe.prototype.Rb=function(){return this.Ym.Rb()};a.b.i("CubeAxis.prototype.getExtent",{Rb:a.Oe.prototype.Rb});a.Oe.prototype.sl=function(a){for(var b=[],c=this.Ym;c;)(c=c.z0(a))&&b.push(c);return b};a.b.i("CubeAxis.prototype.getValues",
{sl:a.Oe.prototype.sl});a.Oe.prototype.Yh=function(a){a=a?JSON.parse(a):{};for(var b=this.Ym,c=null;b;)c=b,b=b.y0(a);return c?c.ua():-1};a.b.i("CubeAxis.prototype.getIndex",{Yh:a.Oe.prototype.Yh});a.Oe.prototype.Zw=function(a,b){return this.ML(a,this.Yj().length-1,b)};a.Oe.prototype.ML=function(a,b,c){a=this.sl(a);b=this.Yj()[b];for(var e=0;e<a.length;e++){var g=a[e];g.rp().ws()?c.gC(g.Pc()):c.TC(g);if(g.rp()===b)break}return c};a.Oe.prototype.ZL=function(a,b){return this.Yt.Vp(this,0,this.Ym,a,b,
!0)};a.ii=function(d,b){var c=b.row?b.row.start:0,e=b.row?b.row.count:0,g=b.column?b.column.start:0,f=b.column?b.column.count:0;a.j.pc(c,null);a.j.pc(e,null);a.j.pc(g,null);a.j.pc(f,null);this.Yt=d;this.xI={row:c,column:g};this.Ym=this.Yt.sl([{start:g,count:f},{start:c,count:e}]);f=this.Ym.length;0<f&&(e=this.Ym[0].length);this.B5={row:e,column:f}};o_("CubeCellSet",a.ii,a);a.ii.prototype.getData=function(a){return(a=this.Ym[a.column-this.xI.column][a.row-this.xI.row])?a.Pc():null};a.b.i("CubeCellSet.prototype.getData",
{getData:a.ii.prototype.getData});a.ii.prototype.getMetadata=function(a){var b={keys:{}};b.keys.row=this.XQ(a,"row",2);b.keys.column=this.XQ(a,"column",1);return b};a.b.i("CubeCellSet.prototype.getMetadata",{getMetadata:a.ii.prototype.getMetadata});a.ii.prototype.XQ=function(d,b,c){var e=this.Yt.ml();return void 0!==d[b]&&e.length>=c?(c=new a.ji,c=e[a.Db.BP(b)].Zw(d[b],c),c.On()[0].key):null};a.ii.prototype.ua=function(a){return this.xI[a]};a.b.i("CubeCellSet.prototype.getStart",{ua:a.ii.prototype.ua});
a.ii.prototype.R=function(a){return this.B5[a]};a.b.i("CubeCellSet.prototype.getCount",{R:a.ii.prototype.R});a.Db=function(d){a.Db.q.constructor.call(this,d)};o_("CubeDataGridDataSource",a.Db,a);a.b.ga(a.Db,a.fc,"oj.CubeDataGridDataSource");a.Db.prototype.s_=function(a){this.data=a;this.PQ()};a.b.i("CubeDataGridDataSource.prototype.setCube",{s_:a.Db.prototype.s_});a.Db.prototype.setPage=function(a){this.data.setPage(a);this.PQ()};a.b.i("CubeDataGridDataSource.prototype.setPage",{setPage:a.Db.prototype.setPage});
a.Db.prototype.PQ=function(){this.handleEvent("change",{source:this,operation:"refresh"})};a.Db.prototype.R=function(a){return(a=this.to(a))?a.Rb():0};a.b.i("CubeDataGridDataSource.prototype.getCount",{R:a.Db.prototype.R});a.Db.prototype.Sf=function(){return"exact"};a.b.i("CubeDataGridDataSource.prototype.getCountPrecision",{Sf:a.Db.prototype.Sf});a.Db.prototype.Sd=function(d,b,c){var e=new a.ze(this.to(d.axis),this.data,d.start,d.count);b.success.call(c?c.success:void 0,e,d)};a.b.i("CubeDataGridDataSource.prototype.fetchHeaders",
{Sd:a.Db.prototype.Sd});a.Db.prototype.ke=function(d,b,c){for(var e={},g=0;g<d.length;g++){var f=void 0===d[g].start?0:d[g].start;if("row"===d[g].axis){var k=void 0===d[g].count?this.data.ml()[1].Rb():d[g].count;e.row={start:f,count:k}}"column"===d[g].axis&&(k=void 0===d[g].count?this.data.ml()[0].Rb():d[g].count,e.column={start:f,count:k})}e=new a.ii(this.data,e);b.success.call(c?c.success:void 0,e,d)};a.b.i("CubeDataGridDataSource.prototype.fetchCells",{ke:a.Db.prototype.ke});a.Db.prototype.keys=
function(a){var b={},b=this.um(a,"row",b),b=this.um(a,"column",b);return Promise.resolve(b)};a.b.i("CubeDataGridDataSource.prototype.keys",{keys:a.Db.prototype.keys});a.Db.prototype.um=function(d,b,c){var e=this.to(b);d=d[b];var g=new a.ji,g=e?e.Zw(d,g):"";c[b]=g.On()[0].key;return c};a.Db.prototype.oe=function(a){var b={},b=this.Jd(a,"row",b),b=this.Jd(a,"column",b);return Promise.resolve(b)};a.b.i("CubeDataGridDataSource.prototype.indexes",{oe:a.Db.prototype.oe});a.Db.prototype.Jd=function(a,b,
c){c[b]=this.to(b).Yh(a[b]);return c};a.Db.prototype.sort=function(){a.j.Ya()};a.b.i("CubeDataGridDataSource.prototype.sort",{sort:a.Db.prototype.sort});a.Db.prototype.move=function(){a.j.Ya()};a.b.i("CubeDataGridDataSource.prototype.move",{move:a.Db.prototype.move});a.Db.prototype.cj=function(){return"invalid"};a.b.i("CubeDataGridDataSource.prototype.moveOK",{cj:a.Db.prototype.cj});a.Db.prototype.getCapability=function(a){switch(a){case "sort":return"none";case "move":return"none"}return null};a.b.i("CubeDataGridDataSource.prototype.getCapability",
{getCapability:a.Db.prototype.getCapability});a.Db.BP=function(a){return"row"===a?1:0};a.Db.prototype.to=function(d){d=a.Db.BP(d);var b=this.data.ml();return b.length>d?b[d]:null};a.yf=function(a,b,c,e,g){this.Init();this.f={};this.f.value=a;this.f.wga=b;this.f.eB=c;this.f.rows=e;this.f.Dn=g};o_("CubeDataValue",a.yf,a);a.b.ga(a.yf,a.b,"oj.CubeDataValue");a.yf.prototype.Init=function(){a.yf.q.Init.call(this)};a.yf.prototype.Pc=function(){switch(this.f.eB){case a.xf.STDDEV:return Math.sqrt(this.qS());
case a.xf.VARIANCE:return this.qS();default:return this.f.value}};a.b.i("CubeDataValue.prototype.getValue",{Pc:a.yf.prototype.Pc});a.yf.prototype.CY=function(){return this.f.wga};a.b.i("CubeDataValue.prototype.getIndices",{CY:a.yf.prototype.CY});a.yf.prototype.IY=function(){return this.f.rows};a.b.i("CubeDataValue.prototype.getRows",{IY:a.yf.prototype.IY});a.yf.prototype.iY=function(){return this.f.eB};a.b.i("CubeDataValue.prototype.getAggregation",{iY:a.yf.prototype.iY});a.yf.prototype.qS=function(){if(isNaN(this.f.Dn))return NaN;
var a=this.f.rows.length;return 1<a?this.f.Dn/(a-1):0};a.ze=function(a,b,c,e){this.Yt=b;this.Mt=a;this.fh=void 0===c?0:c;this.A5=void 0===e?this.Mt.Rb():Math.min(e,this.Mt.Rb()-c);this.AQ=c+e-1};o_("CubeHeaderSet",a.ze,a);a.ze.prototype.getData=function(a,b){var c=this.Co(a,b);return c?c.RJ():null};a.b.i("CubeHeaderSet.prototype.getData",{getData:a.ze.prototype.getData});a.ze.prototype.getMetadata=function(d,b){var c=new a.ji,c=this.Mt.ML(d,b,c);return(c=c.On())&&0<c.length?{key:c[0].key}:null};a.b.i("CubeHeaderSet.prototype.getMetadata",
{getMetadata:a.ze.prototype.getMetadata});a.ze.prototype.Vf=function(){return this.Mt.Yj().length};a.b.i("CubeHeaderSet.prototype.getLevelCount",{Vf:a.ze.prototype.Vf});a.ze.prototype.Rb=function(a,b){var c=this.Co(a,b),e=c.Rb(),c=c.ua(),g=c+e-1,f=a<c+e-1;c<this.fh&&(e-=this.fh-c);g>this.AQ&&(e-=g-this.AQ);return{extent:e,more:{before:a>c,after:f}}};a.b.i("CubeHeaderSet.prototype.getExtent",{Rb:a.ze.prototype.Rb});a.ze.prototype.Td=function(a,b){return this.Co(a,b).Td()};a.b.i("CubeHeaderSet.prototype.getDepth",
{Td:a.ze.prototype.Td});a.ze.prototype.R=function(){return this.A5};a.b.i("CubeHeaderSet.prototype.getCount",{R:a.ze.prototype.R});a.ze.prototype.ua=function(){return this.fh};a.b.i("CubeHeaderSet.prototype.getStart",{ua:a.ze.prototype.ua});a.ze.prototype.Co=function(a,b){void 0===b&&(b=0);var c=this.Mt.sl(a);return c&&c.length>b?c[b]:null};a.ji=function(){this.iH=[];this.f=[]};a.ji.prototype.TC=function(a){this.iH.push(a)};a.ji.prototype.gC=function(a,b){this.f.push({name:a,value:b})};a.ji.prototype.On=
function(){var a=[],b=this.F4();if(0===this.f.length)a.push({key:JSON.stringify(b)});else for(var c=0;c<this.f.length;c++){var e=f.extend(!0,{},b);e[this.f[c].name]=this.f[c].name;a.push({key:JSON.stringify(e),TX:this.f[c].name,value:this.f[c].value})}return a};a.ji.prototype.F4=function(){for(var a={},b=0;b<this.iH.length;b++){var c=this.iH[b].A0(),e;for(e in c)c.hasOwnProperty(e)&&(a[e]=c[e])}return a};a.gg=function(a,b,c){this.Init();this.attribute=a;this.GO=b;this.axis=b.axis;this.WP=c};o_("CubeLevel",
a.gg,a);a.b.ga(a.gg,a.b,"oj.CubeLevel");a.gg.prototype.Init=function(){a.gg.q.Init.call(this)};a.gg.prototype.Pc=function(a){if(a=this.GO.sl(a))for(var b=0;b<a.length;b++)if(a[b].rp()===this)return a[b];return null};a.b.i("CubeLevel.prototype.getValue",{Pc:a.gg.prototype.Pc});a.gg.prototype.ws=function(){return this.WP};a.b.i("CubeLevel.prototype.isDataValue",{ws:a.gg.prototype.ws});a.gg.prototype.WP=!1;a.gg.prototype.GO=null;a.zf=function(d,b,c){this.Init();this.om=c;this.Lea=c.valueAttr;this.xaa=
c.labelAttr;var e=c.defaultAggregation;this.XP=e?a.zf.M7(e):{Zr:a.xf.SUM};this.SD=c.aggregation;this.bE();a.zf.q.constructor.call(this,d,b)};o_("DataColumnCube",a.zf,a);a.b.ga(a.zf,a.Xa,"oj.DataColumnCube");a.zf.prototype.Init=function(){a.zf.q.Init.call(this)};a.zf.prototype.Lp=function(){a.zf.q.Lp.call(this)};a.zf.prototype.uC=function(a){return this.Jq[a]?this.Jq[a]:this.XP};a.zf.prototype.sC=function(d){return new a.zf(null,d,this.om)};a.zf.prototype.tC=function(d,b){return d.attribute===this.xaa?
new a.gg(d.attribute,b,!0):new a.gg(d.attribute,b,!1)};a.zf.prototype.Vp=function(a,b,c,e,g,f){if(b>=a.Yj().length)return g;var k=a.Yj()[b],l=e[k.attribute];c=c.hC(l,null,k);k.ws()?g.gC(l,e[this.Lea]):g.TC(c);return this.Vp(a,b+1,c,e,g,f)};a.zf.M7=function(d){return a.Ba.rd(d)?{Zr:d}:{Zr:d.aggregation,Xb:d.callback}};a.zf.prototype.bE=function(){this.Jq=[];if(this.SD)for(var a=0;a<this.SD.length;a++){var b=this.SD[a],c=b.aggregation;this.Jq[b.value]=c?{Zr:c,Xb:b.callback}:this.XP}};a.Af=function(d,
b,c){this.Init();this.om=c;this.bE();a.Af.q.constructor.call(this,d,b)};o_("DataValueAttributeCube",a.Af,a);a.b.ga(a.Af,a.Xa,"oj.DataValueAttributeCube");a.Af.prototype.ca=null;a.Af.prototype.Init=function(){a.Af.q.Init.call(this)};a.Af.prototype.Lp=function(){a.Af.q.Lp.call(this)};a.Af.prototype.uC=function(a){return this.Jq[a]};a.Af.prototype.tC=function(d,b){return d.dataValue?new a.gg(null,b,!0):new a.gg(d.attribute,b,!1)};a.Af.prototype.sC=function(d){return new a.Af(null,d,this.om)};a.Af.prototype.Vp=
function(a,b,c,e,g,f){if(b>=a.Yj().length)return g;var k=a.Yj()[b];if(k.ws())return this.Oba(a,c,e,b,g);c=c.hC(e[k.attribute],null,k);f&&g.TC(c);return this.Vp(a,b+1,c,e,g,f)};a.Af.prototype.Oba=function(a,b,c,e,g){for(var f=!0,k=0;k<this.om.length;k++){var l=this.om[k].attribute,m=this.om[k].label;c.hasOwnProperty(l)&&(m=b.hC(l,m,a.Yj()[e]),g.gC(l,c[l]),this.Vp(a,e+1,m,c,g,f),f=!1)}return g};a.Af.prototype.bE=function(){this.Jq=[];for(var d=0;d<this.om.length;d++){var b=this.om[d];this.Jq[b.attribute]=
b.aggregation?{Zr:b.aggregation,Xb:b.callback}:{Zr:a.xf.SUM,Xb:b.callback}}}});