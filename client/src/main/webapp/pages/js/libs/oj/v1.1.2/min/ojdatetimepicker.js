/**
 * Copyright (c) 2014, 2015, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojeditablevalue","ojs/ojinputtext","ojs/ojvalidation","ojs/ojpopup","ojs/ojbutton"],function(a,f){function d(a){return this.options.converter.parse(a)}function b(b,d){var c=b.translations.dateTimeRange||{},e=[{category:"hint",entries:["min","max","inRange"]},{category:"messageDetail",entries:["rangeUnderflow","rangeOverflow"]},{category:"messageSummary",entries:["rangeUnderflow","rangeOverflow"]}],g={min:b.min,max:b.max,converter:d};if(!f.isEmptyObject(c))for(var h=
0,k=e.length;h<k;h++){var t=c[e[h].category];if(t){for(var v={},x=e[h].entries,u=0,w=x.length;u<w;u++)v[x[u]]=t[x[u]];g[e[h].category]=v}}return a.na.Kp(a.Vc.VALIDATOR_TYPE_DATETIMERANGE).createValidator(g)}function c(a,b){var d=a.filter("span");b?d.addClass("oj-disabled").removeClass("oj-enabled oj-default"):d.removeClass("oj-disabled").addClass("oj-enabled oj-default")}function e(a,b,d){if(!a||b===d.length)return a;var c=b+1;return e(a[d[b]],c,d)||e(a["*"],c,d)}function g(a,b){b.setHours(a.getHours());
b.setMinutes(a.getMinutes());b.setSeconds(a.getSeconds());b.setMilliseconds(a.getMilliseconds());return b}function h(a){return a.delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-calendar td a","mouseout",function(){f(this).removeClass("oj-hover")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-calendar td a",
"mouseover",function(){f(this).addClass("oj-hover")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-calendar td a","focus",function(){f(this).addClass("oj-focus")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-calendar td a",
"blur",function(){f(this).removeClass("oj-focus")})}var k=a.na.jl(a.kj.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"});a.Da("oj.ojInputDate",f.oj.inputBase,{version:"1.0.0",widgetEventPrefix:"oj",_CLASS_NAMES:"oj-inputdatetime-input",_WIDGET_CLASS_NAMES:"oj-inputdatetime-date-only oj-component oj-inputdatetime",_ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES:"",_INPUT_HELPER_KEY:"inputHelp",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],_GET_INIT_OPTIONS_PROPS:[{X:"disabled",ra:!1,rc:!0},{X:"pattern",
ra:""},{X:"title",ra:""},{X:"placeholder",ra:""},{X:"value",ra:null,je:d},{X:"required",ra:!1,je:!0,rc:!0},{X:"readonly",option:"readOnly",ra:!1,rc:!0},{X:"min",ra:null,je:d},{X:"max",ra:null,je:d}],HD:"oj-inputdatetime-input-trigger",GD:"oj-inputdatetime-calendar-icon",GM:"oj-datepicker-current-day",LM:"oj-datepicker-days-cell-over",iO:"oj-datepicker-unselectable",KM:"oj-datepicker-desc",aD:"oj-datepicker-calendar",n2:"oj-datepicker-div",R1:"oj-datepicker-inline",hD:" oj-inputdatetime-input-container",
S1:" oj-inputdatetime-inline",options:{datePicker:{footerLayout:"",changeMonth:"select",changeYear:"select",currentMonthPos:0,daysOutsideMonth:"hidden",numberOfMonths:1,showOn:"image",stepMonths:"numberOfMonths",stepBigMonths:12,weekDisplay:"none",yearRange:"c-10:c+10"},converter:a.na.jl(a.kj.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",month:"2-digit",year:"2-digit"}),max:void 0,min:void 0,dayFormatter:null},xx:function(){this.Zc=null;this.YG=!1;this.Yu=4;this.rm=this.Aj=this.Hk=this.Di=
this.zj=0;this.au={};var a=this.element[0].nodeName.toLowerCase();this.Ld="div"===a||"span"===a;this.zd=h(f("\x3cdiv id\x3d'"+this.Wl(this.n2)+"' role\x3d'region' aria-describedby\x3d'"+this.Wl(this.KM)+"' class\x3d'oj-datepicker-content'\x3e\x3c/div\x3e"));f("body").append(this.zd);if(this.Ld)this._WIDGET_CLASS_NAMES+=this.S1,this._CLASS_NAMES="";else{this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES+=this.hD;var b=this;this.EH=this.zd.ojPopup({initialFocus:"none",open:function(){b.zd.find(".oj-datepicker-calendar").focus()}})}},
_ComponentCreate:function(){this.xx();var a=this._super();this.options.dayMetaData&&(this.options.dayFormatter=function(a){return function(b){return e(a,0,[b.fullYear,b.month,b.date])}}(this.options.dayMetaData));this.wA(this.dz());this.Ld?(this.element.append(this.zd),this.element.addClass(this.R1),this.zd.css("display","block")):this.WD();return a},Ug:function(){var a=this._superApply(arguments);this.mQ(this.options.disabled);return a},_setOption:function(b,d,c){var g=null;if("value"===b)return d||
(d=null),g=this._super(b,d,c),this.wA(d),this.Fk()&&this.Wm(),g;if("dayMetaData"===b)this._setOption("dayFormatter",function(a){return e(d,0,[a.fullYear,a.month,a.date])},c);else return g=this._super(b,d,c),"disabled"===b?this.mQ(d):"max"===b||"min"===b?(this.au[a.Vc.VALIDATOR_TYPE_DATETIMERANGE]=this.wz("min"),this.Yp()):"readOnly"===b&&d?this.hide():"dayFormatter"===b&&(this.au[a.Vc.VALIDATOR_TYPE_DATERESTRICTION]=this.wz("dayFormatter"),this.Yp()),"datePicker"===b&&"currentMonthPos"===c.subkey&&
this.wA(this.options.value),c={max:!0,min:!0,dayFormatter:!0,datePicker:!0,translations:!0},this.Fk()&&b in c&&this.Wm(),g},XC:function(){return this.Zc},_destroy:function(){var a=this._super();this.element.off("focus");this.Zc&&this.Zc.remove();this.Ld&&(this.element.removeProp("disabled"),this.element.removeProp("readonly"));this.zd.remove();return a},Fk:function(){return this.Ld||this.EH.ojPopup("isOpen")},WD:function(){var a=this.options.datePicker.showOn,b=f("\x3cspan\x3e").addClass(this.HD);
if("focus"===a)this.element.on("focus",f.proxy(this.show,this));a=f("\x3cspan title\x3d'"+this.GF()+"'/\x3e").addClass(this.GD+" oj-clickable-icon-nocontext oj-component-icon");b.append(a);var d=this;a.on("click",function(){d.Fk()?d.hide():d.show();return!1}).on("mouseenter",function(){f(this).addClass("oj-hover")}).on("mousedown",function(){f(this).addClass("oj-active")}).on("mouseup",function(){f(this).removeClass("oj-active")}).on("mouseleave",function(){f(this).removeClass("oj-hover oj-active")});
this.VI=a;this.Zc=b;this.element.after(b)},C6:function(a){var b;b=!1;var d=f.ui.keyCode,c=this.Oi;if(this.Fk())switch(a.keyCode){case 84:a.altKey&&a.ctrlKey&&(this.zd.find(".oj-datepicker-current").focus(),b=!0);break;case d.TAB:this.hide();break;case d.ENTER:return b=f("td."+this.LM+":not(."+this.GM+")",this.zd),b[0]&&this.IV(this.Di,this.Aj,b[0],a),a.preventDefault(),a.stopPropagation(),!1;case d.ESCAPE:this.hide();this.element.focus();b=!0;break;case d.PAGE_UP:a.ctrlKey&&a.altKey?this.af(-this.options.datePicker.stepBigMonths,
"M",!0):a.altKey?this.af(-1,"Y",!0):this.af(-this.zu(),"M",!0);b=!0;break;case d.PAGE_DOWN:a.ctrlKey&&a.altKey?this.af(+this.options.datePicker.stepBigMonths,"M",!0):a.altKey?this.af(1,"Y",!0):this.af(+this.zu(),"M",!0);b=!0;break;case d.END:this.zj=this.lu(this.Aj,this.Di);this.Wm(!0);b=!0;break;case d.HOME:this.zj=1;this.Wm(!0);b=!0;break;case d.LEFT:this.af(c?1:-1,"D",!0);a.originalEvent.altKey&&this.af(a.ctrlKey?-this.options.datePicker.stepBigMonths:-this.zu(),"M",!0);b=!0;break;case d.UP:this.af(-7,
"D",!0);b=!0;break;case d.RIGHT:this.af(c?-1:1,"D",!0);a.originalEvent.altKey&&this.af(a.ctrlKey?+this.options.datePicker.stepBigMonths:+this.zu(),"M",!0);b=!0;break;case d.DOWN:this.af(7,"D",!0),b=!0}else a.keyCode===d.HOME&&a.ctrlKey&&(this.show(),b=!0);b&&(a.preventDefault(),a.stopPropagation())},Wm:function(a){this.Yu=4;var b=this.q7();this.zd.empty().append(b.html);var d=f("button",this.zd);0<d.length&&(1===d.length&&f(d[0]).addClass("oj-datepicker-single-button"),f.each(d,function(a,b){f(b).ojButton()}));
this.o4();b.UX&&this.zd.find(".oj-datepicker-calendar").attr("aria-activedescendant",b.UX);b=this.aG();d=b[1];this.zd.removeClass("oj-datepicker-multi-2 oj-datepicker-multi-3 oj-datepicker-multi-4").width("");1<d&&this.zd.addClass("oj-datepicker-multi-"+d).css("width",17*d+"em");this.zd[(1!==b[0]||1!==b[1]?"add":"remove")+"Class"]("oj-datepicker-multi");this.Fk()&&this.element.is(":visible")&&!this.element.is(":disabled")&&(a?(a=this.zd.find(".oj-datepicker-calendar"),a[0]!==document.activeElement&&
a.focus()):this.Ld||this.element[0]===document.activeElement||this.element.focus())},af:function(a,b,d){this.options.disabled||(this.tO(a+("M"===b?this.options.datePicker.currentMonthPos:0),b),this.Wm(d))},V8:function(){var a=new Date;this.zj=a.getDate();this.Hk=this.Di=a.getMonth();this.rm=this.Aj=a.getFullYear();this.af()},JV:function(b,d){var c=parseInt(b.options[b.selectedIndex].value,10);"M"===d?this.Di=this.Hk=c:this.Aj=this.rm=c;f("#"+this.Wl(this.aD)).html(this.qj(this.options.monthWide[this.Hk])+
" "+k.format(a.eb.dateToLocalIso(new Date(this.rm,this.Hk,1))));this.af(0,0,!0)},IV:function(b,d,c,e){f(c).hasClass(this.iO)||this.options.disabled||(this.zj=f("a",c).html(),this.Di=b,this.Aj=d,b=a.eb,(d=this.options.value?b.isoToLocalDate(this.options.value):null)?(c=new Date(this.Aj,this.Di,this.zj),g(d,c),d=c):d=new Date(this.Aj,this.Di,this.zj),b=b.dateToLocalIso(d),d=this.Lc().format(b),this.tj(d),this.tc(b,e),this.hide())},aF:function(b,d){return b?"string"===typeof b?a.eb.isoToLocalDate(b):
new Date(b.getTime()):d},wA:function(a){a=this.aF(a,this.mS());this.zj=a.getDate();this.Hk=this.Di=a.getMonth();this.rm=this.Aj=a.getFullYear();this.tO()},zu:function(){var a=this.options.datePicker.stepMonths;return f.isNumeric(a)?a:this.options.datePicker.numberOfMonths},o4:function(){var a=this.zu(),b=this;this.zd.find("[data-handler]").map(function(){f(this).bind(this.getAttribute("data-event"),{prev:function(d){b.af(-a,"M",!0);d.preventDefault()},next:function(d){b.af(+a,"M",!0);d.preventDefault()},
today:function(a){if("keyup"===a.type&&13===a.keyCode||"click"===a.type)b.V8(),a.preventDefault(),a.stopPropagation()},selectDay:function(a){b.IV(+this.getAttribute("data-month"),+this.getAttribute("data-year"),this,a);return!1},selectMonth:function(){b.JV(this,"M");return!1},selectYear:function(){b.JV(this,"Y");return!1},calendarKey:function(a){b.C6(a)}}[this.getAttribute("data-handler")])})},sba:function(a,b,d){b=b?new Date(b.getFullYear(),b.getMonth(),b.getDate()):null;d=d?new Date(d.getFullYear(),
d.getMonth(),d.getDate()):null;return null!==b&&a<b||null!==d&&a>d},q7:function(){var b,d,c,e,g,f,h=this.options.dayWide,k=this.options.dayNarrow,v=this.options.monthWide,x=this.options.monthAbbreviated,u=this.options.firstDayOfWeek,w,z,B,y,E,C,H,D="",A,G,F,J,N,T,O,I,M=new Date,M=new Date(M.getFullYear(),M.getMonth(),M.getDate()),R=this.Oi;f=this.options.datePicker.footerLayout;var P=this.aG(),K=this.options.datePicker.currentMonthPos,ca=this.options.dayFormatter;I=null;var W=1!==P[0]||1!==P[1],U=
this.lz("min"),V=this.lz("max"),K=this.Hk-K,L=this.rm,ea=new Date(this.Aj,this.Di,this.zj),X=new Date(this.dz()),ba=X.getDate(),S=X.getMonth(),Y=X.getFullYear(),Z=this.options.disabled,fa=this.qj(this.D("weekText")),Q=a.eb;X.setHours(0);X.setMinutes(0);X.setSeconds(0);X.setMilliseconds(0);0>K&&(K+=12,L--);if(U)for(b=new Date(U.getFullYear(),U.getMonth(),U.getDate()),b=V&&V<b?V:b;new Date(L,K,this.lu(L,K))<b;)K++,11<K&&(K=0,L++);if(V)for(b=new Date(V.getFullYear(),V.getMonth()-P[0]*P[1]+1,V.getDate()),
b=U&&b<U?U:b;new Date(L,K,1)>b;)K--,0>K&&(K=11,L--);this.Hk=K;this.rm=L;b=this.qj(this.D("prevText"));b=this.$O(-1,L,K)&&!Z?"\x3ca href\x3d'#' class\x3d'oj-datepicker-prev-icon oj-enabled oj-default oj-component-icon oj-clickable-icon-nocontext' data-handler\x3d'prev' data-event\x3d'click' title\x3d'"+b+"'\x3e\x3c/a\x3e":"\x3ca class\x3d'oj-datepicker-prev-icon oj-disabled oj-component-icon oj-clickable-icon-nocontext' title\x3d'"+b+"'\x3e\x3c/a\x3e";d=this.qj(this.D("nextText"));d=this.$O(1,L,K)&&
!Z?"\x3ca href\x3d'#' class\x3d'oj-datepicker-next-icon oj-enabled oj-default oj-component-icon oj-clickable-icon-nocontext' data-handler\x3d'next' data-event\x3d'click' title\x3d'"+d+"'\x3e\x3c/a\x3e":"\x3ca class\x3d'oj-datepicker-next-icon oj-disabled oj-component-icon oj-clickable-icon-nocontext' title\x3d'"+d+"'\x3e\x3c/a\x3e";c=this.qj(this.D("currentText"));g="";e="\x3cbutton type\x3d'button' class\x3d'oj-datepicker-current oj-priority-secondary' data-handler\x3d'today' data-event\x3d'click keyup'\x3e"+
c+"\x3c/button\x3e";if(1<f.length){c=0;f=[{index:f.indexOf("today"),content:this.rT(M)?e:""}];for(f.sort(function(a,b){return a.index-b.index});c<f.length&&0>f[c].index;)c++;for(;c<f.length;)g+=f[c++].content;0<g.length&&(g="\x3cdiv class\x3d'oj-datepicker-buttonpane'\x3e"+g+"\x3c/div\x3e")}f=this.options.datePicker.weekDisplay;c=this.options.datePicker.daysOutsideMonth;e="";w="all";for(z=0;z<P[0];z++){B="";this.Yu=4;for(y=0;y<P[1];y++){w="all";A="";if(W){A+="\x3cdiv class\x3d'oj-datepicker-group";
if(1<P[1])switch(y){case 0:A+=" oj-datepicker-group-first";w=R?"right":"left";break;case P[1]-1:A+=" oj-datepicker-group-last";w=R?"left":"right";break;default:A+=" oj-datepicker-group-middle",w=""}A+="'\x3e"}A+="\x3cdiv class\x3d'oj-datepicker-header"+(Z?" oj-disabled ":" oj-enabled oj-default ")+"'\x3e"+(/all|left/.test(w)&&0===z?R?d:b:"")+(/all|right/.test(w)&&0===z?R?b:d:"")+this.r7(K,L,U,V,0<z||0<y,v,x,W)+"\x3c/div\x3e\x3ctable class\x3d'oj-datepicker-calendar"+(Z?" oj-disabled ":" oj-enabled oj-default ")+
"' tabindex\x3d-1 data-handler\x3d'calendarKey' data-event\x3d'keydown' aria-readonly\x3d'true' role\x3d'grid' aria-labelledby\x3d'"+this.Wl(this.aD)+"'\x3e\x3cthead role\x3d'presentation'\x3e\x3ctr role\x3d'row'\x3e";G="number"===f?"\x3cth class\x3d'oj-datepicker-week-col'\x3e"+this.qj(this.D("weekHeader"))+"\x3c/th\x3e":"";for(w=0;7>w;w++)F=(w+parseInt(u,10))%7,G+="\x3cth role\x3d'columnheader' aria-label\x3d'"+h[F]+"'"+(5<=(w+u+6)%7?" class\x3d'oj-datepicker-week-end'":"")+"\x3e\x3cspan title\x3d'"+
h[F]+"'\x3e"+k[F]+"\x3c/span\x3e\x3c/th\x3e";A+=G+"\x3c/tr\x3e\x3c/thead\x3e\x3ctbody role\x3d'presentation'\x3e";G=this.lu(L,K);L===Y&&K===S&&(ba=Math.min(ba,G));w=(this.W7(L,K)-u+7)%7;G=Math.ceil((w+G)/7);this.Yu=G=W?this.Yu>G?this.Yu:G:G;F=new Date(L,K,1-w);for(J=0;J<G;J++){A+="\x3ctr role\x3d'row'\x3e";w=this.Lc().an(Q.dateToLocalIso(F));N="none"===f?"":"\x3ctd class\x3d'oj-datepicker-week-col' role\x3d'rowheader' aria-label\x3d'"+fa+" "+w+"'\x3e"+w+"\x3c/td\x3e";for(w=0;7>w;w++){O=F.getMonth()!==
K;E=F.getTime()===X.getTime();C="oj-dp-"+this.uuid+"-"+J+"-"+w+"-"+z+"-"+y;(H=F.getTime()===ea.getTime()&&K===this.Di)&&(D=C);T=[!0,""];I=F.getFullYear();var aa=F.getMonth(),ga=F.getDate();ca&&(I=ca({fullYear:I,month:aa+1,date:ga}))&&(T=[!I.disabled,I.className||""],I.tooltip&&T.push(I.tooltip));aa=F.getTime()===X.getTime();I=O&&"selectable"!==c||!T[0]||this.sba(F,U,V);N+="\x3ctd role\x3d'gridcell' aria-disabled\x3d'"+!!I+"' aria-selected\x3d'"+E+"' id\x3d'"+C+"' class\x3d'"+(5<=(w+u+6)%7?" oj-datepicker-week-end":
"")+(O?" oj-datepicker-other-month":"")+(H?" "+this.LM:"")+(I||Z?" "+this.iO+" oj-disabled":" oj-enabled ")+(O&&"hidden"===c?"":" "+T[1]+(E?" "+this.GM:"")+(F.getTime()===M.getTime()?" oj-datepicker-today":""))+"'"+(O&&"hidden"===c||!T[2]?"":" title\x3d'"+T[2].replace(/'/g,"\x26#39;")+"'")+(I?"":" data-handler\x3d'selectDay' data-event\x3d'click' data-month\x3d'"+F.getMonth()+"' data-year\x3d'"+F.getFullYear()+"'")+"\x3e"+(O&&"hidden"===c?"\x26#xa0;":I||Z?"\x3cspan class\x3d'oj-disabled'\x3e"+F.getDate()+
"\x3c/span\x3e":"\x3ca class\x3d'oj-enabled"+(aa?" oj-selected":"")+(O?" oj-priority-secondary":"")+"' "+(aa||H?"":"tabindex\x3d'-1' ")+" href\x3d'#'\x3e"+F.getDate()+"\x3c/a\x3e")+"\x3c/td\x3e";F.setDate(F.getDate()+1)}A+=N+"\x3c/tr\x3e"}K++;11<K&&(K=0,L++);A+="\x3c/tbody\x3e\x3c/table\x3e"+(W?"\x3c/div\x3e"+(0<P[0]&&y===P[1]-1?"\x3cdiv class\x3d'oj-datepicker-row-break'\x3e\x3c/div\x3e":""):"");B+=A}e+=B}return{html:e+g,UX:D}},r7:function(b,d,c,e,g,f,h,t){var v,x,u,w,z=this.options.datePicker.changeMonth,
B=this.options.datePicker.changeYear,y=a.La.oZ()?"before":"after",E="\x3cdiv class\x3d'oj-datepicker-title' role\x3d'header'\x3e",C="",H=this.options.disabled,D=a.eb;if(g||"none"===z)C+="\x3cspan class\x3d'oj-datepicker-month'\x3e"+f[b]+"\x3c/span\x3e";else{v=c&&c.getFullYear()===d;x=e&&e.getFullYear()===d;C+="\x3cselect tabindex\x3d'-1' class\x3d'oj-datepicker-month "+(H?"oj-disabled' disabled":"oj-enabled'")+" data-handler\x3d'selectMonth' data-event\x3d'change' role\x3d'listbox'\x3e";for(u=0;12>
u;u++)(!v||u>=c.getMonth())&&(!x||u<=e.getMonth())&&(C+="\x3coption role\x3d'option' value\x3d'"+u+"' aria-selected\x3d'"+(u===b?"true' selected\x3d'selected'":"false'")+"\x3e"+h[u]+"\x3c/option\x3e");C+="\x3c/select\x3e"}"before"===y&&(E+=C+(g||"select"!==z||"select"!==B?"\x26#xa0;":""));if(!this.Jl)if(this.Jl="",g||"none"===B)E+="\x3cspan class\x3d'oj-datepicker-year'\x3e"+k.format(D.dateToLocalIso(new Date(d,b,1)))+"\x3c/span\x3e";else{v=this.options.datePicker.yearRange.split(":");w=(new Date).getFullYear();
x=function(a){a=a.match(/c[+\-].*/)?d+parseInt(a.substring(1),10):a.match(/[+\-].*/)?w+parseInt(a,10):parseInt(a,10);return isNaN(a)?w:a};h=x(v[0]);v=Math.max(h,x(v[1]||""));h=c?Math.max(h,c.getFullYear()):h;v=e?Math.min(v,e.getFullYear()):v;for(this.Jl+="\x3cselect tabindex\x3d'-1' class\x3d'oj-datepicker-year "+(H?"oj-disabled' disabled":"oj-enabled'")+" data-handler\x3d'selectYear' data-event\x3d'change' role\x3d'listbox'\x3e";h<=v;h++)this.Jl+="\x3coption role\x3d'option' value\x3d'"+h+"' aria-selected\x3d'"+
(h===d?"true' selected\x3d'selected'":"false'")+"\x3e"+k.format(D.dateToLocalIso(new Date(h,b,1)))+"\x3c/option\x3e";this.Jl+="\x3c/select\x3e";E+=this.Jl;this.Jl=null}"after"===y&&(E+=(g||"select"!==z||"select"!==B?"\x26#xa0;":"")+C);t&&g||(E+="\x3cspan class\x3d'oj-helper-hidden-accessible' id\x3d'"+this.Wl(this.aD)+"'\x3e"+f[b]+" "+k.format(D.dateToLocalIso(new Date(d,b,1)))+"\x3c/span\x3e",E+="\x3cspan class\x3d'oj-helper-hidden-accessible' id\x3d'"+this.Wl(this.KM)+"'\x3e"+this.qj(this.D("datePicker"))+
"\x3c/span\x3e");return E+"\x3c/div\x3e"},tO:function(a,b){var d=this.rm+("Y"===b?a:0),c=this.Hk+("M"===b?a:0),e=Math.min(this.zj,this.lu(d,c))+("D"===b?a:0),d=new Date(d,c,e);this.zj=d.getDate();this.Hk=this.Di=d.getMonth();this.rm=this.Aj=d.getFullYear()},aG:function(){var a=this.options.datePicker.numberOfMonths,a="string"===typeof a?parseInt(a,10):a;return null==a?[1,1]:"number"===typeof a?[1,a]:a},lz:function(a){return this.aF(this.options[a],null)},lu:function(a,b){return 32-(new Date(a,b,32)).getDate()},
W7:function(a,b){return(new Date(a,b,1)).getDay()},$O:function(a,b,d){var c=this.aG();b=new Date(b,d+(0>a?a:c[0]*c[1]),1);0>a&&b.setDate(this.lu(b.getFullYear(),b.getMonth()));return this.rT(b)},rT:function(a){var b,d,c=this.lz("min"),e=this.lz("max"),g=null,f=null;if(b=this.options.datePicker.yearRange)b=b.split(":"),d=(new Date).getFullYear(),g=parseInt(b[0],10),f=parseInt(b[1],10),b[0].match(/[+\-].*/)&&(g+=d),b[1].match(/[+\-].*/)&&(f+=d);return(!c||a.getTime()>=c.getTime())&&(!e||a.getTime()<=
e.getTime())&&(!g||a.getFullYear()>=g)&&(!f||a.getFullYear()<=f)},GF:function(){return this.qj(this.D("tooltipCalendar"+(this.options.disabled?"Disabled":"")))},mQ:function(a){this.Zc&&(c(this.Zc.children(),a),this.Zc.find("."+this.GD).attr("title",this.GF()));a&&this.hide();this.Ld&&this.Wm()},WC:function(){this.Ld||this._superApply(arguments)},yH:function(a){this.Ld||this._superApply(arguments)},cA:function(a){if(!this.Ld){this._superApply(arguments);var b=f.ui.keyCode,d=!1;if(this.Fk())switch(a.keyCode){case b.TAB:this.hide();
break;case b.ESCAPE:this.hide();d=!0;break;case b.UP:case b.DOWN:this.zd.find(".oj-datepicker-calendar").focus(),d=!0}else switch(a.keyCode){case b.UP:case b.DOWN:this.tc(this.og(),a),this.show(),d=!0}if(d)return a.preventDefault(),a.stopPropagation(),!1}},tj:function(a){this.Ld||this._superApply(arguments);this.wA(this.dz());this.Fk()&&this.Wm()},Lc:function(){return this.options.converter?this._superApply(arguments):f.oj.ojInputDate.prototype.options.converter},fq:function(){return this.options.value||
""},_GetDefaultStyleClass:function(){return"oj-inputdate"},lt:function(){var b=this._superApply(arguments);if(null!=this.options.min||null!=this.options.max)this.au[a.Vc.VALIDATOR_TYPE_DATETIMERANGE]=this.wz("min");null!=this.options.dayFormatter&&(this.au[a.Vc.VALIDATOR_TYPE_DATERESTRICTION]=this.wz("dayFormatter"));return f.extend(this.au,b)},yi:function(){this.hide()},$l:function(){this.hide()},wz:function(d){var c=null;"min"===d||"max"===d?c=b(this.options,this.Lc()):"dayFormatter"===d&&(d={dayFormatter:this.options.dayFormatter,
converter:this.Lc()},f.extend(d,this.options.translations.dateRestriction||{}),c=a.na.Kp(a.Vc.VALIDATOR_TYPE_DATERESTRICTION).createValidator(d));return c},mS:function(){var a=new Date;a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a},dz:function(){return this.aF(this.options.value,this.mS())},getNodeBySubId:function(a){var b=null,d=a&&a.subId,c=this.zd;if(d)switch(d){case "oj-datepicker-content":b=c[0];break;case "oj-inputdatetime-calendar-icon":b=f(".oj-inputdatetime-calendar-icon",
this.Zc)[0];break;case "oj-datepicker-prev-icon":b=f(".oj-datepicker-prev-icon",c)[0];break;case "oj-datepicker-next-icon":b=f(".oj-datepicker-next-icon",c)[0];break;case "oj-datepicker-month":b=f(".oj-datepicker-month",c)[0];break;case "oj-datepicker-year":b=f(".oj-datepicker-year",c)[0];break;case "oj-datepicker-current":b=f(".oj-datepicker-current",c)[0];break;case "oj-inputdatetime-date-input":b=this.Ld?null:this.element[0];break;default:b=null}return b||this._superApply(arguments)},getSubIdByNode:function(a){var b=
this.zd,d=null,c=[{selector:".oj-inputdatetime-calendar-icon",ele:this.Zc},{selector:".oj-datepicker-prev-icon",ele:b},{selector:".oj-datepicker-next-icon",ele:b},{selector:".oj-datepicker-month",ele:b},{selector:".oj-datepicker-year",ele:b},{selector:".oj-datepicker-current",ele:b}];if(a===b[0])return"oj-datepicker-content";if(!this.Ld&&a===this.element[0])return"oj-inputdatetime-date-input";for(var b=0,e=c.length;b<e;b++){var g=c[b],h=f(g.selector,g.ele);if(1===h.length&&h[0]===a){d=g.selector.substr(1);
break}}return d||this._superApply(arguments)},hide:function(){this.Fk()&&!this.Ld&&(this.EH.ojPopup("close"),"focus"===this.options.datePicker.showOn&&(this.YG=!0),this.element.focus());return this},refresh:function(){this.Zc&&this.Zc.find("."+this.GD).attr("title",this.GF());return this._superApply(arguments)||this},show:function(){if(!(this.Fk()||this.options.disabled||this.options.readOnly))if(this.YG)this.YG=!1;else{var b=this.Oi;this.zd.empty();this.Wm();b=a.jd.Kg({my:"start top",at:"start bottom",
of:this.element,collision:"fit"},b);this.EH.ojPopup("open",this.VI,b);return this}}});a.Components.WB({ojInputDate:{firstDayOfWeek:a.Components.hs(function(){return a.La.wY()}),dayWide:a.Components.hs(function(){return a.La.gw("wide")}),dayNarrow:a.Components.hs(function(){return a.La.gw("narrow")}),monthWide:a.Components.hs(function(){return a.La.iw("wide")}),monthAbbreviated:a.Components.hs(function(){return a.La.iw("abbreviated")})}});a.Da("oj.ojInputTime",f.oj.inputBase,{version:"1.0.0",widgetEventPrefix:"oj",
_CLASS_NAMES:"oj-inputdatetime-input",_WIDGET_CLASS_NAMES:"oj-inputdatetime-time-only oj-component oj-inputdatetime",hD:"oj-inputdatetime-input-container",_ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES:"",_INPUT_HELPER_KEY:"inputHelp",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],_GET_INIT_OPTIONS_PROPS:[{X:"disabled",ra:!1,rc:!0},{X:"pattern",ra:""},{X:"title",ra:""},{X:"placeholder",ra:""},{X:"value",ra:null,je:d},{X:"required",ra:!1,je:!0,rc:!0},{X:"readonly",option:"readOnly",ra:!1,rc:!0},{X:"min",ra:null,
je:d},{X:"max",ra:null,je:d}],w3:"ojInputTime",HD:"oj-inputdatetime-input-trigger",ID:"oj-inputdatetime-time-icon",options:{converter:a.na.jl(a.kj.CONVERTER_TYPE_DATETIME).createConverter({hour:"2-digit",hour12:!0,minute:"2-digit"}),max:void 0,min:void 0,datePickerComp:null,timePicker:{timeIncrement:"00:30:00:00"}},ae:function(b,d){this._super(b,d);null===this.options.datePickerComp&&a.Be.vl(this._GET_INIT_OPTIONS_PROPS,d,this)},xx:function(){this.CI={};this.Ek=this.options.datePickerComp;this.Pf=
f("\x3cdiv id\x3d'"+this.Wl(this.w3)+"' class\x3d'oj-listbox-drop' style\x3d'display:none'\x3e\x3c/div\x3e");f("body").append(this.Pf);var a=this;this.FH=this.Pf.ojPopup({initialFocus:"none",rootAttributes:{"class":"datetimepicker-dropdown"},chrome:"none",open:function(){var b=f("[aria-selected]",a.Pf);1===b.length&&a.eP(b.parent(),!0);f("ul",a.Pf).focus()},beforeClose:function(){a.RW=f("ul",a.Pf).scrollTop()}});this.Cm()&&(this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES+=this.hD)},Kv:function(){return this.FH.ojPopup("isOpen")},
_ComponentCreate:function(){this.xx();var a=this._superApply(arguments);this.Tk()&&!this.oT()&&(this._CLASS_NAMES="");this.WD();return a},Ug:function(){var a=this._superApply(arguments);c(this.Zc.children(),this.options.disabled);return a},_setOption:function(d,e,g){var f=null;if("value"===d)return e||(e=null),f=this._super(d,e,g),this.Uy(),f;f=this._superApply(arguments);"disabled"===d?(e&&this.hide(),this.Zc.find("."+this.ID).attr("title",this.pG()),c(this.Zc.children(),e)):"max"!==d&&"min"!==d||
this.Tk()?"readOnly"===d&&e&&this.hide():(this.CI[a.Vc.VALIDATOR_TYPE_DATETIMERANGE]=b(this.options,this.Lc()),this.Yp());d in{max:!0,min:!0,converter:!0,timePicker:!0}&&this.Uy();return f},_destroy:function(){var a=this._super();this.Zc&&this.Zc.remove();this.Pf.remove();return a},WC:function(){this.Cm()&&this._superApply(arguments)},XC:function(){return this.Zc},cA:function(a){if(this.Cm()){this._superApply(arguments);var b=f.ui.keyCode,d=!1;if(this.Kv())switch(a.keyCode){case b.TAB:this.hide();
break;case b.ESCAPE:this.hide();d=!0;break;case b.UP:case b.DOWN:f("ul",this.Pf).focus(),d=!0}else switch(a.keyCode){case b.UP:case b.DOWN:this.tc(this.og(),a),this.show(),d=!0}if(d||a.keyCode===b.ENTER)return a.preventDefault(),a.stopPropagation(),!1}},pG:function(){return this.qj(this.D("tooltipTime"+(this.options.disabled?"Disabled":"")))},WD:function(){var a=this.Cm(),b=a?f(f("\x3cspan\x3e").addClass(this.HD)):f("+ span",this.element),d=f("\x3cspan title\x3d'"+this.pG()+"'/\x3e").addClass(this.ID+
" oj-clickable-icon-nocontext oj-component-icon");b.append(d);var c=this;d.on("click",function(){c.Kv()?c.hide():c.show()}).on("mouseenter",function(){f(this).addClass("oj-hover")}).on("mousedown",function(){f(this).addClass("oj-active")}).on("mouseup",function(){f(this).removeClass("oj-active")}).on("mouseleave",function(){f(this).removeClass("oj-hover oj-active")});this.VI=d;this.Zc=b;a&&this.element.after(b)},x$:function(a,b,d){return null!==b&&a<b||null!==d&&a>d},Co:function(){return this.Tk()?
this.Ek.widget.VY():this.options.value},Uy:function(){var b=this.Co(),d=this.Lc(),c=f("\x3cul class\x3d'oj-listbox-results' tabindex\x3d'-1' role\x3d'listbox'\x3e\x3c/ul\x3e"),d=b?d.format(b):"",e=[],g,b=b?a.eb.isoToLocalDate(b):new Date;b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0);e=this.Q8(b);d=d||e[0].value;this.Pf.empty();b=0;for(g=e.length;b<g;b++){var h=e[b].value,k=e[b].minMaxRange,t=f("\x3cli class\x3d'oj-listbox-result "+(k?"oj-disabled":"")+"' role\x3d'presentation'\x3e"),
v=this.uuid+"_sel"+b,k=f("\x3cdiv class\x3d'oj-listbox-result-label' "+(k?"aria-disabled ":"")+"data-value\x3d'"+h+"' role\x3d'option' id\x3d'"+v+"'\x3e"+e[b].label+"\x3c/li\x3e");d===h&&(k.attr("aria-selected","true"),t.addClass("oj-hover"),c.attr("aria-activedescendant",v));t.append(k);c.append(t)}this.Pf.append(c);f(".oj-listbox-result",c).on("mousemove",function(){var a=f(this);a.hasClass("oj-disabled")||(f(".oj-hover",c).removeClass("oj-hover"),a.addClass("oj-hover"),c.attr("aria-activedescendant",
a.children()[0].id))});var x=this;c.on("click",function(a){var b=f(a.target);b.hasClass("oj-disabled")||void 0!==b.attr("aria-disabled")||(x.hide(),x.GU(a))}).on("keydown",function(a){x.jea(a)})},Q8:function(b){var d=[],c=this.Lc();if(b){var e=this.options.timePicker.timeIncrement.split(":"),g=a.eb,f=this.Tk(),h=f?this.Ek.widget.options.min:this.options.min,f=f?this.Ek.widget.options.max:this.options.max,h=h?g.isoToLocalDate(h):null,f=f?g.isoToLocalDate(f):null;if(4===e.length){var k=parseInt(e[0].substring(0),
10),v=parseInt(e[1],10),x=parseInt(e[2],10),e=parseInt(e[3],10),u=new Date(b),w="";do w=c.format(g.dateToLocalIso(u)),d.push({label:w,value:w,minMaxRange:this.x$(u,h,f)}),u.setHours(u.getHours()+k),u.setMinutes(u.getMinutes()+v),u.setSeconds(u.getSeconds()+x),u.setMilliseconds(u.getMilliseconds()+e);while(u.getDate()===b.getDate())}else throw Error("timeIncrement value should be in the format of hh:mm:ss:SS");}return d},jea:function(a){if(this.Kv()){var b=f.ui.keyCode,d=!1;switch(a.keyCode){case b.TAB:this.hide();
break;case b.ESCAPE:this.hide();this.element.focus();d=!0;break;case b.UP:this.BU(a,"prev");d=!0;break;case b.DOWN:this.BU(a,"next");d=!0;break;case b.ENTER:this.GU(a),d=!0}if(d)return a.preventDefault(),a.stopPropagation(),!1}},BU:function(a,b){var d=f(".oj-hover",this.Pf),c=f("ul",this.Pf),e=null;1===d.length?(e=d[b](),1===e.length&&d.removeClass("oj-hover")):e=f(c.children()[0]);e&&1===e.length&&(e.addClass("oj-hover"),c.attr("aria-activedescendant",e.children()[0].id),this.eP(e))},GU:function(a){var b=
this.Pf,d=f("[aria-selected]",b),c=f("ul",b),b=f(".oj-hover div",b);1===b.length&&(1===d.length&&(d.removeAttr("aria-selected"),d.parent().removeClass("oj-hover")),b.attr("aria-selected","true"),b.parent().addClass("oj-hover"),this.hide(),this.tj(b.attr("data-value")),this.tc(b.attr("data-value"),a),c.attr("aria-activedescendant",b[0].id),this.element.focus(),this.Tk()&&this.Ek.widget.hide())},yH:function(a){this.Cm()&&this._superApply(arguments)},show:function(){if(!this.options.disabled&&!this.options.readOnly){this.Tk()&&
this.Ek.widget.hide();this.Uy();var b=this.Pf,d=this.FH;b.width(this.element.parent().width());b.css({position:"relative"});b=a.jd.Kg({my:"start top",at:"start bottom",of:this.element,collision:"fit"},this.Oi);d.ojPopup("open",this.VI,b)}},hide:function(){this.Kv()&&(this.FH.ojPopup("close"),this.element.focus())},refresh:function(){this.Zc&&this.Zc.find("."+this.ID).attr("title",this.pG());return this._superApply(arguments)||this},tj:function(a){this.Cm()&&this._superApply(arguments);this.Kv()&&
this.Uy()},tc:function(b,d,c){if(this.Tk()){this._super(b,null,c);try{var e=this.Lc().parse(b),f=a.eb,h=this.Ek.widget,k=h.VY(),t=k?f.isoToLocalDate(k):new Date,v=g(e?f.isoToLocalDate(e):new Date,new Date(t)),x=f.dateToLocalIso(v);t.getTime()!=v.getTime()&&h.Hha(x,d)}catch(u){}}else this._superApply(arguments)},jt:function(){return this.Cm()},Cm:function(){return!this.Tk()||this.oT()},_GetDefaultStyleClass:function(){return"oj-inputtime"},fq:function(){return this.options.value||""},lt:function(){var d=
this._superApply(arguments);null==this.options.min&&null==this.options.max||this.Tk()||(this.CI[a.Vc.VALIDATOR_TYPE_DATETIMERANGE]=b(this.options,this.Lc()));return f.extend(this.CI,d)},Lc:function(){return this.options.converter?this._superApply(arguments):f.oj.ojInputTime.prototype.options.converter},eP:function(a,b){var d=a.parent();b&&this.RW&&f(d).scrollTop(this.RW);var c=f(d).scrollTop(),e=c+f(d).height(),g=a[0].offsetTop,h=g+f(a).height();g<c?f(d).scrollTop(g):h>e&&f(d).scrollTop(h-f(d).height())},
Tk:function(){return null!==this.Ek},oT:function(){return this.Ek.inline},yi:function(){this.hide()},$l:function(){this.hide()},getNodeBySubId:function(a){var b=null,d=a&&a.subId;if(d)switch(d){case "oj-listbox-drop":b=this.Pf[0];break;case "oj-inputdatetime-time-icon":b=f(".oj-inputdatetime-time-icon",this.Zc)[0];break;case "oj-inputdatetime-time-input":b=this.element[0];break;default:b=null}return b||this._superApply(arguments)},getSubIdByNode:function(a){var b=f(".oj-inputdatetime-time-icon",this.Zc),
d=null;a===this.Pf[0]?d="oj-listbox-drop":a===b[0]?d="oj-inputdatetime-time-icon":a===this.element[0]&&(d="oj-inputdatetime-time-input");return d||this._superApply(arguments)},widget:function(){return this.Cm()?this._super():this.Ek.widget.widget()}});a.Da("oj.ojInputDateTime",f.oj.ojInputDate,{version:"1.0.0",widgetEventPrefix:"oj",_WIDGET_CLASS_NAMES:"oj-inputdatetime-date-time oj-component oj-inputdatetime",_INPUT_HELPER_KEY:"inputHelpBoth",options:{converter:a.na.jl(a.kj.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",
month:"2-digit",year:"2-digit",hour:"2-digit",hour12:!0,minute:"2-digit"}),timePicker:{timeIncrement:"00:30:00:00"}},xx:function(){this._super();this.Qr=this.element;this.hA=this.KA=this.Of=null},_ComponentCreate:function(){var b=this._super(),d=this.lS(this.Lc());if(null===d)throw Error("Please use ojInputDate if you do not have time portion");if(this.Ld){var c=f("\x3cinput type\x3d'text'\x3e");c.insertAfter(this.element);this.Qr=c}for(var c=["title","placeholder","disabled","required","readOnly"],
e={},g=0,h=c.length;g<h;g++)e[c[g]]=this.options[c[g]];this.Of=this.Qr.ojInputTime(f.extend(e,{converter:d,displayOptions:{converterHint:"none",title:"none",messages:this.options.displayOptions.messages},value:a.eb.dateToLocalIso(this.dz()),timePicker:this.options.timePicker,datePickerComp:{widget:this,inline:this.Ld}}));return b},_setOption:function(a,b,d){var c=this._superApply(arguments);"value"===a&&(this.hA=b);this.Of&&(a in{disabled:!0,readOnly:!0}?this.Of.ojInputTime("option",a,b):"timePicker"===
a?this.Of.ojInputTime("option","timePicker.timeIncrement",b.timeIncrement):"converter"===a&&(this.KA=null,this.Of.ojInputTime("option",a,this.lS(this.Lc()))));return c},_destroy:function(){var a=this._super();this.Of.ojInputTime("destroy");this.Ld&&this.Qr.remove();return a},lS:function(b){if(null!==this.KA)return this.KA;b=b.resolvedOptions();var d={},c="hour hour12 minute second millisecond timeFormat".split(" "),e,g;e=0;for(g=c.length;e<g;e++)c[e]in b&&("timeFormat"===c[e]&&(d.formatType="time"),
d[c[e]]=b[c[e]]);if(f.isEmptyObject(d))throw Error("Plase use ojInputDateTime's converter is lacking the time portion");return this.KA=b=a.na.jl(a.kj.CONVERTER_TYPE_DATETIME).createConverter(d)},Hha:function(a,b){this.tj(this.Lc().format(a));this.tc(a,b)},VY:function(){return this.isValid()?this.options.value:this.hA?this.Lc().parse(this.hA):null},tc:function(a,b,d){this._superApply(arguments);this.hA=a},cA:function(a){var b=f.ui.keyCode,d=!1;switch(a.keyCode){case b.UP:case b.DOWN:a.shiftKey&&(this.tc(this.og(),
a),this.Of.ojInputTime("show"),d=!0)}return d?(a.preventDefault(),a.stopPropagation(),!1):this._superApply(arguments)},show:function(){this.Of.ojInputTime("hide");return this._super()},showTimePicker:function(){this.hide();return this.Of.ojInputTime("show")},hideTimePicker:function(){return this.Of.ojInputTime("hide")},refresh:function(){var a=this._superApply(arguments)||this;this.Of.ojInputTime("refresh");return a},getNodeBySubId:function(a){var b=a&&a.subId,d=null;b&&("oj-listbox-drop"===b||"oj-inputdatetime-time-icon"===
b?d=this.Of.ojInputTime("getNodeBySubId",a):"oj-inputdatetime-date-input"===b&&(d=this.Ld?this.Qr[0]:this.element[0]));return d||this._superApply(arguments)},getSubIdByNode:function(a){var b=null;this.Ld?a===this.Qr[0]&&(b="oj-inputdatetime-date-input"):a===this.element[0]&&(b="oj-inputdatetime-date-input");return b||this.Of.ojInputTime("getSubIdByNode",a)||this._superApply(arguments)},Lc:function(){return this.options.converter?this._superApply(arguments):f.oj.ojInputDateTime.prototype.options.converter},
yi:function(){this._superApply(arguments);this.Of&&this.hideTimePicker()},$l:function(){this._superApply(arguments);this.Of&&this.hideTimePicker()},_GetMessagingLauncherElement:function(){return this.Ld?this.Qr:this._super()},_GetDefaultStyleClass:function(){return"oj-inputdatetime"},tx:function(){return"oj-ojInputDate"}})});