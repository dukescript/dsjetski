/**
 * Copyright (c) 2014, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.
    // Map the D namespace to dvt, which is used to provide access across partitions.
  var D = dvt;
  D.gO=(0,D.t)();(0,D.ca)("DvtLegend",D.gO);D.z.q(D.gO,D.Oj,"DvtLegend");D.vo=function(a,b,c){var d=new D.gO;d.Init(a,b,c);return d};D.gO.newInstance=D.vo;D.gO.getDefaults=function(a){return(0,D.Pj)(new D.hO,a)};D.gO.prototype.Init=function(a,b,c){D.gO.u.Init.call(this,a,b,c);this.setId("legend1000"+window.Math.floor(1E9*window.Math.random()));this.Of=new D.hO;this.ra=new D.iO(this);this.ra.We(this);this.nn=[];this.cG=[];this.La=D.o;this.c$=[]};
D.gO.prototype.Ud=function(a){a?(this.J=this.Of.wj(a),(0,D.jO)(this,this.J.sections)):this.J||(this.J=(0,D.Tj)(this))};D.gO.prototype.Ap=function(a,b,c){this.Ud(a);this.A().isLayout=D.k;a=D.kO.U(this,new D.B(0,0,b,c));this.A().isLayout=D.p;return new D.Kg(a.e,a.g)};D.gO.prototype.getPreferredSize=D.gO.prototype.Ap;
D.gO.prototype.U=function(a,b,c){this.Ud(a);!(0,window.isNaN)(b)&&!(0,window.isNaN)(c)&&(this.Za=b,this.ob=c);this.A().isLayout=D.p;this.Ql();this.nn=[];this.cG=[];this.La=D.o;this.c$=[];(0,D.Mf)()||(0,D.ql)(this.ra,new D.lO(this.ra,this));this.Ro();this.W4=D.kO.U(this,new D.B(0,0,this.Za,this.ob));(a=this.A().highlightedCategories)&&0<a.length&&this.Fe(a);return this.W4};D.gO.prototype.render=D.gO.prototype.U;
D.gO.prototype.Fe=function(a){this.A().highlightedCategories=a&&0<a.length?a.slice():D.o;(0,D.Kl)(a,this.nn,D.k)};D.gO.prototype.highlight=D.gO.prototype.Fe;D.gO.prototype.Rd=function(a,b){var c=a.Xa();if(("categoryRollOver"==c||"categoryRollOut"==c)&&"dim"==this.A().hoverBehavior){var d=this.nn;this!=b&&this.Fe(a.categories);for(var e=0;e<d.length;e++)if(d[e].getId()==a.Jk){this.BGa.scrollIntoView(d[e].Nd()[0]);break}}(this==b||"showPopup"==c||"hidePopup"==c)&&this.Wa(a)};D.gO.prototype.za=(0,D.x)("ra");
D.gO.prototype.Y=function(){this.ra&&(this.ra.zk(this),this.ra.Y(),this.ra=D.o);D.gO.u.Y.call(this)};D.gO.prototype.destroy=D.gO.prototype.Y;D.gO.prototype.y3=(0,D.v)("La");D.gO.prototype.dg=function(){return new D.mO(this)};D.gO.prototype.getAutomation=D.gO.prototype.dg;D.gO.prototype.NR=function(){return this.ra.Od()};
D.Il=function(a,b,c){for(var d=a.cG,e=0;e<d.length;e++)if(d[e].getId()==b.getId()){(0,D.Gl)(a.ra,d[e]);c&&d[e].Be();break}if(b=a.NR())c=b.Nd()[0],c.Mb("label",b.nc()),(0,D.Ig)(a.j(),c)};D.gO.prototype.G=function(a){var b=new D.B(0,0,this.Za,this.ob);return!a||a===this?b:(0,D.Pg)(this,b,a)};D.gO.prototype.Ev=function(a){return!a||a===this?this.W4:(0,D.Pg)(this,this.W4,a)};D.gO.prototype.Yj=function(){return(0,D.O)("DvtUtilBundle","LEGEND")};
D.jO=function(a,b){if(b&&!(0>=b.length))for(var c=a.A().hiddenCategories,d=0;d<b.length;d++){var e=b[d];e.sections&&(c=(0,D.jO)(a,e.sections));if((e=e.items)&&!(0>=e.length))for(var f=0;f<e.length;f++){var g=e[f],h=D.kO.SZ(g);"hidden"==g.categoryVisibility&&0>D.eg.Sa(c,h)&&c.push(h);g.categoryVisibility=D.o}}};
D.gO.prototype.Ro=function(){if((0,D.YD)(this)){var a=this.A(),b=a.hideAndShowBehavior;if("off"!=b&&"none"!=b||"dim"==a.hoverBehavior)this.j().ld("application"),(0,D.ZD)(this.j(),(0,D.O)("DvtUtilBundle","COLON_SEP_LIST",[(0,D.O)("DvtUtilBundle","DATA_VISUALIZATION"),D.og.OA(this.Yj())]))}};D.gO.prototype.BH=function(){return 0<this.cG.length};
D.rm={};(0,D.ca)("DvtLegendConstants",D.rm);D.z.q(D.rm,D.z,"DvtLegendConstants");D.rm.iI="background";D.rm.BACKGROUND=D.rm.iI;D.rm.xI="legendItem";D.rm.LEGEND_ITEM=D.rm.xI;D.rm.fr="title";D.rm.TITLE=D.rm.fr;
D.mO=function(a){this.Hb=a;this.je=this.Hb.A()};(0,D.ca)("DvtLegendAutomation",D.mO);D.z.q(D.mO,D.Wj,"DvtLegendAutomation");D.mO.prototype.Xl=function(a){if((a=(0,D.Xj)(this.Hb.za(),a))&&a instanceof D.nO)if(a=a.getData(),a=(0,D.oO)(this,a,this.je))return"section"+a;return D.o};
D.oO=function(a,b,c){if(c.sections&&0<c.sections.length){for(var d=0;d<c.sections.length;d++){if(c.sections[d]==b)return"["+d+"]";var e=(0,D.oO)(a,b,c.sections[d]);if(e)return"["+d+"]"+e}return D.o}if(c.items&&0<c.items.length){for(a=0;a<c.items.length;a++)if(c.items[a]==b)return":item["+a+"]";return D.o}};
D.Hm=function(a,b,c){if(c.sections&&0<c.sections.length){for(var d=0;d<c.sections.length;d++){var e=(0,D.Hm)(a,b,c.sections[d]);if(e)return"["+d+"]"+e}return D.o}if(c.items&&0<c.items.length){for(a=0;a<c.items.length;a++)if(c.items[a].text==b.name)return":item["+a+"]";return D.o}};
D.Cm=function(a,b,c){var d=c.indexOf("["),e=c.indexOf("]");if(0<=d&&0<=e){var d=c.substring(d+1,e),f=c.indexOf(":");c=c.substring(e+1);e=c.indexOf("]");return 0<=c.indexOf("[")&&0<=e?(0,D.Cm)(a,b.sections[d],c):0==f?b.items[d]:b.sections[d]}};D.mO.prototype.fg=function(a){if("tooltip"==a)return(0,D.Fm)(this.Hb);a=(0,D.Cm)(this,this.je,a);for(var b=this.Hb.nn,c=0;c<b.length;c++){var d=b[c].getData();if(a==d)return b[c].Nd()[0].Aa()}return D.o};D.mO.prototype.getDomElementForSubId=D.mO.prototype.fg;
D.mO.prototype.Sx=function(){return this.je.title};D.mO.prototype.getTitle=D.mO.prototype.Sx;D.mO.prototype.getItem=function(a){for(var b,c=a.shift(),d=this.je;c!=D.i;)0<a.length?d=d.sections[c]:b=d.items[c],c=a.shift();return{text:b.text?b.text:D.o}};D.mO.prototype.getItem=D.mO.prototype.getItem;
D.mO.prototype.qJa=function(a){for(var b,c=a.shift(),d=this.je;c!=D.i;)0<a.length?d=d.sections[c]:b=d.sections[c],c=a.shift();return{title:b.title?b.title:D.o,items:b.items?(0,D.pO)(b.items):D.o,sections:b.sections?(0,D.qO)(this,b.sections):D.o}};D.mO.prototype.getSection=D.mO.prototype.qJa;D.pO=function(a){for(var b=[],c=0;c<a.length;c++)b.push({text:a[c].text});return b};
D.qO=function(a,b){for(var c=[],d=0;d<b.length;d++)c.push({title:b[d].title?b[d].title:D.o,items:b[d].items?(0,D.pO)(b[d].items):D.o,sections:b[d].sections?(0,D.qO)(a,b[d].sections):D.o});return c};
D.hO=function(){this.Init({skyros:D.rO,alta:D.sO,next:D.tO})};D.z.q(D.hO,D.fk,"DvtLegendDefaults");D.tO={skin:"next",titleStyle:new D.I("color: #737373;"),_sectionTitleStyle:new D.I("color: #737373;"),layout:{titleGapWidth:17,titleGapHeight:9,symbolGapWidth:7,symbolGapHeight:4,rowGap:4,columnGap:10,sectionGapHeight:16,sectionGapWidth:24}};
D.sO={skin:"alta",colors:D.Om,textStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"),titleStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 11px; color: #333333;"),_sectionTitleStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 11px; color: #333333;")};
D.rO={skin:"skyros",orientation:"vertical",position:D.o,backgroundColor:D.o,borderColor:D.o,textStyle:new D.I("font-family: tahoma, sans-serif; font-size: 11px; color: #333333;"),titleStyle:new D.I("font-family: tahoma, sans-serif; font-size: 12px; color: #003d5b;"),titleHalign:"start",hiddenCategories:[],hideAndShowBehavior:"off",hoverBehavior:"none",hoverBehaviorDelay:200,scrolling:"asNeeded",halign:"start",valign:"top",drilling:"off",colors:D.Pm,markerShape:"square",lineWidth:3,layout:{outerGapWidth:3,
outerGapHeight:3,titleGapWidth:8,titleGapHeight:3,symbolGapWidth:5,symbolGapHeight:4,rowGap:0,columnGap:8,sectionGapHeight:6,sectionGapWidth:15},isLayout:D.p};D.uO=function(a,b){var c=window.Math.min(D.af.pM(a.j(),a.A().textStyle)/14,1);return window.Math.ceil(b*c)};
D.iO=function(a){this.Init(a.j(),a.Rd,a);this.Hb=a};D.z.q(D.iO,D.hk,"DvtLegendEventManager");D.y=D.iO.prototype;D.y.sw=function(a,b){var c=D.o;b instanceof D.Yj&&b.wn()!=D.o?c=b.wn():b instanceof D.nO&&(c=b.getId(),c={type:D.rm.xI,id:c});this.$g(new D.jk(a,c),this.Hb)};D.y.Ih=function(a){D.iO.u.Ih.call(this,a);var b=(0,D.Xj)(this,a.target);if(b){var c=(0,D.vO)(this,b),b=this.pn(b);(c||b)&&a.stopPropagation()}};D.y.zy=function(a){D.iO.u.zy.call(this,a);(a=(0,D.Xj)(this,a.target))&&this.Aw(a)};
D.y.Lm=function(a){D.iO.u.Lm.call(this,a);(0,D.Xj)(this,a.target)};D.y.ys=function(a){var b=(0,D.Xj)(this,a.target);if(b){a=a.Xca;var c=(0,D.vO)(this,b),b=this.pn(b);(c||b)&&a&&a.preventDefault()}};
D.vO=function(a,b){var c=a.Hb.A().hideAndShowBehavior;if("none"==c||"off"==c)return D.p;var d=b.Vc?b.Vc():D.o;if(!d||0>=d.length)return D.p;for(var e=b.Vc()[0],c=a.Hb.A().hiddenCategories||[],c=c.slice(),f=b.Nd(),g=0;g<f.length;g++){var h=f[g];h instanceof D.Qn?h.WH(b.zb()):h instanceof D.F&&(0,D.wO)(b)}d=d[0];D.kO.D_(e,a.Hb)?(c.splice(c.indexOf(e),1),e=new D.cm(D.cm.Ey,d)):(c.push(e),e=new D.cm(D.cm.zw,d));e.hiddenCategories=c;a.Hb.A().hiddenCategories=c;a.$g(e,a.Hb);return D.k};
D.iO.prototype.pn=function(a){return a&&a.Xe&&a.Xe()?(this.$g(new D.kk("action",a.Xe(),a.getId()),this.Hb),D.k):a instanceof D.nO&&a.xi()?(a=a.getData().text,this.$g(new D.mk(a,a,D.o),this.Hb),D.k):D.p};
D.iO.prototype.Yp=function(a,b,c){var d=this.Hb.A();"none"==d.hoverBehavior||b.Nd&&b.Nd()[0]instanceof D.Re||(b=b.Vc?b.Vc():[],d.highlightedCategories=c?b.slice():D.o,c=new D.kn(c?"categoryRollOver":"categoryRollOut",d.highlightedCategories),d=(0,D.Zp)(d.hoverBehaviorDelay),this.uB.Rd(c,this.Hb.nn,d,D.k),a.stopPropagation())};
D.iO.prototype.Yba=function(a,b){for(var c=b.getId(),d=this.Hb.A(),e=0;e<c.length;e++)d=d.sections[c[e]];d.expanded="off"==d.expanded?"on":"off";a.type==D.vn&&(c=(0,D.Xj)(this,(0,D.bn)(a)),(0,D.Gl)(this,c.Yd(a)));d=(c=this.Hb.NR())?c.Ic():D.p;this.Hb.U();c&&(0,D.Il)(this.Hb,c,d);this.Mc();c=this.Hb.Ev();this.$g(new D.pC(c.e,c.g,c.x,c.y),this.Hb)};
D.lO=function(a,b){this.Init(a,b)};D.z.q(D.lO,D.on,"DvtLegendKeyboardHandler");D.lO.prototype.Init=function(a,b){D.lO.u.Init.call(this,a);this.Hb=b};
D.lO.prototype.Hj=function(a){var b=a.keyCode,c=this.ra.Od(),d=this.Hb.za(),e=c&&c.Nd()[0]instanceof D.Re;if(9==b){if(c)return(0,D.ti)(a),c;b=this.Hb.cG;if(0<b.length)return(0,D.ti)(a),this.VL(b)}else if(13==b||32==b)c&&(e?d.Yba(a,c.Nd()[0]):(0,D.vO)(d,c),(0,D.ti)(a));else if(e&&(37==b||39==b))d.Yba(a,c.Nd()[0]),(0,D.ti)(a);else return D.lO.u.Hj.call(this,a)};
D.nO=function(a,b,c,d,e,f){this.Init(a,b,c,d,e,f)};D.z.q(D.nO,D.z,"DvtLegendObjPeer");D.nO.prototype.Init=function(a,b,c,d,e,f){this.Hb=a;this.ne=b;this.ht=c;this.ib=(this.Jk=D.kO.SZ(this.ht))?this.Jk:c.title;this.Sm=c.action;this.nr=f;this.pFa=c._spb;this.Xh=d;this.r5=e;this.Ub=D.p;if(this.Sm||this.nr)for(a=0;a<this.ne.length;a++)this.ne[a].setCursor("pointer")};
D.xO=function(a,b,c,d,e,f){if(!a||!c)return D.o;c=new D.nO(b,a,c,d,e,f);c.Nd()[0]instanceof D.Re?b.cG.push(c):(d=b.A().hideAndShowBehavior,(c.Ne()!=D.o||"none"!=d&&"off"!=d)&&b.cG.push(c),b.nn.push(c));for(d=0;d<a.length;d++)b.za().Da(a[d],c);return c};D.y=D.nO.prototype;D.y.getData=(0,D.x)("ht");D.y.zb=function(){return this.ht.color};D.y.getId=(0,D.x)("ib");D.y.Nd=(0,D.x)("ne");D.y.Vc=function(){return this.Jk!=D.o?[this.Jk]:D.o};D.y.Xe=(0,D.x)("Sm");D.y.xi=(0,D.x)("nr");D.y.Hd=(0,D.x)("pFa");
D.y.nc=function(){var a=[],b=this.Hb.A(),c=this.Hb.A().hideAndShowBehavior,d=D.kO.D_(this.Jk,this.Hb),e=this.getData();if(this.ne[0]instanceof D.Re)return a.push((0,D.O)("DvtUtilBundle","off"==e.expanded?"STATE_COLLAPSED":"STATE_EXPANDED")),(0,D.Hk)(e.title,a);"off"!=c&&"none"!=c&&a.push((0,D.O)("DvtUtilBundle",d?"STATE_HIDDEN":"STATE_VISIBLE"));this.xi()&&a.push((0,D.Gk)(b,"stateDrillable","DvtUtilBundle","STATE_DRILLABLE"));return e.shortDesc!=D.o?(0,D.Hk)(e.shortDesc,a):0<a.length?(0,D.Hk)(e.text,
a):D.o};D.wO=function(a){!(0,D.df)()&&a.ne[0]&&a.ne[0].Mb("label",a.nc())};D.y=D.nO.prototype;D.y.Yd=function(a){return a.type==D.vn?this:(0,D.xn)(this,a,this.Hb.cG,D.k)};D.y.Ye=function(a){return this.ne[0]?this.ne[0].G(a):new D.B(0,0,0,0)};D.y.Vj=function(){return this.ne[0]?this.ne[0].Aa():D.o};D.y.Be=function(){this.Ub=D.k;this.ne[0]&&(this.ne[0]instanceof D.Re?(0,D.CF)(this.ne[0]):this.ne[0].Ya((0,D.QE)()))};
D.y.qc=function(){this.Ub=D.p;this.ne[0]&&(this.ne[0]instanceof D.Re?(0,D.AF)(this.ne[0]):this.ne[0].ba(D.o))};D.y.Ic=(0,D.x)("Ub");D.y.ye=(0,D.x)("Xh");D.y.Ne=(0,D.x)("r5");D.y.Yi=function(){return this.ht.color};
D.kO={};D.z.q(D.kO,D.z,"DvtLegendRenderer");D.kO.txa=5;D.kO.uxa=2;D.kO.eha=0.6;D.kO.Oga=10;D.kO.Kh=12;D.kO.WN=2;
D.kO.U=function(a,b){var c=a.A(),d=a.j(),e=(0,D.G)(d);c.isLayout||D.kO.CG(a,b);var f=new D.WA(d,b.e,b.g),g=new D.D(d);f.ga.k(g);a.k(f);a.BGa=f;var h=(0,D.uO)(a,c.layout.outerGapWidth),j=(0,D.uO)(a,c.layout.outerGapHeight);b.x+=h;b.y+=j;b.e-=2*h;b.g-=2*j;a.y3(b);if(0>=b.e||0>=b.g)return new D.Kg(0,0);d=D.kO.pEa(a,g,new D.B(b.x,b.y,b.e,b.g));if(0==d.e||0==d.g)return new D.Kg(0,0);(0,D.XA)(f);d.g>b.g&&(d.g=b.g);var l=f=0,m=c.hAlign!=D.o?c.hAlign:c.halign;"center"==m?f=b.x-d.x+(b.e-d.e)/2:"end"==m&&(f=
e?b.x-d.x:b.x-d.x+b.e-d.e);e=c.vAlign!=D.o?c.vAlign:c.valign;"middle"==e?l=b.y-d.y+(b.g-d.g)/2:"bottom"==e&&(l=b.y-d.y+b.g-d.g);e=new D.B(d.x+f-h,d.y+l-j,d.e+2*h,d.g+2*j);if(c.isLayout)return e;(f||l)&&(0,D.Ik)(g,f,l);c=a.c$;for(g=0;g<c.length;g++)(0,D.Bo)(d,c[g].fKa,c[g].text,c[g].text.Kb().e);return e};
D.kO.pEa=function(a,b,c){var d=a.A();c=c.ea();var e=D.kO.DG(a,b,d.title,c,D.o,D.k);if(e){var f=e.Kb(),g=(0,D.uO)(a,d.layout.titleGapHeight);c.y+=f.g+g;c.g-=window.Math.floor(f.g+g)}a=D.kO.goa(a,b,d.sections,c,[]);return e?(0,D.tp)(f,a):a};D.kO.CG=function(a,b){var c=a.A(),d=c.backgroundColor,c=c.borderColor;if(d||c){var e=new D.F(a.j(),b.x,b.y,b.e,b.g);d?e.va(d):(0,D.Li)(e);c&&(e.Ya(c),(0,D.Ti)(e));a.za().Da(e,new D.Yj(D.o,D.o,D.o,{type:D.rm.iI,id:D.i}));a.k(e)}};
D.kO.DG=function(a,b,c,d,e,f){var g=a.A(),h=b.j(),j=(0,D.G)(h);if(!c)return D.o;c=new D.Nf(h,c,d.x,d.y);h=g.titleStyle;e&&e.titleStyle?h=new D.I(e.titleStyle):e&&g._sectionTitleStyle&&(h=g._sectionTitleStyle);c.Na(h);return D.af.Vb(c,d.e,window.Infinity,b)?(j&&c.ha(d.x+d.e-c.Kb().e),g.isLayout?b.removeChild(c):(a.za().Da(c,new D.Yj(c.yo(),D.o,D.o,{type:D.rm.fr,id:D.i})),f&&a.c$.push({text:c,fKa:e&&e.titleHalign?e.titleHalign:g.titleHalign})),c):D.o};
D.kO.goa=function(a,b,c,d,e){var f=a.A();f.symbolWidth==D.o&&f.symbolHeight==D.o?(f.symbolWidth=D.kO.Oga,f.symbolHeight=D.kO.Oga):(f.symbolWidth==D.o?f.symbolWidth=f.symbolHeight:f.symbolHeight==D.o&&(f.symbolHeight=f.symbolWidth),f.symbolWidth=(0,window.parseInt)(f.symbolWidth),f.symbolHeight=(0,window.parseInt)(f.symbolHeight));for(var g=(0,D.uO)(a,f.layout.sectionGapHeight),h=(0,D.uO)(a,f.layout.titleGapHeight),j=(0,D.uO)(a,f.layout.sectionGapWidth),l=D.kO.GBa(a),f="vertical"!=f.orientation,m=
D.o,n=d.ea(),q,r=0;r<c.length;r++){var s=e.concat([r]),u="off"==c[r].expanded||c[r].expanded==D.p?h:g;f?(q=D.kO.boa(a,b,c[r],n,l),q.e>n.e?(n.e<d.e&&(d.y+=q.g+u,d.g-=q.g+u),q=q.e<=d.e?D.kO.boa(a,b,c[r],d,l):D.kO.ioa(a,b,c[r],d,l,s,D.k),d.y+=q.g+u,d.g-=q.g+u,n=d.ea()):(n.e-=q.e+j,(0,D.G)(a.j())||(n.x+=q.e+j))):(q=D.kO.ioa(a,b,c[r],d,l,s,D.p),d.y+=q.g+u,d.g-=q.g+u);m=m?(0,D.tp)(m,q):q}return m};
D.kO.hAa=function(a,b,c,d,e,f,g,h,j,l,m){var n=D.kO.d5(a,d,e+"Enabled",f,g),q=D.kO.d5(a,d,e+"Over",f,g);d=D.kO.d5(a,d,e+"Down",f,g);a=new D.Re(a,n,q,d,D.o,j,l,m);b=(0,D.xO)([a],b,c,h,D.o,D.p);a.ld("button");(0,D.wO)(b);return a};D.kO.d5=function(a,b,c,d,e){var f=(0,D.G)(a)?"RTL":"";a=new D.Ve(a,b[c+f]?b[c+f]:b[c],d,e,D.kO.Kh,D.kO.Kh);(0,D.Li)(a);return a};
D.kO.ioa=function(a,b,c,d,e,f,g){if(c){var h=a.A(),j=(0,D.uO)(a,h.layout.symbolGapWidth),l=(0,D.uO)(a,h.layout.rowGap),m=(0,D.uO)(a,h.layout.columnGap),n=a.j(),q=(0,D.G)(n);d=d.ea();"off"!=h.scrolling&&(d.g=window.Infinity);var r,s="on"==c.collapsible||c.collapsible==D.k;if(s){r=q?d.x+d.e-D.kO.Kh:d.x;if(!h.isLayout){var u="off"==c.expanded||c.expanded==D.p,A=u?"closed":"open",u=(0,D.O)("DvtUtilBundle",u?"EXPAND":"COLLAPSE",D.o),w=a.za(),n=D.kO.hAa(n,a,c,h._resources,A,r,d.y,u,f,w.Yba,w);b.k(n)}r=
new D.B(r,d.y,D.kO.Kh,D.kO.Kh);n=(0,D.uO)(a,h.layout.symbolGapWidth);q||(d.x+=D.kO.Kh+n);d.e-=D.kO.Kh+n}s=(s=D.kO.DG(a,b,c.title,d,c,!s&&1>=f.length))?s.Kb():new D.B(q?d.x+d.e:d.x,d.y,0,0);s=r?(0,D.tp)(s,r):s;if(!c.items&&!c.sections||"off"==c.expanded||c.expanded==D.p)return s;0<s.g&&(n=(0,D.uO)(a,h.layout.titleGapHeight),d.y+=s.g+n,d.g-=s.g+n);c.sections&&(f=D.kO.goa(a,b,c.sections,d,f),s=(0,D.tp)(s,f));if(!c.items)return s;n=D.kO.Qza(a,d,e,c.items,g);g=n.numCols;f=n.numRows;n=n.width;r=d.y;if(0==
f||0==g)return s;A=f*(e+l)-l;u=window.Math.min(g*(n+m)-m,d.e);s=(0,D.tp)(s,new D.B(q?d.x+d.e-u:d.x,d.y,u,A));if(h.isLayout)return s;h=n-h.symbolWidth-j;j=0;A=1;u=c.items.length;for(w=0;w<u;w++)D.kO.IO(a,b,c.items[w],d,h,e,w),d.y+=e+l,j++,j===f&&A!==g&&(d.y=r,d.e-=n+m,q||(d.x+=n+m),j=0,A++);return s}};
D.kO.boa=function(a,b,c,d,e){if(c){var f=a.A(),g=f.symbolWidth,h=(0,D.uO)(a,f.layout.symbolGapWidth),j=(0,D.uO)(a,f.layout.columnGap),l=(0,D.uO)(a,f.layout.titleGapWidth),m=c.items.length,n=(0,D.G)(a.j()),q=d.ea(),r=D.kO.DG(a,b,c.title,d,c,D.p),s=r?r.Kb():new D.B(n?d.x+d.e:d.x,d.y,0,0);if(c.items)0<s.e&&(q.e-=s.e+l,n||(q.x+=s.e+l));else return s;var l=[],u=d.e-q.e,A,w;for(w=0;w<m;w++)A=c.items[w],A=window.Math.ceil(D.af.cba(a.j(),A.text,f.textStyle)),u+=A+g+h+j,l.push(A);0<m&&(u-=j);s=new D.B(n?d.x+
d.e-u:d.x,d.y,u,window.Math.max(e,s.g));if(f.isLayout||u>d.e)return b.removeChild(r),s;for(w=0;w<m;w++)A=c.items[w],D.kO.IO(a,b,A,q,l[w],e,w),d=l[w]+g+h,q.e-=d+j,n||(q.x+=d+j);return s}};
D.kO.Qza=function(a,b,c,d,e){for(var f=a.A(),g=0,h=0;h<d.length;h++){var j=D.af.cba(a.j(),d[h].text,f.textStyle);j>g&&(g=j)}var h=f.symbolWidth,l=(0,D.uO)(a,f.layout.symbolGapWidth),j=(0,D.uO)(a,f.layout.rowGap);a=(0,D.uO)(a,f.layout.columnGap);g=window.Math.ceil(h+l+g);e?(e=window.Math.min(window.Math.floor((b.e+a)/(g+a)),d.length),c=window.Math.ceil(d.length/e)):window.Infinity==b.g?(e=1,c=d.length):(c=window.Math.min(window.Math.floor((b.g+j)/(c+j)),d.length),e=window.Math.ceil(d.length/c),c=window.Math.ceil(d.length/
e));b=window.Math.min(g,(b.e-a*(e-1))/e);return b<h?{width:0,numCols:0,numRows:0}:{width:b,numCols:e,numRows:c}};D.kO.GBa=function(a){var b=a.A(),c=new D.Nf(a.j(),"Test");c.Na(b.textStyle);c.Jg();c=D.af.Ch(c).g;a=b.symbolHeight+(0,D.uO)(a,b.layout.symbolGapHeight);return window.Math.ceil(window.Math.max(c,a))};
D.kO.IO=function(a,b,c,d,e,f,g){var h=a.A(),j=a.j(),l=(0,D.G)(j),m=h.symbolWidth,n=(0,D.uO)(a,h.layout.symbolGapWidth),q=l?d.x+d.e-m:d.x,r=l?d.x+d.e-m-n:d.x+m+n;g=D.kO.lAa(a,q,d.y,f,c,g);var s=c.text,u;if(s&&(u=D.kO.mAa(b,e,s,h.textStyle)))u.ha(r),u.ya(d.y+f/2),l&&u.ai();b.k(g);d=new D.F(j,l?r-e-D.kO.WN:q-D.kO.WN,d.y-D.kO.WN,m+n+e+2*D.kO.WN,f+2*D.kO.WN);(0,D.Li)(d);h=h.hideAndShowBehavior;"none"!=h&&"off"!=h&&d.setCursor("pointer");b.k(d);b=[d,g];u!=D.o&&b.push(u);u=(0,D.xO)(b,a,c,u!=D.o?u.yo():D.o,
c.shortDesc,D.kO.tCa(a,c));D.kO.D_(D.kO.SZ(c),a)&&g.WH(u.zb());if("none"!=h&&"off"!=h||c.shortDesc!=D.o)d.ld("img"),(0,D.wO)(u)};D.kO.tCa=function(a,b){return"on"==b.drilling?D.k:"off"==b.drilling?D.p:"on"==a.A().drilling};D.kO.mAa=function(a,b,c,d){c=new D.Nf(a.j(),c);c.Jg();c.Na(d);return c=D.af.Vb(c,b,window.Infinity,a)?c:D.o};
D.kO.lAa=function(a,b,c,d,e,f){var g=a.A();e.markerShape||(e.markerShape=g.markerShape);if(!e.color){var h=g.colors;e.color=h[f%h.length]}e.lineWidth||(e.lineWidth=g.lineWidth);f=g.symbolWidth;var g=g.symbolHeight,h=c+d/2,j=b+f/2,l=e.type!=D.o?e.type:e.symbolType;"line"==l?(e.lineWidth=window.Math.min(e.lineWidth,D.kO.txa),b=D.kO.Qia(a.j(),b,c,f,d,e)):"lineWithMarker"==l?(e.lineWidth=window.Math.min(e.lineWidth,D.kO.uxa),b=D.kO.Qia(a.j(),b,c,f,d,e),D.kO.D_(D.kO.SZ(e),a)||b.k(D.kO.WV(a,j,h,f*D.kO.eha,
g*D.kO.eha,e))):b="image"==l?D.kO.f5(a,b,c,f,g,d,e):D.kO.WV(a,j,h,f,g,e);return b};D.kO.f5=function(a,b,c,d,e,f,g){return new D.Ve(a.j(),g.source,b,c+(f-e)/2,d,e)};
D.kO.WV=function(a,b,c,d,e,f){var g=a.j(),h=a.A();a=f.markerShape;var j=f.markerColor?f.markerColor:f.color,l=f.pattern;l&&"none"!=l?(d=new D.Qn(g,a,h.skin,0,0,d,e),d.P(new D.nh(l,j,"#FFFFFF")),(0,D.Ik)(d,b,c)):(d=new D.Qn(g,a,h.skin,b,c,d,e),d.va(j));f.borderColor&&d.Ya(f.borderColor,D.o,f._borderWidth?f._borderWidth:1);"square"==a&&(0,D.Ti)(d);return d};
D.kO.Qia=function(a,b,c,d,e,f){c+=e/2;a=new D.Si(a,b,c,b+d,c);b=new D.J(f.color,1,f.lineWidth);f=f.lineStyle;"dashed"==f?b.Ak((0,D.ng)(f),"4,2,4"):"dotted"==f&&b.Ak((0,D.ng)(f),"2");a.ba(b);(0,D.Ti)(a);return a};D.kO.SZ=function(a){var b=D.o;return b=a.categories&&0<a.categories.length?a.categories[0]:a.id?a.id:a.text};D.kO.D_=function(a,b){var c=b.A().hiddenCategories;return!c||0>=c.length?D.p:-1!==c.indexOf(a)};
  return D;
});