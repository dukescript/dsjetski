/**
 * Copyright (c) 2014, 2015, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
/*
 Copyright 2012 Igor Vaynberg

 This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
 General Public License version 2 (the "GPL License"). You may choose either license to govern your
 use of this software only upon the condition that you accept all of the terms of either the Apache
 License or the GPL License.

 You may obtain a copy of the Apache License and the GPL License at:

 http://www.apache.org/licenses/LICENSE-2.0
 http://www.gnu.org/licenses/gpl-2.0.html

 Unless required by applicable law or agreed to in writing, software distributed under the
 Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
 the specific language governing permissions and limitations under the Apache License and the GPL License.
 Copyright 2012 Igor Vaynberg

 This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
 General Public License version 2 (the "GPL License"). You may choose either license to govern your
 use of this software only upon the condition that you accept all of the terms of either the Apache
 License or the GPL License.

 You may obtain a copy of the Apache License and the GPL License at:

 http://www.apache.org/licenses/LICENSE-2.0
 http://www.gnu.org/licenses/gpl-2.0.html

 Unless required by applicable law or agreed to in writing, software distributed under the
 Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
 the specific language governing permissions and limitations under the Apache License and the GPL License.
 Copyright 2012 Igor Vaynberg

 This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
 General Public License version 2 (the "GPL License"). You may choose either license to govern your
 use of this software only upon the condition that you accept all of the terms of either the Apache
 License or the GPL License.

 You may obtain a copy of the Apache License and the GPL License at:

 http://www.apache.org/licenses/LICENSE-2.0
 http://www.gnu.org/licenses/gpl-2.0.html

 Unless required by applicable law or agreed to in writing, software distributed under the
 Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
 the specific language governing permissions and limitations under the Apache License and the GPL License.
 Copyright 2012 Igor Vaynberg

 This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
 General Public License version 2 (the "GPL License"). You may choose either license to govern your
 use of this software only upon the condition that you accept all of the terms of either the Apache
 License or the GPL License.

 You may obtain a copy of the Apache License and the GPL License at:

 http://www.apache.org/licenses/LICENSE-2.0
 http://www.gnu.org/licenses/gpl-2.0.html

 Unless required by applicable law or agreed to in writing, software distributed under the
 Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
 the specific language governing permissions and limitations under the Apache License and the GPL License.
 Copyright 2012 Igor Vaynberg

 This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
 General Public License version 2 (the "GPL License"). You may choose either license to govern your
 use of this software only upon the condition that you accept all of the terms of either the Apache
 License or the GPL License.

 You may obtain a copy of the Apache License and the GPL License at:

 http://www.apache.org/licenses/LICENSE-2.0
 http://www.gnu.org/licenses/gpl-2.0.html

 Unless required by applicable law or agreed to in writing, software distributed under the
 Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
 the specific language governing permissions and limitations under the Apache License and the GPL License.
 Copyright 2012 Igor Vaynberg

 This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
 General Public License version 2 (the "GPL License"). You may choose either license to govern your
 use of this software only upon the condition that you accept all of the terms of either the Apache
 License or the GPL License.

 You may obtain a copy of the Apache License and the GPL License at:

 http://www.apache.org/licenses/LICENSE-2.0
 http://www.gnu.org/licenses/gpl-2.0.html

 Unless required by applicable law or agreed to in writing, software distributed under the
 Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
 the specific language governing permissions and limitations under the Apache License and the GPL License.
 Copyright 2012 Igor Vaynberg

 This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
 General Public License version 2 (the "GPL License"). You may choose either license to govern your
 use of this software only upon the condition that you accept all of the terms of either the Apache
 License or the GPL License.

 You may obtain a copy of the Apache License and the GPL License at:

 http://www.apache.org/licenses/LICENSE-2.0
 http://www.gnu.org/licenses/gpl-2.0.html

 Unless required by applicable law or agreed to in writing, software distributed under the
 Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
 the specific language governing permissions and limitations under the Apache License and the GPL License.
*/
define(["ojs/ojcore","jquery","ojs/ojeditablevalue"],function(a,f){var d={Ma:{TAB:9,ENTER:13,rC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,X0:16,n0:17,j0:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,mC:8,AL:46,kK:function(a){switch(a.which){case d.Ma.X0:case d.Ma.n0:case d.Ma.j0:return!0}return a.metaKey||a.ctrlKey?!0:!1},nK:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}},tK:{x:0,y:0},Jw:function(){var a=1;return function(){return a++}}(),o_:null,gn:function(a,b){for(var d=f.isFunction(a[0])?
f(a[0]()):f(a[0]),c=-1,e=a.length;++c<e&&(d.context=d[0]=f.isFunction(a[0])?a[c]():a[c])&&!1!==b.call(d[0],c,d););return a},Qga:function(){var a=f("\x3cdiv class\x3d'oj-listbox-measure-scrollbar'\x3e\x3c/div\x3e");a.appendTo("body");var b={width:a.width()-a[0].clientWidth,height:a.height()-a[0].clientHeight};a.remove();return b},Cn:function(a,b){var d,c,e;if(null===a||1>a.length)return[];d=a.split(b);c=0;for(e=d.length;c<e;c+=1)d[c]=f.trim(d[c]);return d},LY:function(a){return a.outerWidth(!1)-a.width()},
Ega:function(a){a.on("keydown",function(){void 0===f.data(a,"keyup-change-value")&&f.data(a,"keyup-change-value",a.val())});a.on("keyup",function(b){b.which===d.Ma.ENTER?b.stopPropagation():(b=f.data(a,"keyup-change-value"),void 0!==b&&a.val()!==b&&(f.removeData(a,"keyup-change-value"),a.trigger("keyup-change")))})},Dga:function(a){a.on("mousemove",function(a){var b=d.tK;if(void 0===b||b.x!==a.pageX||b.y!==a.pageY)f(a.target).trigger("mousemove-filtered",a),d.tK.x=a.pageX,d.tK.y=a.pageY})},Gha:function(a){var b=
!1,d;return function(){!1===b&&(d=a(),b=!0);return d}},Kf:function(a){a[0]!==document.activeElement&&window.setTimeout(function(){var b=a[0],d=a.val().length;a.focus();a.is(":visible")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(d,d):b.createTextRange&&(b=b.createTextRange(),b.collapse(!1),b.select()))},0)},Wfa:function(a){a=f(a)[0];var b=0,d=0;"selectionStart"in a?(b=a.selectionStart,d=a.selectionEnd-b):"selection"in document&&(a.focus(),b=document.selection.createRange(),
d=document.selection.createRange().text.length,b.moveStart("character",-a.value.length),b=b.text.length-d);return{offset:b,length:d}},pe:function(a){a.preventDefault();a.stopPropagation()},Kga:function(a){a.preventDefault();a.stopImmediatePropagation()},Mia:function(a){var b={"\\":"\x26#92;","\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;"};return String(a).replace(/[&<>"'\\]/g,function(a){return b[a]})},Lga:function(a,b){function c(a){return""+a.label}var e=a,g,
h;f.isArray(e)&&(h=e,e={Lb:h});!1===f.isFunction(e)&&(h=e,e=function(){return h});var l=e();l&&l.text&&(c=l.text,f.isFunction(c)||(g=l.text,c=function(a){return a[g]}));return function(a){var g=a.dC,h={Lb:[]},l;""!==g||b?(l=function(b,e,h){var k,n;b=b[0];!b.label&&h&&h.label&&(b.label=b[h.label],delete b[h.label]);!b.value&&h&&h.value&&(b.value=b[h.value],delete b[h.value]);!b.children&&h&&h.children&&(b.children=b[h.children],delete b[h.children]);if(b.children){k={};for(n in b)b.hasOwnProperty(n)&&
(k[n]=b[n]);k.children=[];d.gn(f(b.children),function(a,b){l(b,k.children,h&&h.childKeys?h.childKeys:null)});(k.children.length||a.tn(g,c(k),b))&&e.push(k)}else a.tn(g,c(b),b)&&e.push(b)},e()&&d.gn(f(e().Lb),function(a,d){l(d,h.Lb,b)}),a.Xb(h)):a.Xb(e())}},jfa:function(a,b,d){if(f.isFunction(b))return!0;if(!b)return!1;throw Error(d+" must be a function or a false value");},ip:function(b,d){function c(){}a.b.ga(c,b,"");c.prototype=f.extend(c.prototype,d);return c}},b=d.ip(Object,{yd:function(a){var b=
this;return function(){a.apply(b,arguments)}},_init:function(a){var b,c=this.Ia,e=this.pd;this.la=a.la;this.W=a=this.Vo(a);this.id=a.id;void 0!==a.element.data(e)&&null!==a.element.data(e)&&a.element.data(e)._destroy();this.Fa=this.vy();var g=this.W.rootAttributes;this.dn=g&&g.id?g.id:"ojChoiceId_"+(a.element.attr("id")||"autogen"+d.Jw());this.dn.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.Fa.attr("id",this.dn);this.body=d.Gha(function(){return a.element.closest("body")});this.Fa.attr("style",
a.element.attr("style"));this.DJ=this.W.element.attr("tabindex");this.W.element.data(e,this).attr("tabindex","-1").before(this.Fa);this.Fa.data(e,this);this.qc=this.Fa.find(".oj-listbox-drop");this.qc.data("ojlistbox",this);this.qc.on("click",d.pe);this.qc.attr("data-oj-containerid",this.dn);this.Lb=this.Fa.find(".oj-listbox-results");a.list&&f("#"+a.list).is("ul")&&(e=f("#"+a.list),this.WX=e.parent(),e.addClass("oj-listbox-results").attr("role","listbox"),this.Lb.replaceWith(e),this.Lb=this.Fa.find(".oj-listbox-results"),
this.Lb.css("display",""));this.search=b="oj-select"==c?this.Fa.find("input.oj-listbox-input"):this.Fa.find("input."+c+"-input");this.XK=this.f_=0;this.context=null;this.Hz();this.Fa.on("click",d.pe);d.Dga(this.Lb);this.qc.on("mousemove-filtered touchstart touchmove touchend",".oj-listbox-results",this.yd(this.PS));f(this.Fa).on("change","."+c+"-input",function(a){a.stopPropagation()});f(this.qc).on("change","."+c+"-input",function(a){a.stopPropagation()});d.Ega(b);b.on("keyup-change input paste",
this.yd(this.Vr));b.on("focus",function(){b.addClass(c+"-focused")});b.on("blur",function(){b.removeClass(c+"-focused")});this.qc.on("mouseup",".oj-listbox-results",this.yd(function(a){0<f(a.target).closest(".oj-listbox-result-selectable").length&&(this.PS(a),this.hI(null,a))}));this.qc.on("click mouseup mousedown",function(a){a.stopPropagation()});f.isFunction(this.W.tp)&&this.lr();e=a.element.prop("disabled");void 0===e&&(e=!1);this.tm(!e);e=a.element.prop("readonly");void 0===e&&(e=!1);this.Er(e);
d.o_=d.o_||d.Qga();this.autofocus=a.element.prop("autofocus");a.element.prop("autofocus",!1);this.autofocus&&this.Kf()},DE:function(a){var b=this.qc;!f(a.target).closest(b).length&&!f(a.target).closest("#"+b.attr("data-oj-containerid")).length&&0<b.length&&(b=b.data("ojlistbox"),b.close(a))},ep:function(){this.qc&&this.qc.remove()},_destroy:function(){var a=this.Tt;isNaN(a)||(delete this.Tt,window.clearTimeout(a));var a=this.W.element,b=a.data(this.pd);this.close();this.e_&&(delete this.e_,this.e_=
null);this.W.list&&this.Lb&&(this.zE(this.Lb),this.WX&&this.WX.append(this.Lb));void 0!==b&&(b.Fa.remove(),b.qc.remove(),a.removeAttr("aria-hidden").removeData(this.pd).off("."+this.Ia).prop("autofocus",this.autofocus||!1),this.DJ?a.attr({qja:this.DJ}):a.removeAttr("tabindex"),a.show())},zE:function(a){if(a&&a.is("ul")){a.removeClass("oj-listbox-results oj-listbox-result-sub");a.removeAttr("role");for(var b=a.children().length-1;0<=b;b--)this.zE(f(a.children()[b]))}else a.is("li")&&((a.hasClass("oj-listbox-placeholder")||
a.hasClass("oj-listbox-no-results"))&&a.remove(),a.attr("class")&&a.attr("class",a.attr("class").replace(/\oj-listbox-\S+/g,"")),(b=a.children(".oj-listbox-result-label"))&&b.contents().unwrap(),"none"==a.css("display")&&a.css("display",""),this.zE(a.children("ul")))},So:function(a){if(a.is("option"))return{value:a.prop("value"),label:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:"locked"===a.attr("locked")||!0===a.data("locked")};if(a.is("optgroup"))return{label:a.attr("label"),
children:[],element:a.get(),css:a.attr("class")};if(a.is("li")){var b,d=null;(b=a.children())&&0<b.length&&b.is("ul")?(b=a.attr("oj-data-label")?a.attr("oj-data-label"):a.clone().children().remove().end().text().trim(),d=[]):b=a.attr("oj-data-label")?a.attr("oj-data-label"):a.text().trim();return{value:a.attr("oj-data-value"),label:b,element:a.get(),css:a.attr("class"),children:d}}},Vo:function(a){var b,e,g=this;a.options&&Array.isArray(a.options)&&a.optionsKeys&&(a.options=f.extend(!0,[],a.options));
b=a.element;var h=b.get(0).tagName.toLowerCase();"input"===h&&b.attr("list")?this.Uj=e=f("#"+b.attr("list")):"select"===h&&0<b.children().length?this.Uj=e=b:a.list&&(this.Uj=e=f("#"+a.list));a=f.extend({},{$ga:function(b,c,e,h){var p,l=this.W.id;p=function(b,c,h,k){function m(a,b){if(b.children&&0<b.children.length){var d=b.element&&f(b.element[0]).is("li")&&f(b.element[0]).children("ul"),c=d?f(b.element[0]).children("ul"):f("\x3cul\x3e\x3c/ul\x3e");c.hasClass("oj-listbox-result-sub")||c.addClass("oj-listbox-result-sub");
p(b.children,c,h+1,!1);d||a.append(c)}}var s,q,t,v,u;s=g.wm();k&&null!==s&&!e.dC&&0>=c.find(".oj-listbox-placeholder").length&&(q={value:"",label:s},u=f("\x3cli\x3e\x3c/li\x3e"),u.addClass("oj-listbox-placeholder oj-listbox-results-depth-0 oj-listbox-result oj-listbox-result-selectable"),u.attr("role","presentation"),t=f(document.createElement("div")),t.addClass("oj-listbox-result-label"),t.attr("id","oj-listbox-result-label-"+d.Jw()),t.attr("role","option"),v=a.eY(q),void 0!==v&&t.text(v),u.append(t),
u.data(g.pd,q),c.prepend(u));k=0;for(s=b.length;k<s;k+=1){q=b[k];v=!0===q.disabled;t=!v&&void 0!==l(q);var N=q.element&&f(q.element[0]).is("li");u=N?f(q.element[0]):f("\x3cli\x3e\x3c/li\x3e");u.hasClass("oj-listbox-result")?(q.children&&0<q.children.length&&m(u,q),f(q.element[0]).css("display","")):(u.addClass("oj-listbox-results-depth-"+h),u.addClass("oj-listbox-result"),u.addClass(t?"oj-listbox-result-selectable":"oj-listbox-result-unselectable"),v&&u.addClass("oj-disabled"),q.children&&u.addClass("oj-listbox-result-with-children"),
u.attr("role","presentation"),t=f(document.createElement("div")),t.addClass("oj-listbox-result-label"),t.attr("id","oj-listbox-result-label-"+d.Jw()),t.attr("role","option"),v&&t.attr("aria-disabled","true"),N||(v=a.eY(q),void 0!==v&&t.text(v),u.append(t)),q.children&&0<q.children.length&&m(u,q),u.data(g.pd,q),N?(f(q.element[0]).contents().filter(function(){return"UL"!==this.tagName}).wrapAll(t),f(q.element[0]).css("display","")):c.append(u))}};p(c,b,0,h)}},c,a);a.id=function(a){return a.value};a.eY=
function(a){return isNaN(a.label)?a.label:this.la.AF(a.label)};a.IJ=function(a){return a&&a.label?isNaN(a.label)?a.label:this.la.AF(a.label):void 0};"select"!==h&&null!==a.manageNewEntry&&(a.manageNewEntry=function(a){var b={};b.value=b.label=f.trim(a);return b});e?a.Nw=this.yd(function(a){var b={Lb:[],bja:!1},c=a.dC,f,h;h=function(b,e){var f,p=b.children()&&0<b.children().length&&b.children().is("ul");if(b.is("option")||b.is("li")&&!p)a.tn(c,b.text(),b)&&e.push(g.So(b));else if(b.is("optgroup")||
b.is("li")&&p)f=g.So(b),d.gn(b.is("optgroup")?b.children():b.children("ul").children(),function(a,b){h(b,f.children)}),0<f.children.length&&e.push(f)};f=e.children();void 0!==this.wm()&&0<f.length&&""==f.first().attr("value")&&(f=f.slice(1));d.gn(f,function(a,d){h(d,b.Lb)});a.Xb(b)}):"options"in a&&(a.Nw=d.Lga(a.options,a.optionsKeys?a.optionsKeys:null));return a},ZW:function(a){a=f.Event(this.pd+"-selecting",{val:this.id(a),object:a});this.W.element.trigger(a);return!a.isDefaultPrevented()},Uk:function(){return!0===
this.YX},Pq:function(){var a=this.Qq&&!this.Er;if(a===this.YX)return!1;this.Fa.toggleClass("oj-disabled",!a);this.close();this.YX=a;return!0},tm:function(a){void 0===a&&(a=!0);this.Qq!==a&&(this.Qq=a,this.W.element.prop("disabled",!a),this.Pq())},kQ:function(){this.tm(!1)},Er:function(a){void 0===a&&(a=!1);if(this.Er===a)return!1;this.Er=a;this.W.element.prop("readonly",a);this.Pq();return!0},ge:function(){return this.Fa.hasClass("oj-listbox-dropdown-open")},N7:function(){return this.Fa.children().first()},
Tv:function(a,b){var d=this.Fa,c=b.element.element;c.css(a);"bottom"===b.vertical?(d.addClass("oj-listbox-drop-above"),c.addClass("oj-listbox-drop-above")):(d.removeClass("oj-listbox-drop-above"),c.removeClass("oj-listbox-drop-above"))},nR:function(){var b={my:"start top",at:"start bottom",of:this.N7(),collision:"flip",using:f.proxy(this.Tv,this)},d="rtl"===a.C.rs();return a.jd.Kg(b,d)},gA:function(){var a=this.qc,b=this.nR();a.css("width",this.Fa.outerWidth());a.position(b)},kW:function(){var a;
if(this.ge()||!1===this.Qq||!0===this.Er)return!1;a=f.Event(this.pd+"-opening");this.W.element.trigger(a);return!a.isDefaultPrevented()},jP:function(){this.Fa.removeClass("oj-listbox-drop-above");this.qc.removeClass("oj-listbox-drop-above")},open:function(a){if(!this.kW(a))return!1;this.Ro(a);return!0},Ro:function(){this.Fa.addClass("oj-listbox-dropdown-open");this.jP();this.qc[0]!==this.body().children().last()[0]&&this.qc.detach().appendTo(this.body());this.qc.appendTo(this.body());var b={};b[a.T.sc.Tp]=
f.proxy(this.close,this);b[a.T.sc.Up]=f.proxy(this.ep,this);b[a.T.sc.Sp]=f.proxy(this.DE,this);b[a.T.sc.Rl]=f.proxy(this.gA,this);var d={};d[a.T.bb.Cf]=this.qc;d[a.T.bb.Rs]=this.W.element;d[a.T.bb.Kn]=b;d[a.T.bb.Vs]=this.nR();d[a.T.bb.Pl]="oj-listbox-drop-layer";a.T.le().open(d);f("#oj-listbox-drop").removeAttr("id");this.qc.attr("id","oj-listbox-drop");this.qc.attr("data-oj-containerid",this.dn);this.gA();this.Vy().attr("aria-expanded",!0)},close:function(){if(this.ge()){var b=this.dn,d="scroll."+
b,c="resize."+b,e="orientationchange."+b;this.Fa.parents().add(window).each(function(){f(this).off(d).off(c).off(e)});this.jP();b={};b[a.T.bb.Cf]=this.qc;a.T.le().close(b);this.qc.removeAttr("data-oj-containerid");this.qc.removeAttr("id");this.Fa.removeClass("oj-listbox-dropdown-open");this.W.list?this.Lb.find("li").removeClass("oj-hover"):(this.qc.detach(),this.Lb.empty());this.Vy().attr("aria-expanded",!1)}},jm:function(){},R6:function(){var a=this.Lb,b,d,c,e;d=this.Io();0>d||(0==d?a.scrollTop(0):
(b=this.eu().find(".oj-listbox-result-label"),c=f(b[d]),e=c.offset().top+c.outerHeight(!0),d===b.length-1&&(b=a.find("li.oj-listbox-more-results"),0<b.length&&(e=b.offset().top+b.outerHeight(!0))),b=a.offset().top+a.outerHeight(!0),e>b&&a.scrollTop(a.scrollTop()+(e-b)),e=c.offset().top-a.offset().top,0>e&&"none"!=c.css("display")&&a.scrollTop(a.scrollTop()+e)))},eu:function(){return this.Lb.find(".oj-listbox-result-selectable:not(.oj-disabled, .oj-selected)").filter(function(){return"none"!=f(this).css("display")})},
eU:function(a){for(var b=this.eu(),d=this.Io();-1<=d&&d<b.length;){d+=a;d==b.length?d=0:-1==d&&(d=b.length-1);var c=f(b[d]);if(c.hasClass("oj-listbox-result-selectable")&&!c.hasClass("oj-disabled")&&!c.hasClass("oj-selected")){this.Io(d);break}}},Io:function(a){var b=this.eu();if(0===arguments.length)return b.get().indexOf(b.filter(".oj-hover")[0]);a>=b.length&&(a=b.length-1);0>a&&(a=0);this.XH();b=f(b[a]);b.addClass("oj-hover");this.Vy().attr("aria-activedescendant",b.find(".oj-listbox-result-label").attr("id"));
this.R6()},XH:function(){this.Lb.find(".oj-hover").removeClass("oj-hover")},PS:function(a){a=f(a.target).closest(".oj-listbox-result-selectable");if(0<a.length&&!a.is(".oj-hover")){var b=this.eu();this.Io(b.index(a))}else 0==a.length&&this.XH()},Vr:function(a){var b=this.search,c=this.Lb,e=this.W,g=this,h;h=b.val();var l=f.data(this.Fa,this.Ia+"-last-term"),k;!0!==a&&l&&h===l||(f.data(this.Fa,this.Ia+"-last-term",h),k=++this.f_,this.XH(),h=this.search.val(),this.XK=1,e.Nw({element:e.element,dC:void 0!==
h&&null!=h&&!0!==a?h:"",page:this.XK,context:null,tn:e.tn,Xb:this.yd(function(h){k==this.f_&&this.ge()&&(this.context=h&&void 0!==h.context?h.context:null,h&&0!==h.Lb.length||!d.jfa(g.la,e.dY,"formatNoMatches")?(this.xU(c),g.W.$ga.call(this,c,h.Lb,{dC:b.val(),page:this.XK,context:null},this.oW()),this.jv(h,a),g.gA()):"oj-select"==this.Ia&&!0!==this.W.multiple?(h=f("\x3cli\x3e"),h.addClass("oj-listbox-no-results"),h.text(e.dY(g.la,b.val())),this.xU(c),c.append(h),g.gA()):this.close())})}))},xU:function(a){this.W.list?
(a=a.children(),this.MS(a)):a.empty()},MS:function(a){for(var b=0;b<a.length;b++){f(a[b]).is("LI")&&((f(a[b]).hasClass("oj-listbox-no-results")||f(a[b]).hasClass("oj-listbox-placeholder"))&&f(a[b]).remove(),f(a[b]).css("display","none"),f(a[b]).hasClass("oj-selected")&&f(a[b]).removeClass("oj-selected"));var d=f(a[b]).children("ul");d&&d.children()&&this.MS(d.children())}},tE:function(a){this.close(a)},Uq:function(){d.Kf(this.search)},hI:function(a,b){var d=this.Io(),c=this.Lb.find(".oj-hover").closest(".oj-listbox-result").data(this.pd);
c?(this.Io(d),this.dA(c,a,b)):a&&a.Tga&&this.close(b)},wm:function(){return this.W.element.attr("placeholder")||this.W.element.attr("data-placeholder")||this.W.element.data("placeholder")||this.W.placeholder},Tm:function(){var a=this.wm();a&&(this.search.attr("placeholder",a),this.Fa.removeClass(this.Ia+"-allowclear"))},YS:function(){var a;a:{var b,d,c;a=this.W.element.attr("style");if(void 0!==a)for(a=a.split(";"),d=0,c=a.length;d<c;d+=1)if(b=a[d].replace(/\s/g,""),b=b.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),
null!==b&&1<=b.length){a=b[1];break a}a=void 0}null!==a&&this.Fa.css("width",a)},Zb:function(){return this.la.option("value")},Bn:function(a,b){"string"===typeof a?this.la.tc([a],b,{np:!1}):this.la.tc(a,b,{np:!1});this.W.element.val(a)},oW:function(){return!1},Vy:function(){return this.search},gr:function(){return void 0!==this.W.minimumResultsForSearch&&void 0!==this.Fa.gr}}),c={sJ:!0,hja:!0,dY:function(a){return a.D("noMatchesFound")},id:function(a){return a.id},tn:function(a,b){return 0<=(""+b).toUpperCase().indexOf((""+
a).toUpperCase())},separator:","},e=d.ip(b,{Pq:function(){e.q.Pq.apply(this,arguments)&&this.search.prop("disabled",!this.Uk())},Kf:function(){this.ge()&&this.close()},_destroy:function(){f("label[for\x3d'"+this.search.attr("id")+"']").attr("for",this.W.element.attr("id"));e.q._destroy.apply(this,arguments)},AE:function(b){this.selection.data(this.pd)&&(b||a.u.warn("Event should not be null when user modified the value in UI"),this.Bn([],b),this.search.val(""),this.selection.removeData(this.pd));
this.Tm()},lr:function(){this.W.tp.call(null,this.Uj?this.Uj:this.W.element,this.yd(this.fX))},Fq:function(a){if(this.Uk())if(a.which===d.Ma.PAGE_UP||a.which===d.Ma.PAGE_DOWN)d.pe(a);else{switch(a.which){case d.Ma.UP:case d.Ma.DOWN:this.ge()?this.eU(a.which===d.Ma.UP?-1:1):this.open(a);d.pe(a);return;case d.Ma.ENTER:this.hI(null,a);d.pe(a);return;case d.Ma.TAB:this.close(a);return;case d.Ma.rC:this.tE(a);return}this.dJ=!0;this.ge()||this.open(a)}},s5:function(a){this.Uk()&&!this.ge()&&this.open(a)},
Hz:function(){var a;a=this.Fa;var b,c=this.W.rootAttributes,c=c&&c.id?c.id:this.W.element.attr("id")||d.Jw();this.selection=a=a.find("."+this.Ia+"-choice");a.attr("id",this.Ia+"-choice-"+c);b=f("label[for\x3d'"+this.W.element.attr("id")+"']");b.attr("id")||b.attr("id",this.Ia+"-label-"+c);a.find("."+this.Ia+"-input").attr("id",this.Ia+"-input-"+c);this.Lb.attr("id")||this.Lb.attr("id","oj-listbox-results-"+c);this.search.attr("aria-owns",this.Lb.attr("id"));this.search.attr("aria-labelledby",b.attr("id"));
this.W.element.attr("aria-labelledby",b.attr("id"));this.search.attr("id")&&b.attr("for",this.search.attr("id"));this.W.element.attr("aria-label")&&this.search.attr("aria-label",this.W.element.attr("aria-label"));this.W.element.attr("aria-controls")&&this.search.attr("aria-controls",this.W.element.attr("aria-controls"));a.on("keydown",this.yd(this.Fq));a.on("mousedown","abbr",this.yd(function(a){this.Uk()&&(this.AE(a),d.Kga(a),this.close(a),this.selection.focus())}));a.on("mousedown",this.yd(function(a){this.W.element.prop("disabled")&&
d.pe(a);this.ge()?this.close(a):this.Uk()&&this.open(a);this.search.focus()}));a.on("focus",this.yd(function(a){d.pe(a)}));this.search.on("blur keyup",this.yd(function(a){if("keyup"!==a.type||10===a.keyCode||13===a.keyCode){if(void 0!==this.search.val()&&0>=this.Lb.find(".oj-hover").length)if(this.W.manageNewEntry){if(!this.selection.data("ojcombobox")&&""!==this.search.val()||this.selection.data("ojcombobox")&&this.selection.data("ojcombobox").label!==this.search.val()){var b=this.W.manageNewEntry(this.search.val());
this.dA(b,null,a)}}else null==this.W.manageNewEntry&&(b=this.selection.data(this.pd),""==this.search.val()?this.AE(a):b||""===this.search.val()?(a=this.W.IJ(b),void 0!==a&&this.search.val(a)):this.jm());this.search.removeClass(this.Ia+"-focused")}}));this.YS();this.W.element.hide().attr("aria-hidden",!0);this.Tm()},Vo:function(){var a=e.q.Vo.apply(this,arguments),b=this,d=a.element.get(0).tagName.toLowerCase();if("input"===d&&a.element.attr("list")||"select"===d&&0<a.element.children().length||a.list){var c=
a.list?"li":"option";a.tp=function(a,d){var e,g=b.Zb();Array.isArray(g)&&(g=g[0]);e=void 0!==g&&null!==g?b.So(a.find(c).filter(function(){if("li"==c)return this.getAttribute("oj-data-value")===g;if("option"==c)return this.value===g})):b.So(a.find(c).filter(function(){if("li"==c)return!0===this.getAttribute("oj-data-selected");if("option"==c)return this.selected}));d(e)};a.validate=function(a,d){var e;void 0!==d&&null!==d&&(e=b.So(a.find(c).filter(function(){if("li"==c)return this.getAttribute("oj-data-value")===
d;if("option"==c)return this.value===d})));return!!e}}else if("options"in a||this.Zb()&&0<this.Zb().length)a.tp=function(c,e){var g="";b.Zb()&&b.Zb().length&&(g=b.Zb()[0]);var h="select"==d&&b.la.vx()&&!b.la.hq()?b.wm():null,l=null;a.Nw({tn:function(b,d,c){(b=g===a.id(c))&&(l=c);null==h&&(h=c);return b},Xb:f.isFunction(e)?function(){l||"select"!==d||(l=h);e(l)}:f.noop})},a.validate=function(b,d){var c=null;a.Nw({tn:function(b,e,g){(b=d===a.id(g))&&(c=g);return b},Xb:f.noop});return!!c};return a},
jv:function(a,b,c){var e=-1,g=this;a=this.eu();d.gn(a,function(a,b){if(g.Zb()&&g.Zb()[0]===g.id(b.data(g.pd)))return e=a,!1});!1!==c&&!0===b&&0<=e&&this.Io(e)},dA:function(a,b,d){this.ZW(a)&&(this.Zb()&&this.Zb(),this.close(d),this.Bn(0===this.id(a).length?[]:this.id(a),d),this.Uq())},kW:function(a){return this.ge()||!1===this.Qq||!0===this.Er?!1:this.la._trigger("beforeExpand",a,{component:this.W.element})},jm:function(){this.search.val("")}}),g=d.ip(e,{pd:"ojcombobox",Ia:"oj-combobox",vy:function(){return f(document.createElement("div")).attr({"class":"oj-combobox oj-component"}).html("\x3cdiv class\x3d'oj-combobox-choice' tabindex\x3d'-1' role\x3d'presentation'\x3e   \x3cinput type\x3d'text' autocomplete\x3d'off' autocorrect\x3d'off' autocapitalize\x3d'off'       spellcheck\x3d'false' class\x3d'oj-combobox-input' role\x3d'combobox' aria-expanded\x3d'false' aria-autocomplete\x3d'list' /\x3e   \x3cabbr class\x3d'oj-combobox-clear-entry' role\x3d'presentation'\x3e\x3c/abbr\x3e   \x3ca class\x3d'oj-combobox-arrow oj-combobox-icon oj-component-icon oj-clickable-icon-nocontext oj-combobox-open-icon' role\x3d'presentation'\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d'oj-listbox-drop' style\x3d'display:none' role\x3d'presentation'\x3e   \x3cul class\x3d'oj-listbox-results' role\x3d'listbox'\x3e   \x3c/ul\x3e\x3c/div\x3e")},
tm:function(a){g.q.tm.apply(this,arguments);this.Qq?this.Fa.find(".oj-combobox-arrow").removeClass("oj-disabled"):this.Fa.find(".oj-combobox-arrow").addClass("oj-disabled")},close:function(a){this.ge()&&g.q.close.apply(this,arguments)},Ro:function(a){g.q.Ro.apply(this,arguments);this.Vr(!0)},Fq:function(a){d.Ma.kK(a)||d.Ma.nK(a)||g.q.Fq.apply(this,arguments)},Xm:function(a){this.selection.data(this.pd,a);null!==a&&0!=a.length?(a=this.W.IJ(a),void 0!==a&&this.search.val()!==a&&this.search.val(a),this.search.removeClass(this.Ia+
"-default")):(this.search.val(""),this.Tm());this.W.Wea&&this.Fa.addClass(this.Ia+"-allowclear")},fX:function(a){if(void 0===a||null===a)a=(a=this.Zb())?Array.isArray(a)?Array.isArray(a)&&a.length?{label:a[0]}:null:{label:a}:null;this.Xm(a)}}),h=d.ip(e,{pd:"ojselect",Ia:"oj-select",dJ:!1,vy:function(){return f(document.createElement("div")).attr({"class":"oj-select oj-component"}).html("\x3cdiv class\x3d'oj-select-choice' tabindex\x3d'0' role\x3d'combobox'      aria-autocomplete\x3d'none' aria-expanded\x3d'false' aria-ready\x3d'true'\x3e  \x3cspan class\x3d'oj-select-chosen'\x3e\x3c/span\x3e  \x3cabbr class\x3d'oj-select-search-choice-close' role\x3d'presentation'\x3e\x3c/abbr\x3e  \x3ca class\x3d'oj-select-arrow oj-component-icon oj-clickable-icon-nocontext oj-select-open-icon' role\x3d'presentation'\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d'oj-listbox-drop' style\x3d'display:none' role\x3d'presentation'\x3e  \x3cdiv class\x3d'oj-listbox-search-wrapper'\x3e  \x3cdiv class\x3d'oj-listbox-search'\x3e    \x3cinput type\x3d'text' autocomplete\x3d'off' autocorrect\x3d'off' autocapitalize\x3d'off'           spellcheck\x3d'false' class\x3d'oj-listbox-input' title\x3d'Search field'            role\x3d'combobox' aria-expanded\x3d'false' aria-autocomplete\x3d'list' /\x3e    \x3cspan class\x3d'oj-listbox-spyglass-box'\x3e      \x3cspan class\x3d'oj-component-icon oj-clickable-icon-nocontext oj-listbox-search-icon' role\x3d'presentation'\x3e       \x3cb role\x3d'presentation'\x3e\x3c/b\x3e\x3c/span\x3e    \x3c/span\x3e  \x3c/div\x3e  \x3c/div\x3e   \x3cul class\x3d'oj-listbox-results' role\x3d'listbox'\x3e   \x3c/ul\x3e\x3c/div\x3e")},
tm:function(a){h.q.tm.apply(this,arguments);this.Qq?(this.Fa.find(".oj-select-choice").attr("tabindex","0"),this.Fa.find(".oj-select-arrow").removeClass("oj-disabled")):(this.Fa.find(".oj-select-choice").attr("tabindex","-1"),this.Fa.find(".oj-select-arrow").addClass("oj-disabled"))},close:function(a){this.ge()&&(h.q.close.apply(this,arguments),this.Fa.find(".oj-select-choice").attr("aria-expanded",!1),this.BI(a)||this.jm(),a instanceof MouseEvent&&a.target!=this.selection&&a.target!=this.search||
d.Kf(this.selection),this.Fa.find(".oj-listbox-spyglass-box").off("mouseup click"))},Ro:function(a){var b,c;h.q.Ro.apply(this,arguments);this.Fa.find(".oj-select-choice").attr("aria-expanded",!0);var e;a&&"keydown"==a.type&&a.which!=d.Ma.UP&&a.which!=d.Ma.DOWN&&a.which!=d.Ma.LEFT&&a.which!=d.Ma.RIGHT&&(e=String.fromCharCode(a.which),d.pe(a));this.pW(e);this.gr()&&(b=this.search.get(0),b.createTextRange?(b=b.createTextRange(),b.collapse(!1),b.select()):b.setSelectionRange&&(c=this.search.val().length,
b.setSelectionRange(c,c)));e?this.Vr():this.Vr(!0)},Hz:function(){var a=this.dn+"_selected";this.text=this.Fa.find(".oj-select-chosen").attr("id",a);h.q.Hz.apply(this,arguments);this.Fa.find(".oj-select-choice").attr({"aria-owns":this.search.attr("aria-owns"),"aria-labelledby":this.search.attr("aria-labelledby"),"aria-describedby":a});(a=this.W.element.attr("aria-label"))&&this.selection.attr("aria-label",a);this.search.on("keydown",this.yd(this.Fq));this.search.on("keyup-change input",this.yd(this.s5));
this.search.attr("title",this.la.D("seachField"));var b=this;this.selection.on("blur",function(a){b.BI(a)})},lr:function(){this.xT()?(this.Xm(null),this.close(),this.Tm()):h.q.lr.apply(this,arguments)},fX:function(a){if(void 0!==a&&null!==a){var b,d=this.Zb(),d=Array.isArray(d)?d[0]:d;b=this.W.id(a);d!==b&&(void 0===d||null===d?this.la.options.value=Array.isArray(b)?b:[b]:this.Bn(Array.isArray(b)?b:[b]));this.Xm(a);this.close()}},Xm:function(a){this.selection.data(this.pd,a);null!==a&&this.text.text(a.label);
a&&""!=a.id&&this.text.removeClass(this.Ia+"-default");this.W.Wea&&this.Fa.addClass(this.Ia+"-allowclear")},Vy:function(){return this.search.attr("aria-expanded")&&this.gr()?this.search:this.selection},xT:function(){if(null===this.wm())return!1;var a=this.Zb(),a=Array.isArray(a)?a[0]:a;return""===a||void 0===a||null===a},wm:function(){return this.W.placeholder},oW:function(){return!0},Tm:function(){var a=this.wm();this.xT()&&void 0!==a&&(void 0===a&&(a=""),this.text.text(a).addClass(this.Ia+"-default"),
this.Fa.removeClass(this.Ia+"-allowclear"))},Bn:function(a,b){h.q.Bn.call(this,a,b);this.selection.data("selectVal",a)},Fq:function(a){if(!d.Ma.kK(a)&&!d.Ma.nK(a)){switch(a.which){case d.Ma.TAB:this.close(a);this.selection.focus();this.BI(a);return;case d.Ma.ENTER:if(a.target===this.selection[0]&&!this.ge()){this.open(a);d.pe(a);return}}var b=this.gr();h.q.Fq.apply(this,arguments);if(!b&&this.dJ){var c;a.which!=d.Ma.LEFT&&a.which!=d.Ma.RIGHT&&(c=String.fromCharCode(a.which));this.pW(c);this.Vr();
d.pe(a)}}},BI:function(a){return""==this.text.text()?(this.AE(a),!0):!1},pW:function(a){var b=!1,c=this.qc.find(".oj-listbox-search");c&&(this.gr()?(this.qc.find(".oj-listbox-search-wrapper").removeClass("oj-helper-hidden-accessible"),f(c).removeAttr("aria-hidden"),this.search.val(a),b=!0):(this.qc.find(".oj-listbox-search-wrapper").addClass("oj-helper-hidden-accessible"),f(c).attr("aria-hidden","true")));d.Kf(b?this.search:this.selection);if(b){var e=this;c.find(".oj-listbox-spyglass-box").on("mouseup click",
function(a){e.search.focus();a.stopPropagation()})}},gr:function(){var a=this.W.minimumResultsForSearch;return(this.W.list?f("#"+this.W.list).find("li").length:this.Uj?this.Uj[0].length:this.W.options?this.W.options.length:0)>a||this.dJ}}),k=d.ip(b,{Vo:function(){var a=k.q.Vo.apply(this,arguments),b=this,c=a.element.get(0).tagName.toLowerCase();if("input"===c&&a.element.attr("list")||"select"===c&&0<a.element.children().length||a.list){var e=a.list?"li":"option";a.tp=function(a,g){var f=[];if(b.Zb())for(var h,
l=b.Zb(),k=0;k<l.length;k++){var m=l[k];(h=a.find(e).filter(function(){if("option"===e)return this.value===m;if("li"===e)return this.getAttribute("oj-data-value")===m}))&&h.length?f.push(b.So(h)):f.push({value:m,label:m})}else"select"!==c&&(h=a.find(e).filter(function(){if("option"===e)return this.selected;if("li"===e)return!0===this.getAttribute("oj-data-selected")}),d.gn(h,function(a,d){f.push(b.So(d))}));g(f)}}else"options"in a&&(a.tp=a.tp||function(d,c){var e=b.Zb(),g=[];a.Nw({tn:function(b,d,
c){(b=f.grep(e,function(b){return b===a.id(c)}).length)&&g.push(c);return b},Xb:f.isFunction(c)?function(){for(var b=[],d=0;d<e.length;d++){for(var f=e[d],h=!1,p=0;p<g.length;p++){var l=g[p];if(f===a.id(l)){b.push(l);g.splice(p,1);h=!0;break}}h||b.push({value:f,label:f})}c(b)}:f.noop})});return a},Hr:function(a){var b=this.Fa.find("."+this.Ia+"-selected-choice.oj-focus");b.length&&a&&a[0]==b[0]||(b.length&&this.W.element.trigger("choice-deselected",b),b.removeClass("oj-focus"),a&&a.length&&(this.close(),
a.addClass("oj-focus"),this.Fa.find("."+this.Ia+"-description").text(a.attr("valueText")+". Press back space to delete.").attr("aria-live","assertive"),this.W.element.trigger("choice-selected",a)))},_destroy:function(){f("label[for\x3d'"+this.search.attr("id")+"']").attr("for",this.W.element.attr("id"));k.q._destroy.apply(this,arguments)},Hz:function(){var a="."+this.Ia+"-choices",b,c=d.Jw(),e;this.ZK=this.Fa.find("."+this.Ia+"-search-field");this.selection=b=this.Fa.find(a);var g=this;this.selection.on("click",
"."+this.Ia+"-selected-choice:not(."+this.Ia+"-locked)",function(){g.search[0].focus();g.Hr(f(this))});e=f("label[for\x3d'"+this.W.element.attr("id")+"']");e.attr("id")||e.attr("id",this.Ia+"-label-"+c);b.find("."+this.Ia+"-input").attr("id",this.Ia+"-input-"+c);this.Lb.attr("id")||this.Lb.attr("id","oj-listbox-results-"+c);this.search.attr("aria-owns",this.Lb.attr("id"));this.search.attr("aria-labelledby",e.attr("id"));this.W.element.attr("aria-labelledby",e.attr("id"));this.search.attr("id")&&e.attr("for",
this.search.attr("id"));this.W.element.attr("aria-label")&&this.search.attr("aria-label",this.W.element.attr("aria-label"));this.W.element.attr("aria-controls")&&this.search.attr("aria-controls",this.W.element.attr("aria-controls"));this.search.attr("tabindex",this.DJ);this.rK=0;this.search.on("keydown",this.yd(function(a){if(this.Uk()){++this.rK;var c=b.find("."+this.Ia+"-selected-choice.oj-focus"),e=c.prev("."+this.Ia+"-selected-choice:not(."+this.Ia+"-locked)"),g=c.next("."+this.Ia+"-selected-choice:not(."+
this.Ia+"-locked)"),f=d.Wfa(this.search);if(!c.length||a.which!=d.Ma.LEFT&&a.which!=d.Ma.RIGHT&&a.which!=d.Ma.mC&&a.which!=d.Ma.AL&&a.which!=d.Ma.ENTER)if((a.which!==d.Ma.mC||1!=this.rK)&&a.which!=d.Ma.LEFT||0!=f.offset||f.length){this.Hr(null);if(this.ge())switch(a.which){case d.Ma.UP:case d.Ma.DOWN:this.eU(a.which===d.Ma.UP?-1:1);d.pe(a);return;case d.Ma.ENTER:this.hI(null,a);d.pe(a);return;case d.Ma.TAB:this.close(a);return;case d.Ma.rC:this.tE(a);return}a.which===d.Ma.TAB||d.Ma.kK(a)||d.Ma.nK(a)||
a.which===d.Ma.rC||a.which===d.Ma.ENTER&&this.search.val()&&"ojcombobox"===this.pd||(this.open(),a.which!==d.Ma.PAGE_UP&&a.which!==d.Ma.PAGE_DOWN||d.pe(a),a.which===d.Ma.ENTER&&d.pe(a))}else this.Hr(b.find("."+this.Ia+"-selected-choice:not(."+this.Ia+"-locked)").last()),d.pe(a);else f=c,a.which==d.Ma.LEFT&&e.length?f=e:a.which==d.Ma.RIGHT?f=g.length?g:null:a.which===d.Ma.mC?(this.YI(c.first(),a),this.search.width(10),f=e.length?e:g):a.which==d.Ma.AL?(this.YI(c.first(),a),this.search.width(10),f=g.length?
g:null):a.which==d.Ma.ENTER&&(f=null),this.Hr(f),d.pe(a),f&&f.length||this.open()}}));this.search.on("keyup",this.yd(function(){this.rK=0}));this.search.on("blur keyup",this.yd(function(a){if("keyup"!==a.type||10===a.keyCode||13===a.keyCode){if(this.W.manageNewEntry&&this.search.val()&&0>=this.Lb.find(".oj-hover").length){var b=this.W.manageNewEntry(this.search.val());this.dA(b,null,a)}this.search.removeClass(this.Ia+"-focused");this.Hr(null);this.ge()||this.jm();a.stopImmediatePropagation()}}));
this.Fa.on("click",a,this.yd(function(a){!this.Uk()||0<f(a.target).closest("."+this.Ia+"-selected-choice").length||(this.Hr(null),this.ge()?this.close(a):(this.open(),this.Uq()),a.preventDefault())}));this.Fa.on("focus",a,this.yd(function(){}));this.YS();this.W.element.hide().attr("aria-hidden",!0);this.jm()},Pq:function(){k.q.Pq.apply(this,arguments)&&this.search.prop("disabled",!this.Uk())},lr:function(){null!==this.Zb()&&0!==this.Zb().length||"oj-select"!==this.Ia&&""!==this.W.element.text()||
(this.Xm([]),this.close(),this.jm());if(this.Uj||null!==this.Zb()&&this.Zb().length){var a=this;this.W.tp.call(null,this.Uj?this.Uj:this.W.element,function(b){void 0!==b&&null!==b&&0!==b.length&&(a.Xm(b),a.close(),a.jm())})}},jm:function(){var a=this.wm(),b=this.r8();void 0===a||this.Zb()&&0!==this.Zb().length?(this.search.attr("placeholder",""),this.search.val("").width(10),this.ZK.width("auto")):(this.search.attr("placeholder",a),this.search.val("").width(0<b?b:this.Fa.css("width")),this.ZK.width("100%"))},
Ro:function(a){this.la._trigger("beforeExpand",a)&&(this.Qca(),k.q.Ro.apply(this,arguments),this.Uq(),this.Vr(!0),this.search.focus())},close:function(a){this.ge()&&k.q.close.apply(this,arguments)},Kf:function(){this.close();this.search.focus()},Xm:function(a){var b=[],d=[],c=this;f(a).each(function(){0>b.indexOf(c.id(this))&&(b.push(c.id(this)),d.push(this))});a=d;this.selection.find("."+this.Ia+"-selected-choice").remove();f(a).each(function(){c.W3(this)});this.W.element.val(0===a.length?"":a.join(this.W.separator));
c.jv()},dA:function(a,b,c){if(this.ZW(a)){var e=this.id(a),g=this.Zb()?this.Zb().slice(0):[];this.la.isValid()||(g=d.Cn(this.W.element.val(),this.W.separator));f(a).each(function(){0>g.indexOf(e)&&g.push(e)});this.Bn(g,c);!this.select&&this.W.sJ||this.jv(a,!1,!0===this.W.sJ);this.W.sJ&&(this.close(c),this.search.width(10));b&&b.Tga||this.Uq()}},tE:function(a){this.close(a);this.Uq()},W3:function(a){var b=!a.locked,c=f("\x3cli class\x3d'"+this.Ia+"-selected-choice'\x3e    \x3cdiv\x3e\x3c/div\x3e    \x3ca href\x3d'#' onclick\x3d'return false;' class\x3d'"+
this.Ia+"-clear-entry       oj-component-icon oj-clickable-icon-nocontext "+this.Ia+"-clear-entry-icon' tabindex\x3d'-1'\x3e    \x3c/a\x3e\x3c/li\x3e"),e=f("\x3cli class\x3d'"+this.Ia+"-selected-choice "+this.Ia+"-locked'\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/li\x3e"),c=b?c:e;this.id(a);e=this.W.IJ(a);void 0!==e&&(c.find("div").addClass(this.Ia+"-selected-choice-label").text(e),c.attr("valueText",e));if(b)c.find("."+this.Ia+"-clear-entry").on("mousedown",d.pe).on("click dblclick",this.yd(function(a){this.Uk()&&
(f(a.target).closest("."+this.Ia+"-selected-choice").fadeOut("fast",this.yd(function(){this.YI(f(a.target),a);this.selection.find("."+this.Ia+"-selected-choice.oj-focus").removeClass("oj-focus");this.close(a);this.Uq()})).dequeue(),d.pe(a))}));c.data(this.pd,a);c.insertBefore(this.ZK)},YI:function(a,b){var c=this.Zb()?this.Zb().slice(0):[],e,g;a=a.closest("."+this.Ia+"-selected-choice");if(0===a.length)throw"Invalid argument: "+a+". Must be ."+this.Ia+"-selected-choice";if(e=a.data(this.pd)){for(this.la.isValid()||
(c=d.Cn(this.W.element.val(),this.W.separator));0<=(g=c.indexOf(this.id(e)));)c.splice(g,1),this.Bn(c,b),this.select&&this.jv();a.remove()}},jv:function(){var a=this.Zb()&&(this.W.element.val()||this.la.isValid())?this.Zb():[],b=this.Lb.find(".oj-listbox-result"),c=this.Lb.find(".oj-listbox-result-with-children"),e=this;d.gn(b,function(b,d){var c=e.id(d.data(e.pd));a&&0<=a.indexOf(c)&&(d.addClass("oj-selected"),d.find(".oj-listbox-result-selectable").addClass("oj-selected"))});d.gn(c,function(a,b){b.is(".oj-listbox-result-selectable")||
0!==b.find(".oj-listbox-result-selectable:not(.oj-selected)").length||b.addClass("oj-selected")});0< !b.filter(".oj-listbox-result:not(.oj-selected)").length&&this.close()},r8:function(){return this.selection.width()-d.LY(this.search)},eea:function(a){var b=document.createElement("span");a=document.createTextNode(a);b.style.display="none";b.appendChild(a);f("body").append(b);b=f("body").find("span:last").width();f("body").find("span:last").remove();return b},Qca:function(){var a,b,c,e,g=d.LY(this.search);
a=this.eea(this.search.val())+10;b=this.search.offset().left;c=this.selection.width();e=this.selection.offset().left;b=c-(b-e)-g;b<a&&(b=c-g);40>b&&(b=c-g);0>=b&&(b=a);this.search.width(Math.floor(b))},Bn:function(a,b){var c;c=[];"string"===typeof a&&(a=d.Cn(a,this.W.separator));for(var e=0;e<a.length;e++)0>c.indexOf(a[e])&&c.push(a[e]);this.la.tc(c,b,{np:!1});this.W.element.val(0===c.length?"":c.join(this.W.separator));this.search.attr("aria-activedescendant",this.W.element.attr("id"))}}),l=d.ip(k,
{pd:"ojcombobox",Ia:"oj-combobox",vy:function(){return f(document.createElement("div")).attr({"class":"oj-combobox oj-combobox-multi oj-component"}).html("\x3cul class\x3d'oj-combobox-choices'\x3e  \x3cli class\x3d'oj-combobox-search-field'\x3e    \x3cinput type\x3d'text' role\x3d'combobox' aria-expanded\x3d'false' aria-autocomplete\x3d'list' autocomplete\x3d'off' autocorrect\x3d'off' autocapitalize\x3d'off' spellcheck\x3d'false' class\x3d'oj-combobox-input'\x3e  \x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'oj-combobox-description oj-helper-hidden-accessible'/\x3e\x3cdiv class\x3d'oj-listbox-drop oj-listbox-drop-multi' style\x3d'display:none'\x3e   \x3cul class\x3d'oj-listbox-results' role\x3d'listbox'\x3e   \x3c/ul\x3e\x3c/div\x3e")}}),
m=d.ip(k,{pd:"ojselect",Ia:"oj-select",vy:function(){return f(document.createElement("div")).attr({"class":"oj-select oj-select-multi oj-component"}).html("\x3cul class\x3d'oj-select-choices'\x3e  \x3cli class\x3d'oj-select-search-field'\x3e    \x3cinput type\x3d'text' role\x3d'combobox' aria-expanded\x3d'false' aria-autocomplete\x3d'list' autocomplete\x3d'off' autocorrect\x3d'off' autocapitalize\x3d'off' spellcheck\x3d'false' class\x3d'oj-listbox-input'\x3e  \x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'oj-select-description oj-helper-hidden-accessible'/\x3e\x3cdiv class\x3d'oj-listbox-drop oj-listbox-drop-multi' style\x3d'display:none'\x3e   \x3cul class\x3d'oj-listbox-results' role\x3d'listbox'\x3e   \x3c/ul\x3e\x3c/div\x3e")}});
a.Da("oj.ojCombobox",f.oj.editableValue,{defaultElement:"\x3cinput\x3e",widgetEventPrefix:"oj",options:{converter:void 0,placeholder:void 0,list:void 0,multiple:!1,options:null,optionsKeys:null,beforeExpand:null},widget:function(){return this.yc.Fa},_ComponentCreate:function(){this._super();this.za()},ae:function(b,c){this._super(b,c);a.Be.vl([{X:"disabled",ra:null,rc:!0},{X:"placeholder",ra:""},{X:"required",ra:!1,je:!0,rc:!0},{X:"title",ra:""}],c,this);if(void 0===this.options.value)this.options.value=
void 0!==this.element.attr("value")?d.Cn(this.element.val(),","):null;else{var e=this.options.value;Array.isArray(e)?e=e.slice(0):"string"===typeof e&&(e=!0===this.options.multiple?d.Cn(e,","):[e]);this.options.value=e}},za:function(){var a={},b=this.options.multiple;a.element=this.element;a.la=this;a=f.extend(this.options,a);this.yc=b?new l:new g;this.yc._init(a)},_destroy:function(){this.yc._destroy();this._super()},refresh:function(){this._super();this.yc._destroy();this.za();this.zD();this.Xg("required",
this.options.required)},_setOption:function(a,b,c){"value"===a&&(Array.isArray(b)?b=b.slice(0):"string"===typeof b&&(b=!0===this.options.multiple?d.Cn(b,","):[b]));this._super(a,b,c);"options"===a&&(this.yc.W.options=b,this.yc.W=this.yc.Vo(this.yc.W));"disabled"===a&&(b?this.yc.kQ():this.yc.tm())},yi:function(){this.yc.close()},$l:function(){this.yc.close()},tj:function(){this.yc.lr()},pq:function(a){this.yc&&(this.yc.W.placeholder=a,this.yc.Tm&&this.yc.Tm())},validate:function(){var a=this.yc.search.val(),
b=null;!0!==this.options.multiple?b=void 0===a||null===a||""===a?[]:[a]:(b=this.yc.Zb(),b=void 0===a||null===a||""===a?b:b.push(a));return this.tc(b,null,this.KD)},CH:function(a){var b=[];"string"===typeof a&&(a=!0===this.options.multiple?d.Cn(a,","):[a]);if(Array.isArray(a))for(var c=0;c<a.length;c++){var e=this._super(a[c]);b.push(e.toString())}return b},_GetMessagingLauncherElement:function(){return this.yc.search},Ff:function(){return this.yc.search},_GetDefaultStyleClass:function(){return"oj-combobox"},
mu:function(){if(this.yc&&this.yc.ge())for(var a=f(".oj-listbox-drop"),b=0;b<a.length;b++)if("oj-listbox-drop"==f(a[b]).attr("id")&&f(a[b]).attr("data-oj-containerid")==this.yc.dn)return f(a[b]);return null},getNodeBySubId:function(a){var b=null;if(null==a)return this.yc.Fa?this.yc.Fa[0]:null;b=this._super(a);if(!b){a=a.subId;"oj-combobox-drop"===a&&(a="oj-listbox-drop");"oj-combobox-results"===a&&(a="oj-listbox-results");"oj-combobox-selection"===a&&(a="oj-combobox-selected-choice");var d=this.mu();
switch(a){case "oj-combobox-input":case "oj-combobox-arrow":b=this.widget().find("."+a)[0];break;case "oj-listbox-drop":d&&(b=d[0]);break;case "oj-listbox-results":d&&(b=d.find("."+a)[0]);break;case "oj-combobox-selected-choice":b=this.widget().find("."+a).toArray()}}return b||null}});a.Da("oj.ojSelect",f.oj.editableValue,{defaultElement:"\x3cselect\x3e",widgetEventPrefix:"oj",options:{minimumResultsForSearch:10,placeholder:void 0,list:void 0,multiple:!1,options:null,optionsKeys:null,beforeExpand:null},
widget:function(){return this.select.Fa},_ComponentCreate:function(){this._super();this.za()},za:function(){var a={},b=this.options.multiple;a.element=this.element;a.la=this;a=f.extend(this.options,a);this.select=b?new m:new h;this.select._init(a)},refresh:function(){this._super();this.select._destroy();this.za();this.zD();this.Xg("required",this.options.required)},_destroy:function(){this.select._destroy();this._super()},yi:function(){this.select.close()},$l:function(){this.select.close()},pq:function(){},
vx:function(){return"string"===typeof this.options.placeholder},HM:function(){this.TN(null);this.pq(null)},ae:function(b,c){this._super(b,c);a.Be.vl([{X:"disabled",ra:null,rc:!0},{X:"placeholder",ra:null},{X:"required",ra:!1,je:!0,rc:!0},{X:"title",ra:""}],c,this);if(void 0===this.options.value)this.options.value=void 0!==this.element.attr("value")?d.Cn(this.element.val(),","):null;else{var e=this.options.value;Array.isArray(e)&&(e=e.slice(0));this.options.value=e}},validate:function(){return this.select?
this.tc(this.select.Zb(),null,this.KD):!0},tj:function(){this.select.lr()},_setOption:function(a,b,d){if("value"===a)if(this.vx()&&b&&0==b.length)this._super(a,b,d);else{var c=b;Array.isArray(b)&&(b=b.slice(0),!0!==this.options.multiple&&(c=b[0]));var e=this.select.Uj;e||(e=this.select.W.element);(!0!==this.options.multiple&&this.select.W.validate(e,c)||this.options.multiple)&&this._super(a,b,d)}else"placeholder"===a?(this.select.W.placeholder=b,this.select.Tm()):"minimumResultsForSearch"===a&&(this.select.W.minimumResultsForSearch=
b),this._super(a,b,d),"disabled"===a?b?this.select.kQ():this.select.tm():"options"===a&&(this.select.W.options=b,this.select.W=this.select.Vo(this.select.W),this._super("value",this.select.Zb()))},mu:function(){if(this.select&&this.select.ge()){var a=this.select.qc;if(a&&a.attr("data-oj-containerid")===this.select.dn)return a}return null},getNodeBySubId:function(a){var b=null,d;if(null==a)return this.select.Fa?this.select.Fa[0]:null;b=this._super(a);if(!b)switch(d=a.subId,"oj-select-drop"===d&&(d=
"oj-listbox-drop"),"oj-select-results"===d&&(d="oj-listbox-results"),"oj-select-search"===d&&(d="oj-listbox-search"),d){case "oj-select-choice":case "oj-select-chosen":b=this.widget().find("."+d)[0];break;case "oj-listbox-drop":var c=this.mu();c&&(b=c[0]);break;case "oj-listbox-input":case "oj-listbox-search":case "oj-listbox-results":(c=this.mu())&&(b=c.find("."+d)[0]);break;case "oj-listbox-result-label":this.mu()&&(c=f("#"+this.select.Lb.attr("id")).children(),a=a.index,c.length&&a<c.length&&(b=
c.eq(a).find("."+d)[0]))}return b||null},_GetDefaultStyleClass:function(){return"oj-select"},_GetMessagingLauncherElement:function(){return this.select.selection},Ff:function(){return this.select.selection}});a.Components.WB({ojSelect:{displayOptions:{converterHint:["none"]}}})});